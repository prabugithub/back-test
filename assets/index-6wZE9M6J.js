(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function Ux(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xm={exports:{}},Ul={};var nb;function Bx(){if(nb)return Ul;nb=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:s,type:n,key:c,ref:a!==void 0?a:null,props:l}}return Ul.Fragment=t,Ul.jsx=e,Ul.jsxs=e,Ul}var ib;function Fx(){return ib||(ib=1,xm.exports=Bx()),xm.exports}var S=Fx(),Am={exports:{}},jt={};var sb;function qx(){if(sb)return jt;sb=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),E=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function B(V,J,mt){this.props=V,this.context=J,this.refs=D,this.updater=mt||x}B.prototype.isReactComponent={},B.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},B.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=B.prototype;function rt(V,J,mt){this.props=V,this.context=J,this.refs=D,this.updater=mt||x}var gt=rt.prototype=new Z;gt.constructor=rt,R(gt,B.prototype),gt.isPureReactComponent=!0;var yt=Array.isArray;function xt(){}var N={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function O(V,J,mt){var pt=mt.ref;return{$$typeof:s,type:V,key:J,ref:pt!==void 0?pt:null,props:mt}}function L(V,J){return O(V.type,J,V.props)}function z(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function U(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(mt){return J[mt]})}var I=/\/+/g;function kt(V,J){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):J.toString(36)}function Xt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(xt,xt):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,J,mt,pt,ot){var _t=typeof V;(_t==="undefined"||_t==="boolean")&&(V=null);var Tt=!1;if(V===null)Tt=!0;else switch(_t){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(V.$$typeof){case s:case t:Tt=!0;break;case y:return Tt=V._init,G(Tt(V._payload),J,mt,pt,ot)}}if(Tt)return ot=ot(V),Tt=pt===""?"."+kt(V,0):pt,yt(ot)?(mt="",Tt!=null&&(mt=Tt.replace(I,"$&/")+"/"),G(ot,J,mt,"",function(fe){return fe})):ot!=null&&(z(ot)&&(ot=L(ot,mt+(ot.key==null||V&&V.key===ot.key?"":(""+ot.key).replace(I,"$&/")+"/")+Tt)),J.push(ot)),1;Tt=0;var Ht=pt===""?".":pt+":";if(yt(V))for(var zt=0;zt<V.length;zt++)pt=V[zt],_t=Ht+kt(pt,zt),Tt+=G(pt,J,mt,_t,ot);else if(zt=A(V),typeof zt=="function")for(V=zt.call(V),zt=0;!(pt=V.next()).done;)pt=pt.value,_t=Ht+kt(pt,zt++),Tt+=G(pt,J,mt,_t,ot);else if(_t==="object"){if(typeof V.then=="function")return G(Xt(V),J,mt,pt,ot);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function dt(V,J,mt){if(V==null)return V;var pt=[],ot=0;return G(V,pt,"","",function(_t){return J.call(mt,_t,ot++)}),pt}function bt(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(mt){(V._status===0||V._status===-1)&&(V._status=1,V._result=mt)},function(mt){(V._status===0||V._status===-1)&&(V._status=2,V._result=mt)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var ut=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},St={map:dt,forEach:function(V,J,mt){dt(V,function(){J.apply(this,arguments)},mt)},count:function(V){var J=0;return dt(V,function(){J++}),J},toArray:function(V){return dt(V,function(J){return J})||[]},only:function(V){if(!z(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return jt.Activity=b,jt.Children=St,jt.Component=B,jt.Fragment=e,jt.Profiler=a,jt.PureComponent=rt,jt.StrictMode=n,jt.Suspense=m,jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,jt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},jt.cache=function(V){return function(){return V.apply(null,arguments)}},jt.cacheSignal=function(){return null},jt.cloneElement=function(V,J,mt){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var pt=R({},V.props),ot=V.key;if(J!=null)for(_t in J.key!==void 0&&(ot=""+J.key),J)!M.call(J,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&J.ref===void 0||(pt[_t]=J[_t]);var _t=arguments.length-2;if(_t===1)pt.children=mt;else if(1<_t){for(var Tt=Array(_t),Ht=0;Ht<_t;Ht++)Tt[Ht]=arguments[Ht+2];pt.children=Tt}return O(V.type,ot,pt)},jt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},jt.createElement=function(V,J,mt){var pt,ot={},_t=null;if(J!=null)for(pt in J.key!==void 0&&(_t=""+J.key),J)M.call(J,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(ot[pt]=J[pt]);var Tt=arguments.length-2;if(Tt===1)ot.children=mt;else if(1<Tt){for(var Ht=Array(Tt),zt=0;zt<Tt;zt++)Ht[zt]=arguments[zt+2];ot.children=Ht}if(V&&V.defaultProps)for(pt in Tt=V.defaultProps,Tt)ot[pt]===void 0&&(ot[pt]=Tt[pt]);return O(V,_t,ot)},jt.createRef=function(){return{current:null}},jt.forwardRef=function(V){return{$$typeof:f,render:V}},jt.isValidElement=z,jt.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:bt}},jt.memo=function(V,J){return{$$typeof:g,type:V,compare:J===void 0?null:J}},jt.startTransition=function(V){var J=N.T,mt={};N.T=mt;try{var pt=V(),ot=N.S;ot!==null&&ot(mt,pt),typeof pt=="object"&&pt!==null&&typeof pt.then=="function"&&pt.then(xt,ut)}catch(_t){ut(_t)}finally{J!==null&&mt.types!==null&&(J.types=mt.types),N.T=J}},jt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},jt.use=function(V){return N.H.use(V)},jt.useActionState=function(V,J,mt){return N.H.useActionState(V,J,mt)},jt.useCallback=function(V,J){return N.H.useCallback(V,J)},jt.useContext=function(V){return N.H.useContext(V)},jt.useDebugValue=function(){},jt.useDeferredValue=function(V,J){return N.H.useDeferredValue(V,J)},jt.useEffect=function(V,J){return N.H.useEffect(V,J)},jt.useEffectEvent=function(V){return N.H.useEffectEvent(V)},jt.useId=function(){return N.H.useId()},jt.useImperativeHandle=function(V,J,mt){return N.H.useImperativeHandle(V,J,mt)},jt.useInsertionEffect=function(V,J){return N.H.useInsertionEffect(V,J)},jt.useLayoutEffect=function(V,J){return N.H.useLayoutEffect(V,J)},jt.useMemo=function(V,J){return N.H.useMemo(V,J)},jt.useOptimistic=function(V,J){return N.H.useOptimistic(V,J)},jt.useReducer=function(V,J,mt){return N.H.useReducer(V,J,mt)},jt.useRef=function(V){return N.H.useRef(V)},jt.useState=function(V){return N.H.useState(V)},jt.useSyncExternalStore=function(V,J,mt){return N.H.useSyncExternalStore(V,J,mt)},jt.useTransition=function(){return N.H.useTransition()},jt.version="19.2.1",jt}var rb;function Fg(){return rb||(rb=1,Am.exports=qx()),Am.exports}var nt=Fg();const ah=Ux(nt);var Cm={exports:{}},Bl={},Rm={exports:{}},Mm={};var ab;function Yx(){return ab||(ab=1,(function(s){function t(G,dt){var bt=G.length;G.push(dt);t:for(;0<bt;){var ut=bt-1>>>1,St=G[ut];if(0<a(St,dt))G[ut]=dt,G[bt]=St,bt=ut;else break t}}function e(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var dt=G[0],bt=G.pop();if(bt!==dt){G[0]=bt;t:for(var ut=0,St=G.length,V=St>>>1;ut<V;){var J=2*(ut+1)-1,mt=G[J],pt=J+1,ot=G[pt];if(0>a(mt,bt))pt<St&&0>a(ot,mt)?(G[ut]=ot,G[pt]=bt,ut=pt):(G[ut]=mt,G[J]=bt,ut=J);else if(pt<St&&0>a(ot,bt))G[ut]=ot,G[pt]=bt,ut=pt;else break t}}return dt}function a(G,dt){var bt=G.sortIndex-dt.sortIndex;return bt!==0?bt:G.id-dt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();s.unstable_now=function(){return c.now()-f}}var m=[],g=[],y=1,b=null,E=3,A=!1,x=!1,R=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;function gt(G){for(var dt=e(g);dt!==null;){if(dt.callback===null)n(g);else if(dt.startTime<=G)n(g),dt.sortIndex=dt.expirationTime,t(m,dt);else break;dt=e(g)}}function yt(G){if(R=!1,gt(G),!x)if(e(m)!==null)x=!0,xt||(xt=!0,U());else{var dt=e(g);dt!==null&&Xt(yt,dt.startTime-G)}}var xt=!1,N=-1,M=5,O=-1;function L(){return D?!0:!(s.unstable_now()-O<M)}function z(){if(D=!1,xt){var G=s.unstable_now();O=G;var dt=!0;try{t:{x=!1,R&&(R=!1,Z(N),N=-1),A=!0;var bt=E;try{e:{for(gt(G),b=e(m);b!==null&&!(b.expirationTime>G&&L());){var ut=b.callback;if(typeof ut=="function"){b.callback=null,E=b.priorityLevel;var St=ut(b.expirationTime<=G);if(G=s.unstable_now(),typeof St=="function"){b.callback=St,gt(G),dt=!0;break e}b===e(m)&&n(m),gt(G)}else n(m);b=e(m)}if(b!==null)dt=!0;else{var V=e(g);V!==null&&Xt(yt,V.startTime-G),dt=!1}}break t}finally{b=null,E=bt,A=!1}dt=void 0}}finally{dt?U():xt=!1}}}var U;if(typeof rt=="function")U=function(){rt(z)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,kt=I.port2;I.port1.onmessage=z,U=function(){kt.postMessage(null)}}else U=function(){B(z,0)};function Xt(G,dt){N=B(function(){G(s.unstable_now())},dt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(G){switch(E){case 1:case 2:case 3:var dt=3;break;default:dt=E}var bt=E;E=dt;try{return G()}finally{E=bt}},s.unstable_requestPaint=function(){D=!0},s.unstable_runWithPriority=function(G,dt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var bt=E;E=G;try{return dt()}finally{E=bt}},s.unstable_scheduleCallback=function(G,dt,bt){var ut=s.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?ut+bt:ut):bt=ut,G){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=bt+St,G={id:y++,callback:dt,priorityLevel:G,startTime:bt,expirationTime:St,sortIndex:-1},bt>ut?(G.sortIndex=bt,t(g,G),e(m)===null&&G===e(g)&&(R?(Z(N),N=-1):R=!0,Xt(yt,bt-ut))):(G.sortIndex=St,t(m,G),x||A||(x=!0,xt||(xt=!0,U()))),G},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(G){var dt=E;return function(){var bt=E;E=dt;try{return G.apply(this,arguments)}finally{E=bt}}}})(Mm)),Mm}var ob;function Hx(){return ob||(ob=1,Rm.exports=Yx()),Rm.exports}var Nm={exports:{}},xn={};var lb;function Qx(){if(lb)return xn;lb=1;var s=Fg();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:g,implementation:y}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,y)},xn.flushSync=function(m){var g=c.T,y=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=g,n.p=y,n.d.f()}},xn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(m,g))},xn.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},xn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,b=f(y,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:A}):y==="script"&&n.d.X(m,{crossOrigin:b,integrity:E,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},xn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);n.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(m)},xn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=f(y,g.crossOrigin);n.d.L(m,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},xn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=f(g.as,g.crossOrigin);n.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(m)},xn.requestFormReset=function(m){n.d.r(m)},xn.unstable_batchedUpdates=function(m,g){return m(g)},xn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},xn.useFormStatus=function(){return c.H.useHostTransitionStatus()},xn.version="19.2.1",xn}var ub;function Gx(){if(ub)return Nm.exports;ub=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Nm.exports=Qx(),Nm.exports}var cb;function Kx(){if(cb)return Bl;cb=1;var s=Hx(),t=Fg(),e=Gx();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function f(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(n(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(n(188));return r!==i?null:i}for(var o=i,u=r;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),i;if(p===u)return m(d),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=d,u=p;else{for(var _=!1,T=d.child;T;){if(T===o){_=!0,o=d,u=p;break}if(T===u){_=!0,u=d,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=d;break}if(T===u){_=!0,u=p,o=d;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var b=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),rt=Symbol.for("react.context"),gt=Symbol.for("react.forward_ref"),yt=Symbol.for("react.suspense"),xt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function kt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case B:return"Profiler";case D:return"StrictMode";case yt:return"Suspense";case xt:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case rt:return i.displayName||"Context";case Z:return(i._context.displayName||"Context")+".Consumer";case gt:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:kt(i.type)||"Memo";case M:r=i._payload,i=i._init;try{return kt(i(r))}catch{}}return null}var Xt=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt={pending:!1,data:null,method:null,action:null},ut=[],St=-1;function V(i){return{current:i}}function J(i){0>St||(i.current=ut[St],ut[St]=null,St--)}function mt(i,r){St++,ut[St]=i.current,i.current=r}var pt=V(null),ot=V(null),_t=V(null),Tt=V(null);function Ht(i,r){switch(mt(_t,r),mt(ot,i),mt(pt,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?xv(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=xv(r),i=Av(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(pt),mt(pt,i)}function zt(){J(pt),J(ot),J(_t)}function fe(i){i.memoizedState!==null&&mt(Tt,i);var r=pt.current,o=Av(r,i.type);r!==o&&(mt(ot,i),mt(pt,o))}function Re(i){ot.current===i&&(J(pt),J(ot)),Tt.current===i&&(J(Tt),kl._currentValue=bt)}var Qe,Me;function wt(i){if(Qe===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Qe=r&&r[1]||"",Me=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+i+Me}var Et=!1;function Ct(i,r){if(!i||Et)return"";Et=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(X){var Q=X}Reflect.construct(i,[],st)}else{try{st.call()}catch(X){Q=X}i.call(st.prototype)}}else{try{throw Error()}catch(X){Q=X}(st=i())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(X){if(X&&Q&&typeof X.stack=="string")return[X.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),_=p[0],T=p[1];if(_&&T){var P=_.split(`
`),H=T.split(`
`);for(d=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(u===P.length||d===H.length)for(u=P.length-1,d=H.length-1;1<=u&&0<=d&&P[u]!==H[d];)d--;for(;1<=u&&0<=d;u--,d--)if(P[u]!==H[d]){if(u!==1||d!==1)do if(u--,d--,0>d||P[u]!==H[d]){var tt=`
`+P[u].replace(" at new "," at ");return i.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",i.displayName)),tt}while(1<=u&&0<=d);break}}}finally{Et=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?wt(o):""}function se(i,r){switch(i.tag){case 26:case 27:case 5:return wt(i.type);case 16:return wt("Lazy");case 13:return i.child!==r&&r!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return Ct(i.type,!1);case 11:return Ct(i.type.render,!1);case 1:return Ct(i.type,!0);case 31:return wt("Activity");default:return""}}function Ve(i){try{var r="",o=null;do r+=se(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ee=Object.prototype.hasOwnProperty,me=s.unstable_scheduleCallback,k=s.unstable_cancelCallback,W=s.unstable_shouldYield,it=s.unstable_requestPaint,ft=s.unstable_now,ct=s.unstable_getCurrentPriorityLevel,Rt=s.unstable_ImmediatePriority,Bt=s.unstable_UserBlockingPriority,Gt=s.unstable_NormalPriority,ne=s.unstable_LowPriority,Ne=s.unstable_IdlePriority,dn=s.log,Vn=s.unstable_setDisableYieldValue,Tn=null,De=null;function ii(i){if(typeof dn=="function"&&Vn(i),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Tn,i)}catch{}}var je=Math.clz32?Math.clz32:ku,Pu=Math.log,Ea=Math.LN2;function ku(i){return i>>>=0,i===0?32:31-(Pu(i)/Ea|0)|0}var Pi=256,Rr=262144,Ge=4194304;function ki(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function zi(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,p=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var T=u&134217727;return T!==0?(u=T&~p,u!==0?d=ki(u):(_&=T,_!==0?d=ki(_):o||(o=T&~i,o!==0&&(d=ki(o))))):(T=u&~p,T!==0?d=ki(T):_!==0?d=ki(_):o||(o=u&~i,o!==0&&(d=ki(o)))),d===0?0:r!==0&&r!==d&&(r&p)===0&&(p=d&-d,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:d}function bi(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Mf(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(){var i=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),i}function Li(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function Mr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Nf(i,r,o,u,d,p){var _=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var T=i.entanglements,P=i.expirationTimes,H=i.hiddenUpdates;for(o=_&~o;0<o;){var tt=31-je(o),st=1<<tt;T[tt]=0,P[tt]=-1;var Q=H[tt];if(Q!==null)for(H[tt]=null,tt=0;tt<Q.length;tt++){var X=Q[tt];X!==null&&(X.lane&=-536870913)}o&=~st}u!==0&&Nr(i,u,0),p!==0&&d===0&&i.tag!==0&&(i.suspendedLanes|=p&~(_&~r))}function Nr(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-je(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Bo(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-je(o),d=1<<u;d&r|i[u]&r&&(i[u]|=r),o&=~d}}function Fo(i,r){var o=r&-r;return o=(o&42)!==0?1:Dr(o),(o&(i.suspendedLanes|r))!==0?0:o}function Dr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function cs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Lu(){var i=dt.p;return i!==0?i:(i=window.event,i===void 0?32:$v(i.type))}function _i(i,r){var o=dt.p;try{return dt.p=i,r()}finally{dt.p=o}}var wi=Math.random().toString(36).slice(2),Ke="__reactFiber$"+wi,ln="__reactProps$"+wi,ji="__reactContainer$"+wi,Sa="__reactEvents$"+wi,Df="__reactListeners$"+wi,ju="__reactHandles$"+wi,Uu="__reactResources$"+wi,Ui="__reactMarker$"+wi;function Ta(i){delete i[Ke],delete i[ln],delete i[Sa],delete i[Df],delete i[ju]}function Bi(i){var r=i[Ke];if(r)return r;for(var o=i.parentNode;o;){if(r=o[ji]||o[Ke]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=Iv(i);i!==null;){if(o=i[Ke])return o;i=Iv(i)}return r}i=o,o=i.parentNode}return null}function si(i){if(i=i[Ke]||i[ji]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Qn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function Fi(i){var r=i[Uu];return r||(r=i[Uu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function $e(i){i[Ui]=!0}var qo=new Set,Yo={};function qi(i,r){Yi(i,r),Yi(i+"Capture",r)}function Yi(i,r){for(Yo[i]=r,i=0;i<r.length;i++)qo.add(r[i])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},Go={};function Bu(i){return ee.call(Go,i)?!0:ee.call(Qo,i)?!1:Ho.test(i)?Go[i]=!0:(Qo[i]=!0,!1)}function xa(i,r,o){if(Bu(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Gn(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function Xe(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ps(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ko(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){o=""+_,p.call(this,_)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ge(i){if(!i._valueTracker){var r=Ps(i)?"checked":"value";i._valueTracker=Ko(i,r,""+i[r])}}function Or(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=Ps(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function Hi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ir=/[\n"\\]/g;function Pn(i){return i.replace(Ir,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Aa(i,r,o,u,d,p,_,T){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?$o(i,_,un(r)):o!=null?$o(i,_,un(o)):u!=null&&i.removeAttribute("value"),d==null&&p!=null&&(i.defaultChecked=!!p),d!=null&&(i.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+un(T):i.removeAttribute("name")}function Fu(i,r,o,u,d,p,_,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){ge(i);return}o=o!=null?""+un(o):"",r=r!=null?""+un(r):o,T||r===i.value||(i.value=r),i.defaultValue=r}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=T?i.checked:!!u,i.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),ge(i)}function $o(i,r,o){r==="number"&&Hi(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function ks(i,r,o,u){if(i=i.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<i.length;o++)d=r.hasOwnProperty("$"+i[o].value),i[o].selected!==d&&(i[o].selected=d),d&&u&&(i[o].defaultSelected=!0)}else{for(o=""+un(o),r=null,d=0;d<i.length;d++){if(i[d].value===o){i[d].selected=!0,u&&(i[d].defaultSelected=!0);return}r!==null||i[d].disabled||(r=i[d])}r!==null&&(r.selected=!0)}}function qu(i,r,o){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+un(o):""}function zs(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(n(92));if(Xt(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=un(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),ge(i)}function kn(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||Yu.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function Wo(i,r,o){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var d in r)u=r[d],r.hasOwnProperty(d)&&o[d]!==u&&Xo(i,d,u)}else for(var p in r)r.hasOwnProperty(p)&&Xo(i,p,r[p])}function Ca(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(i){return Ls.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ei(){}var Jo=null;function ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var js=null,Qi=null;function Vr(i){var r=si(i);if(r&&(i=r.stateNode)){var o=i[ln]||null;t:switch(i=r.stateNode,r.type){case"input":if(Aa(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var d=u[ln]||null;if(!d)throw Error(n(90));Aa(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&Or(u)}break t;case"textarea":qu(i,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&ks(i,!!o.multiple,r,!1)}}}var Ma=!1;function Us(i,r,o){if(Ma)return i(r,o);Ma=!0;try{var u=i(r);return u}finally{if(Ma=!1,(js!==null||Qi!==null)&&(Lc(),js&&(r=js,i=Qi,Qi=js=null,Vr(r),i)))for(r=0;r<i.length;r++)Vr(i[r])}}function Si(i,r){var o=i.stateNode;if(o===null)return null;var u=o[ln]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(ai)try{var be={};Object.defineProperty(be,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",be,be),window.removeEventListener("test",be,be)}catch{Pr=!1}var Gi=null,Zo=null,kr=null;function tl(){if(kr)return kr;var i,r=Zo,o=r.length,u,d="value"in Gi?Gi.value:Gi.textContent,p=d.length;for(i=0;i<o&&r[i]===d[i];i++);var _=o-i;for(u=1;u<=_&&r[o-u]===d[p-u];u++);return kr=d.slice(i,1<u?1-u:void 0)}function zr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function hs(){return!0}function Ti(){return!1}function mn(i){function r(o,u,d,p,_){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(o=i[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?hs:Ti,this.isPropagationStopped=Ti,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),r}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=mn(fs),Bs=b({},fs,{view:0,detail:0}),el=mn(Bs),Fs,Na,$i,Da=b({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$i&&($i&&i.type==="mousemove"?(Fs=i.screenX-$i.screenX,Na=i.screenY-$i.screenY):Na=Fs=0,$i=i),Fs)},movementY:function(i){return"movementY"in i?i.movementY:Na}}),nl=mn(Da),Lr=b({},Da,{dataTransfer:0}),Qu=mn(Lr),Gu=b({},Bs,{relatedTarget:0}),jr=mn(Gu),il=b({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ku=mn(il),Oa=b({},fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$u=mn(Oa),Xu=b({},fs,{data:0}),Xi=mn(Xu),Wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ju={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tc(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Zu[i])?!!r[i]:!1}function qs(){return tc}var Nn=b({},Bs,{key:function(i){if(i.key){var r=Wu[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=zr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ju[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(i){return i.type==="keypress"?zr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?zr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ec=mn(Nn),nc=b({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=mn(nc),h=b({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),v=mn(h),w=b({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=mn(w),q=b({},Da,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),K=mn(q),vt=b({},fs,{newState:0,oldState:0}),Ft=mn(vt),Ue=[9,13,27,32],ue=ai&&"CompositionEvent"in window,Oe=null;ai&&"documentMode"in document&&(Oe=document.documentMode);var oi=ai&&"TextEvent"in window&&!Oe,Wi=ai&&(!ue||Oe&&8<Oe&&11>=Oe),xi=" ",Ai=!1;function Ur(i,r){switch(i){case"keyup":return Ue.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ia(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Va=!1;function cT(i,r){switch(i){case"compositionend":return Ia(r);case"keypress":return r.which!==32?null:(Ai=!0,xi);case"textInput":return i=r.data,i===xi&&Ai?null:i;default:return null}}function hT(i,r){if(Va)return i==="compositionend"||!ue&&Ur(i,r)?(i=tl(),kr=Zo=Gi=null,Va=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wi&&r.locale!=="ko"?null:r.data;default:return null}}var fT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kp(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!fT[i.type]:r==="textarea"}function zp(i,r,o,u){js?Qi?Qi.push(u):Qi=[u]:js=u,r=Hc(r,"onChange"),0<r.length&&(o=new Ki("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var sl=null,rl=null;function dT(i){bv(i,0)}function ic(i){var r=Qn(i);if(Or(r))return i}function Lp(i,r){if(i==="change")return r}var jp=!1;if(ai){var Of;if(ai){var If="oninput"in document;if(!If){var Up=document.createElement("div");Up.setAttribute("oninput","return;"),If=typeof Up.oninput=="function"}Of=If}else Of=!1;jp=Of&&(!document.documentMode||9<document.documentMode)}function Bp(){sl&&(sl.detachEvent("onpropertychange",Fp),rl=sl=null)}function Fp(i){if(i.propertyName==="value"&&ic(rl)){var r=[];zp(r,rl,i,ri(i)),Us(dT,r)}}function mT(i,r,o){i==="focusin"?(Bp(),sl=r,rl=o,sl.attachEvent("onpropertychange",Fp)):i==="focusout"&&Bp()}function gT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ic(rl)}function pT(i,r){if(i==="click")return ic(r)}function yT(i,r){if(i==="input"||i==="change")return ic(r)}function vT(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Kn=typeof Object.is=="function"?Object.is:vT;function al(i,r){if(Kn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!ee.call(r,d)||!Kn(i[d],r[d]))return!1}return!0}function qp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Yp(i,r){var o=qp(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=qp(o)}}function Hp(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Hp(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Qp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Hi(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Hi(i.document)}return r}function Vf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var bT=ai&&"documentMode"in document&&11>=document.documentMode,Pa=null,Pf=null,ol=null,kf=!1;function Gp(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kf||Pa==null||Pa!==Hi(u)||(u=Pa,"selectionStart"in u&&Vf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ol&&al(ol,u)||(ol=u,u=Hc(Pf,"onSelect"),0<u.length&&(r=new Ki("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=Pa)))}function Br(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var ka={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionrun:Br("Transition","TransitionRun"),transitionstart:Br("Transition","TransitionStart"),transitioncancel:Br("Transition","TransitionCancel"),transitionend:Br("Transition","TransitionEnd")},zf={},Kp={};ai&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Fr(i){if(zf[i])return zf[i];if(!ka[i])return i;var r=ka[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in Kp)return zf[i]=r[o];return i}var $p=Fr("animationend"),Xp=Fr("animationiteration"),Wp=Fr("animationstart"),_T=Fr("transitionrun"),wT=Fr("transitionstart"),ET=Fr("transitioncancel"),Jp=Fr("transitionend"),Zp=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Ci(i,r){Zp.set(i,r),qi(r,[i])}var sc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},li=[],za=0,jf=0;function rc(){for(var i=za,r=jf=za=0;r<i;){var o=li[r];li[r++]=null;var u=li[r];li[r++]=null;var d=li[r];li[r++]=null;var p=li[r];if(li[r++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}p!==0&&ty(o,d,p)}}function ac(i,r,o,u){li[za++]=i,li[za++]=r,li[za++]=o,li[za++]=u,jf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Uf(i,r,o,u){return ac(i,r,o,u),oc(i)}function qr(i,r){return ac(i,null,null,r),oc(i)}function ty(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(d=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,d&&r!==null&&(d=31-je(o),i=p.hiddenUpdates,u=i[d],u===null?i[d]=[r]:u.push(r),r.lane=o|536870912),p):null}function oc(i){if(50<Ml)throw Ml=0,$d=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var La={};function ST(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(i,r,o,u){return new ST(i,r,o,u)}function Bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ms(i,r){var o=i.alternate;return o===null?(o=$n(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function ey(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function lc(i,r,o,u,d,p){var _=0;if(u=i,typeof i=="function")Bf(i)&&(_=1);else if(typeof i=="string")_=Rx(i,o,pt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case O:return i=$n(31,o,r,d),i.elementType=O,i.lanes=p,i;case R:return Yr(o.children,d,p,r);case D:_=8,d|=24;break;case B:return i=$n(12,o,r,d|2),i.elementType=B,i.lanes=p,i;case yt:return i=$n(13,o,r,d),i.elementType=yt,i.lanes=p,i;case xt:return i=$n(19,o,r,d),i.elementType=xt,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case rt:_=10;break t;case Z:_=9;break t;case gt:_=11;break t;case N:_=14;break t;case M:_=16,u=null;break t}_=29,o=Error(n(130,i===null?"null":typeof i,"")),u=null}return r=$n(_,o,r,d),r.elementType=i,r.type=u,r.lanes=p,r}function Yr(i,r,o,u){return i=$n(7,i,u,r),i.lanes=o,i}function Ff(i,r,o){return i=$n(6,i,null,r),i.lanes=o,i}function ny(i){var r=$n(18,null,null,0);return r.stateNode=i,r}function qf(i,r,o){return r=$n(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var iy=new WeakMap;function ui(i,r){if(typeof i=="object"&&i!==null){var o=iy.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Ve(r)},iy.set(i,r),r)}return{value:i,source:r,stack:Ve(r)}}var ja=[],Ua=0,uc=null,ll=0,ci=[],hi=0,Ys=null,Ji=1,Zi="";function gs(i,r){ja[Ua++]=ll,ja[Ua++]=uc,uc=i,ll=r}function sy(i,r,o){ci[hi++]=Ji,ci[hi++]=Zi,ci[hi++]=Ys,Ys=i;var u=Ji;i=Zi;var d=32-je(u)-1;u&=~(1<<d),o+=1;var p=32-je(r)+d;if(30<p){var _=d-d%5;p=(u&(1<<_)-1).toString(32),u>>=_,d-=_,Ji=1<<32-je(r)+d|o<<d|u,Zi=p+i}else Ji=1<<p|o<<d|u,Zi=i}function Yf(i){i.return!==null&&(gs(i,1),sy(i,1,0))}function Hf(i){for(;i===uc;)uc=ja[--Ua],ja[Ua]=null,ll=ja[--Ua],ja[Ua]=null;for(;i===Ys;)Ys=ci[--hi],ci[hi]=null,Zi=ci[--hi],ci[hi]=null,Ji=ci[--hi],ci[hi]=null}function ry(i,r){ci[hi++]=Ji,ci[hi++]=Zi,ci[hi++]=Ys,Ji=r.id,Zi=r.overflow,Ys=i}var gn=null,xe=null,ie=!1,Hs=null,fi=!1,Qf=Error(n(519));function Qs(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ul(ui(r,i)),Qf}function ay(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Ke]=i,r[ln]=u,o){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(o=0;o<Dl.length;o++)$t(Dl[o],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":$t("invalid",r),Fu(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":$t("invalid",r);break;case"textarea":$t("invalid",r),zs(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||Sv(r.textContent,o)?(u.popover!=null&&($t("beforetoggle",r),$t("toggle",r)),u.onScroll!=null&&$t("scroll",r),u.onScrollEnd!=null&&$t("scrollend",r),u.onClick!=null&&(r.onclick=Ei),r=!0):r=!1,r||Qs(i,!0)}function oy(i){for(gn=i.return;gn;)switch(gn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:gn=gn.return}}function Ba(i){if(i!==gn)return!1;if(!ie)return oy(i),ie=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||cm(i.type,i.memoizedProps)),o=!o),o&&xe&&Qs(i),oy(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=Ov(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xe=Ov(i)}else r===27?(r=xe,ar(i.type)?(i=gm,gm=null,xe=i):xe=r):xe=gn?mi(i.stateNode.nextSibling):null;return!0}function Hr(){xe=gn=null,ie=!1}function Gf(){var i=Hs;return i!==null&&(Un===null?Un=i:Un.push.apply(Un,i),Hs=null),i}function ul(i){Hs===null?Hs=[i]:Hs.push(i)}var Kf=V(null),Qr=null,ps=null;function Gs(i,r,o){mt(Kf,r._currentValue),r._currentValue=o}function ys(i){i._currentValue=Kf.current,J(Kf)}function $f(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function Xf(i,r,o,u){var d=i.child;for(d!==null&&(d.return=i);d!==null;){var p=d.dependencies;if(p!==null){var _=d.child;p=p.firstContext;t:for(;p!==null;){var T=p;p=d;for(var P=0;P<r.length;P++)if(T.context===r[P]){p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),$f(p.return,o,i),u||(_=null);break t}p=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(n(341));_.lanes|=o,p=_.alternate,p!==null&&(p.lanes|=o),$f(_,o,i),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===i){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Fa(i,r,o,u){i=null;for(var d=r,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var T=d.type;Kn(d.pendingProps.value,_.value)||(i!==null?i.push(T):i=[T])}}else if(d===Tt.current){if(_=d.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(i!==null?i.push(kl):i=[kl])}d=d.return}i!==null&&Xf(r,i,o,u),r.flags|=262144}function cc(i){for(i=i.firstContext;i!==null;){if(!Kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Gr(i){Qr=i,ps=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return ly(Qr,i)}function hc(i,r){return Qr===null&&Gr(i),ly(i,r)}function ly(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ps===null){if(i===null)throw Error(n(308));ps=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ps=ps.next=r;return o}var TT=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},xT=s.unstable_scheduleCallback,AT=s.unstable_NormalPriority,We={$$typeof:rt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new TT,data:new Map,refCount:0}}function cl(i){i.refCount--,i.refCount===0&&xT(AT,function(){i.controller.abort()})}var hl=null,Jf=0,qa=0,Ya=null;function CT(i,r){if(hl===null){var o=hl=[];Jf=0,qa=em(),Ya={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Jf++,r.then(uy,uy),r}function uy(){if(--Jf===0&&hl!==null){Ya!==null&&(Ya.status="fulfilled");var i=hl;hl=null,qa=0,Ya=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function RT(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var cy=G.S;G.S=function(i,r){G0=ft(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&CT(i,r),cy!==null&&cy(i,r)};var Kr=V(null);function Zf(){var i=Kr.current;return i!==null?i:Se.pooledCache}function fc(i,r){r===null?mt(Kr,Kr.current):mt(Kr,r.pool)}function hy(){var i=Zf();return i===null?null:{parent:We._currentValue,pool:i}}var Ha=Error(n(460)),td=Error(n(474)),dc=Error(n(542)),mc={then:function(){}};function fy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dy(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(Ei,Ei),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,gy(i),i;default:if(typeof r.status=="string")r.then(Ei,Ei);else{if(i=Se,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=u}},function(u){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,gy(i),i}throw Xr=r,Ha}}function $r(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xr=o,Ha):o}}var Xr=null;function my(){if(Xr===null)throw Error(n(459));var i=Xr;return Xr=null,i}function gy(i){if(i===Ha||i===dc)throw Error(n(483))}var Qa=null,fl=0;function gc(i){var r=fl;return fl+=1,Qa===null&&(Qa=[]),dy(Qa,i,r)}function dl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function pc(i,r){throw r.$$typeof===E?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function py(i){function r(F,j){if(i){var Y=F.deletions;Y===null?(F.deletions=[j],F.flags|=16):Y.push(j)}}function o(F,j){if(!i)return null;for(;j!==null;)r(F,j),j=j.sibling;return null}function u(F){for(var j=new Map;F!==null;)F.key!==null?j.set(F.key,F):j.set(F.index,F),F=F.sibling;return j}function d(F,j){return F=ms(F,j),F.index=0,F.sibling=null,F}function p(F,j,Y){return F.index=Y,i?(Y=F.alternate,Y!==null?(Y=Y.index,Y<j?(F.flags|=67108866,j):Y):(F.flags|=67108866,j)):(F.flags|=1048576,j)}function _(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function T(F,j,Y,et){return j===null||j.tag!==6?(j=Ff(Y,F.mode,et),j.return=F,j):(j=d(j,Y),j.return=F,j)}function P(F,j,Y,et){var Ot=Y.type;return Ot===R?tt(F,j,Y.props.children,et,Y.key):j!==null&&(j.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===M&&$r(Ot)===j.type)?(j=d(j,Y.props),dl(j,Y),j.return=F,j):(j=lc(Y.type,Y.key,Y.props,null,F.mode,et),dl(j,Y),j.return=F,j)}function H(F,j,Y,et){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=qf(Y,F.mode,et),j.return=F,j):(j=d(j,Y.children||[]),j.return=F,j)}function tt(F,j,Y,et,Ot){return j===null||j.tag!==7?(j=Yr(Y,F.mode,et,Ot),j.return=F,j):(j=d(j,Y),j.return=F,j)}function st(F,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ff(""+j,F.mode,Y),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return Y=lc(j.type,j.key,j.props,null,F.mode,Y),dl(Y,j),Y.return=F,Y;case x:return j=qf(j,F.mode,Y),j.return=F,j;case M:return j=$r(j),st(F,j,Y)}if(Xt(j)||U(j))return j=Yr(j,F.mode,Y,null),j.return=F,j;if(typeof j.then=="function")return st(F,gc(j),Y);if(j.$$typeof===rt)return st(F,hc(F,j),Y);pc(F,j)}return null}function Q(F,j,Y,et){var Ot=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ot!==null?null:T(F,j,""+Y,et);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return Y.key===Ot?P(F,j,Y,et):null;case x:return Y.key===Ot?H(F,j,Y,et):null;case M:return Y=$r(Y),Q(F,j,Y,et)}if(Xt(Y)||U(Y))return Ot!==null?null:tt(F,j,Y,et,null);if(typeof Y.then=="function")return Q(F,j,gc(Y),et);if(Y.$$typeof===rt)return Q(F,j,hc(F,Y),et);pc(F,Y)}return null}function X(F,j,Y,et,Ot){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return F=F.get(Y)||null,T(j,F,""+et,Ot);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case A:return F=F.get(et.key===null?Y:et.key)||null,P(j,F,et,Ot);case x:return F=F.get(et.key===null?Y:et.key)||null,H(j,F,et,Ot);case M:return et=$r(et),X(F,j,Y,et,Ot)}if(Xt(et)||U(et))return F=F.get(Y)||null,tt(j,F,et,Ot,null);if(typeof et.then=="function")return X(F,j,Y,gc(et),Ot);if(et.$$typeof===rt)return X(F,j,Y,hc(j,et),Ot);pc(j,et)}return null}function Mt(F,j,Y,et){for(var Ot=null,oe=null,Nt=j,Qt=j=0,Jt=null;Nt!==null&&Qt<Y.length;Qt++){Nt.index>Qt?(Jt=Nt,Nt=null):Jt=Nt.sibling;var le=Q(F,Nt,Y[Qt],et);if(le===null){Nt===null&&(Nt=Jt);break}i&&Nt&&le.alternate===null&&r(F,Nt),j=p(le,j,Qt),oe===null?Ot=le:oe.sibling=le,oe=le,Nt=Jt}if(Qt===Y.length)return o(F,Nt),ie&&gs(F,Qt),Ot;if(Nt===null){for(;Qt<Y.length;Qt++)Nt=st(F,Y[Qt],et),Nt!==null&&(j=p(Nt,j,Qt),oe===null?Ot=Nt:oe.sibling=Nt,oe=Nt);return ie&&gs(F,Qt),Ot}for(Nt=u(Nt);Qt<Y.length;Qt++)Jt=X(Nt,F,Qt,Y[Qt],et),Jt!==null&&(i&&Jt.alternate!==null&&Nt.delete(Jt.key===null?Qt:Jt.key),j=p(Jt,j,Qt),oe===null?Ot=Jt:oe.sibling=Jt,oe=Jt);return i&&Nt.forEach(function(hr){return r(F,hr)}),ie&&gs(F,Qt),Ot}function Vt(F,j,Y,et){if(Y==null)throw Error(n(151));for(var Ot=null,oe=null,Nt=j,Qt=j=0,Jt=null,le=Y.next();Nt!==null&&!le.done;Qt++,le=Y.next()){Nt.index>Qt?(Jt=Nt,Nt=null):Jt=Nt.sibling;var hr=Q(F,Nt,le.value,et);if(hr===null){Nt===null&&(Nt=Jt);break}i&&Nt&&hr.alternate===null&&r(F,Nt),j=p(hr,j,Qt),oe===null?Ot=hr:oe.sibling=hr,oe=hr,Nt=Jt}if(le.done)return o(F,Nt),ie&&gs(F,Qt),Ot;if(Nt===null){for(;!le.done;Qt++,le=Y.next())le=st(F,le.value,et),le!==null&&(j=p(le,j,Qt),oe===null?Ot=le:oe.sibling=le,oe=le);return ie&&gs(F,Qt),Ot}for(Nt=u(Nt);!le.done;Qt++,le=Y.next())le=X(Nt,F,Qt,le.value,et),le!==null&&(i&&le.alternate!==null&&Nt.delete(le.key===null?Qt:le.key),j=p(le,j,Qt),oe===null?Ot=le:oe.sibling=le,oe=le);return i&&Nt.forEach(function(jx){return r(F,jx)}),ie&&gs(F,Qt),Ot}function Ee(F,j,Y,et){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:t:{for(var Ot=Y.key;j!==null;){if(j.key===Ot){if(Ot=Y.type,Ot===R){if(j.tag===7){o(F,j.sibling),et=d(j,Y.props.children),et.return=F,F=et;break t}}else if(j.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===M&&$r(Ot)===j.type){o(F,j.sibling),et=d(j,Y.props),dl(et,Y),et.return=F,F=et;break t}o(F,j);break}else r(F,j);j=j.sibling}Y.type===R?(et=Yr(Y.props.children,F.mode,et,Y.key),et.return=F,F=et):(et=lc(Y.type,Y.key,Y.props,null,F.mode,et),dl(et,Y),et.return=F,F=et)}return _(F);case x:t:{for(Ot=Y.key;j!==null;){if(j.key===Ot)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){o(F,j.sibling),et=d(j,Y.children||[]),et.return=F,F=et;break t}else{o(F,j);break}else r(F,j);j=j.sibling}et=qf(Y,F.mode,et),et.return=F,F=et}return _(F);case M:return Y=$r(Y),Ee(F,j,Y,et)}if(Xt(Y))return Mt(F,j,Y,et);if(U(Y)){if(Ot=U(Y),typeof Ot!="function")throw Error(n(150));return Y=Ot.call(Y),Vt(F,j,Y,et)}if(typeof Y.then=="function")return Ee(F,j,gc(Y),et);if(Y.$$typeof===rt)return Ee(F,j,hc(F,Y),et);pc(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(o(F,j.sibling),et=d(j,Y),et.return=F,F=et):(o(F,j),et=Ff(Y,F.mode,et),et.return=F,F=et),_(F)):o(F,j)}return function(F,j,Y,et){try{fl=0;var Ot=Ee(F,j,Y,et);return Qa=null,Ot}catch(Nt){if(Nt===Ha||Nt===dc)throw Nt;var oe=$n(29,Nt,null,F.mode);return oe.lanes=et,oe.return=F,oe}finally{}}}var Wr=py(!0),yy=py(!1),Ks=!1;function ed(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function $s(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xs(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ce&2)!==0){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,r=oc(i),ty(i,null,o),r}return ac(i,u,r,o),oc(i)}function ml(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Bo(i,o)}}function id(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?d=p=r:p=p.next=r}else d=p=r;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var sd=!1;function gl(){if(sd){var i=Ya;if(i!==null)throw i}}function pl(i,r,o,u){sd=!1;var d=i.updateQueue;Ks=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var P=T,H=P.next;P.next=null,_===null?p=H:_.next=H,_=P;var tt=i.alternate;tt!==null&&(tt=tt.updateQueue,T=tt.lastBaseUpdate,T!==_&&(T===null?tt.firstBaseUpdate=H:T.next=H,tt.lastBaseUpdate=P))}if(p!==null){var st=d.baseState;_=0,tt=H=P=null,T=p;do{var Q=T.lane&-536870913,X=Q!==T.lane;if(X?(Wt&Q)===Q:(u&Q)===Q){Q!==0&&Q===qa&&(sd=!0),tt!==null&&(tt=tt.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Mt=i,Vt=T;Q=r;var Ee=o;switch(Vt.tag){case 1:if(Mt=Vt.payload,typeof Mt=="function"){st=Mt.call(Ee,st,Q);break t}st=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Vt.payload,Q=typeof Mt=="function"?Mt.call(Ee,st,Q):Mt,Q==null)break t;st=b({},st,Q);break t;case 2:Ks=!0}}Q=T.callback,Q!==null&&(i.flags|=64,X&&(i.flags|=8192),X=d.callbacks,X===null?d.callbacks=[Q]:X.push(Q))}else X={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},tt===null?(H=tt=X,P=st):tt=tt.next=X,_|=Q;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;X=T,T=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);tt===null&&(P=st),d.baseState=P,d.firstBaseUpdate=H,d.lastBaseUpdate=tt,p===null&&(d.shared.lanes=0),er|=_,i.lanes=_,i.memoizedState=st}}function vy(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function by(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)vy(o[i],r)}var Ga=V(null),yc=V(0);function _y(i,r){i=As,mt(yc,i),mt(Ga,r),As=i|r.baseLanes}function rd(){mt(yc,As),mt(Ga,Ga.current)}function ad(){As=yc.current,J(Ga),J(yc)}var Xn=V(null),di=null;function Ws(i){var r=i.alternate;mt(Be,Be.current&1),mt(Xn,i),di===null&&(r===null||Ga.current!==null||r.memoizedState!==null)&&(di=i)}function od(i){mt(Be,Be.current),mt(Xn,i),di===null&&(di=i)}function wy(i){i.tag===22?(mt(Be,Be.current),mt(Xn,i),di===null&&(di=i)):Js()}function Js(){mt(Be,Be.current),mt(Xn,Xn.current)}function Wn(i){J(Xn),di===i&&(di=null),J(Be)}var Be=V(0);function vc(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||dm(o)||mm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vs=0,qt=null,_e=null,Je=null,bc=!1,Ka=!1,Jr=!1,_c=0,yl=0,$a=null,MT=0;function ze(){throw Error(n(321))}function ld(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!Kn(i[o],r[o]))return!1;return!0}function ud(i,r,o,u,d,p){return vs=p,qt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=i===null||i.memoizedState===null?s0:Td,Jr=!1,p=o(u,d),Jr=!1,Ka&&(p=Sy(r,o,u,d)),Ey(i),p}function Ey(i){G.H=_l;var r=_e!==null&&_e.next!==null;if(vs=0,Je=_e=qt=null,bc=!1,yl=0,$a=null,r)throw Error(n(300));i===null||Ze||(i=i.dependencies,i!==null&&cc(i)&&(Ze=!0))}function Sy(i,r,o,u){qt=i;var d=0;do{if(Ka&&($a=null),yl=0,Ka=!1,25<=d)throw Error(n(301));if(d+=1,Je=_e=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}G.H=r0,p=r(o,u)}while(Ka);return p}function NT(){var i=G.H,r=i.useState()[0];return r=typeof r.then=="function"?vl(r):r,i=i.useState()[0],(_e!==null?_e.memoizedState:null)!==i&&(qt.flags|=1024),r}function cd(){var i=_c!==0;return _c=0,i}function hd(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function fd(i){if(bc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}bc=!1}vs=0,Je=_e=qt=null,Ka=!1,yl=_c=0,$a=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?qt.memoizedState=Je=i:Je=Je.next=i,Je}function Fe(){if(_e===null){var i=qt.alternate;i=i!==null?i.memoizedState:null}else i=_e.next;var r=Je===null?qt.memoizedState:Je.next;if(r!==null)Je=r,_e=i;else{if(i===null)throw qt.alternate===null?Error(n(467)):Error(n(310));_e=i,i={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Je===null?qt.memoizedState=Je=i:Je=Je.next=i}return Je}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(i){var r=yl;return yl+=1,$a===null&&($a=[]),i=dy($a,i,r),r=qt,(Je===null?r.memoizedState:Je.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?s0:Td),i}function Ec(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return vl(i);if(i.$$typeof===rt)return pn(i)}throw Error(n(438,String(i)))}function dd(i){var r=null,o=qt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=qt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=wc(),qt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=L;return r.index++,o}function bs(i,r){return typeof r=="function"?r(i):r}function Sc(i){var r=Fe();return md(r,_e,i)}function md(i,r,o){var u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=o;var d=i.baseQueue,p=u.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}r.baseQueue=d=p,u.pending=null}if(p=i.baseState,d===null)i.memoizedState=p;else{r=d.next;var T=_=null,P=null,H=r,tt=!1;do{var st=H.lane&-536870913;if(st!==H.lane?(Wt&st)===st:(vs&st)===st){var Q=H.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),st===qa&&(tt=!0);else if((vs&Q)===Q){H=H.next,Q===qa&&(tt=!0);continue}else st={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(T=P=st,_=p):P=P.next=st,qt.lanes|=Q,er|=Q;st=H.action,Jr&&o(p,st),p=H.hasEagerState?H.eagerState:o(p,st)}else Q={lane:st,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(T=P=Q,_=p):P=P.next=Q,qt.lanes|=st,er|=st;H=H.next}while(H!==null&&H!==r);if(P===null?_=p:P.next=T,!Kn(p,i.memoizedState)&&(Ze=!0,tt&&(o=Ya,o!==null)))throw o;i.memoizedState=p,i.baseState=_,i.baseQueue=P,u.lastRenderedState=p}return d===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function gd(i){var r=Fe(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=i;var u=o.dispatch,d=o.pending,p=r.memoizedState;if(d!==null){o.pending=null;var _=d=d.next;do p=i(p,_.action),_=_.next;while(_!==d);Kn(p,r.memoizedState)||(Ze=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Ty(i,r,o){var u=qt,d=Fe(),p=ie;if(p){if(o===void 0)throw Error(n(407));o=o()}else o=r();var _=!Kn((_e||d).memoizedState,o);if(_&&(d.memoizedState=o,Ze=!0),d=d.queue,vd(Cy.bind(null,u,d,i),[i]),d.getSnapshot!==r||_||Je!==null&&Je.memoizedState.tag&1){if(u.flags|=2048,Xa(9,{destroy:void 0},Ay.bind(null,u,d,o,r),null),Se===null)throw Error(n(349));p||(vs&127)!==0||xy(u,r,o)}return o}function xy(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=qt.updateQueue,r===null?(r=wc(),qt.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function Ay(i,r,o,u){r.value=o,r.getSnapshot=u,Ry(r)&&My(i)}function Cy(i,r,o){return o(function(){Ry(r)&&My(i)})}function Ry(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!Kn(i,o)}catch{return!0}}function My(i){var r=qr(i,2);r!==null&&Bn(r,i,2)}function pd(i){var r=Dn();if(typeof i=="function"){var o=i;if(i=o(),Jr){ii(!0);try{o()}finally{ii(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:i},r}function Ny(i,r,o,u){return i.baseState=o,md(i,_e,typeof u=="function"?u:bs)}function DT(i,r,o,u,d){if(Ac(i))throw Error(n(485));if(i=r.action,i!==null){var p={payload:d,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};G.T!==null?o(!0):p.isTransition=!1,u(p),o=r.pending,o===null?(p.next=r.pending=p,Dy(r,p)):(p.next=o.next,r.pending=o.next=p)}}function Dy(i,r){var o=r.action,u=r.payload,d=i.state;if(r.isTransition){var p=G.T,_={};G.T=_;try{var T=o(d,u),P=G.S;P!==null&&P(_,T),Oy(i,r,T)}catch(H){yd(i,r,H)}finally{p!==null&&_.types!==null&&(p.types=_.types),G.T=p}}else try{p=o(d,u),Oy(i,r,p)}catch(H){yd(i,r,H)}}function Oy(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Iy(i,r,u)},function(u){return yd(i,r,u)}):Iy(i,r,o)}function Iy(i,r,o){r.status="fulfilled",r.value=o,Vy(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,Dy(i,o)))}function yd(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Vy(r),r=r.next;while(r!==u)}i.action=null}function Vy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Py(i,r){return r}function ky(i,r){if(ie){var o=Se.formState;if(o!==null){t:{var u=qt;if(ie){if(xe){e:{for(var d=xe,p=fi;d.nodeType!==8;){if(!p){d=null;break e}if(d=mi(d.nextSibling),d===null){d=null;break e}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){xe=mi(d.nextSibling),u=d.data==="F!";break t}}Qs(u)}u=!1}u&&(r=o[0])}}return o=Dn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Py,lastRenderedState:r},o.queue=u,o=e0.bind(null,qt,u),u.dispatch=o,u=pd(!1),p=Sd.bind(null,qt,!1,u.queue),u=Dn(),d={state:r,dispatch:null,action:i,pending:null},u.queue=d,o=DT.bind(null,qt,d,p,o),d.dispatch=o,u.memoizedState=i,[r,o,!1]}function zy(i){var r=Fe();return Ly(r,_e,i)}function Ly(i,r,o){if(r=md(i,r,Py)[0],i=Sc(bs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=vl(r)}catch(_){throw _===Ha?dc:_}else u=r;r=Fe();var d=r.queue,p=d.dispatch;return o!==r.memoizedState&&(qt.flags|=2048,Xa(9,{destroy:void 0},OT.bind(null,d,o),null)),[u,p,i]}function OT(i,r){i.action=r}function jy(i){var r=Fe(),o=_e;if(o!==null)return Ly(r,o,i);Fe(),r=r.memoizedState,o=Fe();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function Xa(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=qt.updateQueue,r===null&&(r=wc(),qt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function Uy(){return Fe().memoizedState}function Tc(i,r,o,u){var d=Dn();qt.flags|=i,d.memoizedState=Xa(1|r,{destroy:void 0},o,u===void 0?null:u)}function xc(i,r,o,u){var d=Fe();u=u===void 0?null:u;var p=d.memoizedState.inst;_e!==null&&u!==null&&ld(u,_e.memoizedState.deps)?d.memoizedState=Xa(r,p,o,u):(qt.flags|=i,d.memoizedState=Xa(1|r,p,o,u))}function By(i,r){Tc(8390656,8,i,r)}function vd(i,r){xc(2048,8,i,r)}function IT(i){qt.flags|=4;var r=qt.updateQueue;if(r===null)r=wc(),qt.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function Fy(i){var r=Fe().memoizedState;return IT({ref:r,nextImpl:i}),function(){if((ce&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function qy(i,r){return xc(4,2,i,r)}function Yy(i,r){return xc(4,4,i,r)}function Hy(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Qy(i,r,o){o=o!=null?o.concat([i]):null,xc(4,4,Hy.bind(null,r,i),o)}function bd(){}function Gy(i,r){var o=Fe();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&ld(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function Ky(i,r){var o=Fe();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&ld(r,u[1]))return u[0];if(u=i(),Jr){ii(!0);try{i()}finally{ii(!1)}}return o.memoizedState=[u,r],u}function _d(i,r,o){return o===void 0||(vs&1073741824)!==0&&(Wt&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=$0(),qt.lanes|=i,er|=i,o)}function $y(i,r,o,u){return Kn(o,r)?o:Ga.current!==null?(i=_d(i,o,u),Kn(i,r)||(Ze=!0),i):(vs&42)===0||(vs&1073741824)!==0&&(Wt&261930)===0?(Ze=!0,i.memoizedState=o):(i=$0(),qt.lanes|=i,er|=i,r)}function Xy(i,r,o,u,d){var p=dt.p;dt.p=p!==0&&8>p?p:8;var _=G.T,T={};G.T=T,Sd(i,!1,r,o);try{var P=d(),H=G.S;if(H!==null&&H(T,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var tt=RT(P,u);bl(i,r,tt,ti(i))}else bl(i,r,u,ti(i))}catch(st){bl(i,r,{then:function(){},status:"rejected",reason:st},ti())}finally{dt.p=p,_!==null&&T.types!==null&&(_.types=T.types),G.T=_}}function VT(){}function wd(i,r,o,u){if(i.tag!==5)throw Error(n(476));var d=Wy(i).queue;Xy(i,d,r,bt,o===null?VT:function(){return Jy(i),o(u)})}function Wy(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:bt,baseState:bt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:bt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Jy(i){var r=Wy(i);r.next===null&&(r=i.alternate.memoizedState),bl(i,r.next.queue,{},ti())}function Ed(){return pn(kl)}function Zy(){return Fe().memoizedState}function t0(){return Fe().memoizedState}function PT(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=ti();i=$s(o);var u=Xs(r,i,o);u!==null&&(Bn(u,r,o),ml(u,r,o)),r={cache:Wf()},i.payload=r;return}r=r.return}}function kT(i,r,o){var u=ti();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ac(i)?n0(r,o):(o=Uf(i,r,o,u),o!==null&&(Bn(o,i,u),i0(o,r,u)))}function e0(i,r,o){var u=ti();bl(i,r,o,u)}function bl(i,r,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ac(i))n0(r,d);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(d.hasEagerState=!0,d.eagerState=T,Kn(T,_))return ac(i,r,d,0),Se===null&&rc(),!1}catch{}finally{}if(o=Uf(i,r,d,u),o!==null)return Bn(o,i,u),i0(o,r,u),!0}return!1}function Sd(i,r,o,u){if(u={lane:2,revertLane:em(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ac(i)){if(r)throw Error(n(479))}else r=Uf(i,o,u,2),r!==null&&Bn(r,i,2)}function Ac(i){var r=i.alternate;return i===qt||r!==null&&r===qt}function n0(i,r){Ka=bc=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function i0(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Bo(i,o)}}var _l={readContext:pn,use:Ec,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};_l.useEffectEvent=ze;var s0={readContext:pn,use:Ec,useCallback:function(i,r){return Dn().memoizedState=[i,r===void 0?null:r],i},useContext:pn,useEffect:By,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,Tc(4194308,4,Hy.bind(null,r,i),o)},useLayoutEffect:function(i,r){return Tc(4194308,4,i,r)},useInsertionEffect:function(i,r){Tc(4,2,i,r)},useMemo:function(i,r){var o=Dn();r=r===void 0?null:r;var u=i();if(Jr){ii(!0);try{i()}finally{ii(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=Dn();if(o!==void 0){var d=o(r);if(Jr){ii(!0);try{o(r)}finally{ii(!1)}}}else d=r;return u.memoizedState=u.baseState=d,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:d},u.queue=i,i=i.dispatch=kT.bind(null,qt,i),[u.memoizedState,i]},useRef:function(i){var r=Dn();return i={current:i},r.memoizedState=i},useState:function(i){i=pd(i);var r=i.queue,o=e0.bind(null,qt,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:bd,useDeferredValue:function(i,r){var o=Dn();return _d(o,i,r)},useTransition:function(){var i=pd(!1);return i=Xy.bind(null,qt,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=qt,d=Dn();if(ie){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Se===null)throw Error(n(349));(Wt&127)!==0||xy(u,r,o)}d.memoizedState=o;var p={value:o,getSnapshot:r};return d.queue=p,By(Cy.bind(null,u,p,i),[i]),u.flags|=2048,Xa(9,{destroy:void 0},Ay.bind(null,u,p,o,r),null),o},useId:function(){var i=Dn(),r=Se.identifierPrefix;if(ie){var o=Zi,u=Ji;o=(u&~(1<<32-je(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=_c++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=MT++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Ed,useFormState:ky,useActionState:ky,useOptimistic:function(i){var r=Dn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Sd.bind(null,qt,!0,o),o.dispatch=r,[i,r]},useMemoCache:dd,useCacheRefresh:function(){return Dn().memoizedState=PT.bind(null,qt)},useEffectEvent:function(i){var r=Dn(),o={impl:i};return r.memoizedState=o,function(){if((ce&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}},Td={readContext:pn,use:Ec,useCallback:Gy,useContext:pn,useEffect:vd,useImperativeHandle:Qy,useInsertionEffect:qy,useLayoutEffect:Yy,useMemo:Ky,useReducer:Sc,useRef:Uy,useState:function(){return Sc(bs)},useDebugValue:bd,useDeferredValue:function(i,r){var o=Fe();return $y(o,_e.memoizedState,i,r)},useTransition:function(){var i=Sc(bs)[0],r=Fe().memoizedState;return[typeof i=="boolean"?i:vl(i),r]},useSyncExternalStore:Ty,useId:Zy,useHostTransitionStatus:Ed,useFormState:zy,useActionState:zy,useOptimistic:function(i,r){var o=Fe();return Ny(o,_e,i,r)},useMemoCache:dd,useCacheRefresh:t0};Td.useEffectEvent=Fy;var r0={readContext:pn,use:Ec,useCallback:Gy,useContext:pn,useEffect:vd,useImperativeHandle:Qy,useInsertionEffect:qy,useLayoutEffect:Yy,useMemo:Ky,useReducer:gd,useRef:Uy,useState:function(){return gd(bs)},useDebugValue:bd,useDeferredValue:function(i,r){var o=Fe();return _e===null?_d(o,i,r):$y(o,_e.memoizedState,i,r)},useTransition:function(){var i=gd(bs)[0],r=Fe().memoizedState;return[typeof i=="boolean"?i:vl(i),r]},useSyncExternalStore:Ty,useId:Zy,useHostTransitionStatus:Ed,useFormState:jy,useActionState:jy,useOptimistic:function(i,r){var o=Fe();return _e!==null?Ny(o,_e,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:dd,useCacheRefresh:t0};r0.useEffectEvent=Fy;function xd(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:b({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Ad={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=ti(),d=$s(u);d.payload=r,o!=null&&(d.callback=o),r=Xs(i,d,u),r!==null&&(Bn(r,i,u),ml(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=ti(),d=$s(u);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Xs(i,d,u),r!==null&&(Bn(r,i,u),ml(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=ti(),u=$s(o);u.tag=2,r!=null&&(u.callback=r),r=Xs(i,u,o),r!==null&&(Bn(r,i,o),ml(r,i,o))}};function a0(i,r,o,u,d,p,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!al(o,u)||!al(d,p):!0}function o0(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Ad.enqueueReplaceState(r,r.state,null)}function Zr(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=b({},o));for(var d in i)o[d]===void 0&&(o[d]=i[d])}return o}function l0(i){sc(i)}function u0(i){console.error(i)}function c0(i){sc(i)}function Cc(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function h0(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Cd(i,r,o){return o=$s(o),o.tag=3,o.payload={element:null},o.callback=function(){Cc(i,r)},o}function f0(i){return i=$s(i),i.tag=3,i}function d0(i,r,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;i.payload=function(){return d(p)},i.callback=function(){h0(r,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){h0(r,o,u),typeof d!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function zT(i,r,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Fa(r,o,d,!0),o=Xn.current,o!==null){switch(o.tag){case 31:case 13:return di===null?jc():o.alternate===null&&Le===0&&(Le=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===mc?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),Jd(i,u,d)),!1;case 22:return o.flags|=65536,u===mc?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),Jd(i,u,d)),!1}throw Error(n(435,o.tag))}return Jd(i,u,d),jc(),!1}if(ie)return r=Xn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,u!==Qf&&(i=Error(n(422),{cause:u}),ul(ui(i,o)))):(u!==Qf&&(r=Error(n(423),{cause:u}),ul(ui(r,o))),i=i.current.alternate,i.flags|=65536,d&=-d,i.lanes|=d,u=ui(u,o),d=Cd(i.stateNode,u,d),id(i,d),Le!==4&&(Le=2)),!1;var p=Error(n(520),{cause:u});if(p=ui(p,o),Rl===null?Rl=[p]:Rl.push(p),Le!==4&&(Le=2),r===null)return!0;u=ui(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=d&-d,o.lanes|=i,i=Cd(o.stateNode,u,i),id(o,i),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(nr===null||!nr.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=f0(d),d0(d,i,o,u),id(o,d),!1}o=o.return}while(o!==null);return!1}var Rd=Error(n(461)),Ze=!1;function yn(i,r,o,u){r.child=i===null?yy(r,null,o,u):Wr(r,i.child,o,u)}function m0(i,r,o,u,d){o=o.render;var p=r.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return Gr(r),u=ud(i,r,o,_,p,d),T=cd(),i!==null&&!Ze?(hd(i,r,d),_s(i,r,d)):(ie&&T&&Yf(r),r.flags|=1,yn(i,r,u,d),r.child)}function g0(i,r,o,u,d){if(i===null){var p=o.type;return typeof p=="function"&&!Bf(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,p0(i,r,p,u,d)):(i=lc(o.type,null,u,r,r.mode,d),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!kd(i,d)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:al,o(_,u)&&i.ref===r.ref)return _s(i,r,d)}return r.flags|=1,i=ms(p,u),i.ref=r.ref,i.return=r,r.child=i}function p0(i,r,o,u,d){if(i!==null){var p=i.memoizedProps;if(al(p,u)&&i.ref===r.ref)if(Ze=!1,r.pendingProps=u=p,kd(i,d))(i.flags&131072)!==0&&(Ze=!0);else return r.lanes=i.lanes,_s(i,r,d)}return Md(i,r,o,u,d)}function y0(i,r,o,u){var d=u.children,p=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=r.child=i.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,r.child=null;return v0(i,r,p,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&fc(r,p!==null?p.cachePool:null),p!==null?_y(r,p):rd(),wy(r);else return u=r.lanes=536870912,v0(i,r,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(fc(r,p.cachePool),_y(r,p),Js(),r.memoizedState=null):(i!==null&&fc(r,null),rd(),Js());return yn(i,r,d,o),r.child}function wl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function v0(i,r,o,u,d){var p=Zf();return p=p===null?null:{parent:We._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},i!==null&&fc(r,null),rd(),wy(r),i!==null&&Fa(i,r,u,!0),r.childLanes=d,null}function Rc(i,r){return r=Nc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function b0(i,r,o){return Wr(r,i.child,null,o),i=Rc(r,r.pendingProps),i.flags|=2,Wn(r),r.memoizedState=null,i}function LT(i,r,o){var u=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(ie){if(u.mode==="hidden")return i=Rc(r,u),r.lanes=536870912,wl(null,i);if(od(r),(i=xe)?(i=Dv(i,fi),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ys!==null?{id:Ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},o=ny(i),o.return=r,r.child=o,gn=r,xe=null)):i=null,i===null)throw Qs(r);return r.lanes=536870912,null}return Rc(r,u)}var p=i.memoizedState;if(p!==null){var _=p.dehydrated;if(od(r),d)if(r.flags&256)r.flags&=-257,r=b0(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(Ze||Fa(i,r,o,!1),d=(o&i.childLanes)!==0,Ze||d){if(u=Se,u!==null&&(_=Fo(u,o),_!==0&&_!==p.retryLane))throw p.retryLane=_,qr(i,_),Bn(u,i,_),Rd;jc(),r=b0(i,r,o)}else i=p.treeContext,xe=mi(_.nextSibling),gn=r,ie=!0,Hs=null,fi=!1,i!==null&&ry(r,i),r=Rc(r,u),r.flags|=4096;return r}return i=ms(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Mc(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Md(i,r,o,u,d){return Gr(r),o=ud(i,r,o,u,void 0,d),u=cd(),i!==null&&!Ze?(hd(i,r,d),_s(i,r,d)):(ie&&u&&Yf(r),r.flags|=1,yn(i,r,o,d),r.child)}function _0(i,r,o,u,d,p){return Gr(r),r.updateQueue=null,o=Sy(r,u,o,d),Ey(i),u=cd(),i!==null&&!Ze?(hd(i,r,p),_s(i,r,p)):(ie&&u&&Yf(r),r.flags|=1,yn(i,r,o,p),r.child)}function w0(i,r,o,u,d){if(Gr(r),r.stateNode===null){var p=La,_=o.contextType;typeof _=="object"&&_!==null&&(p=pn(_)),p=new o(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ad,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},ed(r),_=o.contextType,p.context=typeof _=="object"&&_!==null?pn(_):La,p.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(xd(r,o,_,u),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Ad.enqueueReplaceState(p,p.state,null),pl(r,u,p,d),gl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){p=r.stateNode;var T=r.memoizedProps,P=Zr(o,T);p.props=P;var H=p.context,tt=o.contextType;_=La,typeof tt=="object"&&tt!==null&&(_=pn(tt));var st=o.getDerivedStateFromProps;tt=typeof st=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,tt||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||H!==_)&&o0(r,p,u,_),Ks=!1;var Q=r.memoizedState;p.state=Q,pl(r,u,p,d),gl(),H=r.memoizedState,T||Q!==H||Ks?(typeof st=="function"&&(xd(r,o,st,u),H=r.memoizedState),(P=Ks||a0(r,o,P,u,Q,H,_))?(tt||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=H),p.props=u,p.state=H,p.context=_,u=P):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,nd(i,r),_=r.memoizedProps,tt=Zr(o,_),p.props=tt,st=r.pendingProps,Q=p.context,H=o.contextType,P=La,typeof H=="object"&&H!==null&&(P=pn(H)),T=o.getDerivedStateFromProps,(H=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==st||Q!==P)&&o0(r,p,u,P),Ks=!1,Q=r.memoizedState,p.state=Q,pl(r,u,p,d),gl();var X=r.memoizedState;_!==st||Q!==X||Ks||i!==null&&i.dependencies!==null&&cc(i.dependencies)?(typeof T=="function"&&(xd(r,o,T,u),X=r.memoizedState),(tt=Ks||a0(r,o,tt,u,Q,X,P)||i!==null&&i.dependencies!==null&&cc(i.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,X,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,X,P)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=X),p.props=u,p.state=X,p.context=P,u=tt):(typeof p.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),u=!1)}return p=u,Mc(i,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&u?(r.child=Wr(r,i.child,null,d),r.child=Wr(r,null,o,d)):yn(i,r,o,d),r.memoizedState=p.state,i=r.child):i=_s(i,r,d),i}function E0(i,r,o,u){return Hr(),r.flags|=256,yn(i,r,o,u),r.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(i){return{baseLanes:i,cachePool:hy()}}function Od(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=Zn),i}function S0(i,r,o){var u=r.pendingProps,d=!1,p=(r.flags&128)!==0,_;if((_=p)||(_=i!==null&&i.memoizedState===null?!1:(Be.current&2)!==0),_&&(d=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(ie){if(d?Ws(r):Js(),(i=xe)?(i=Dv(i,fi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ys!==null?{id:Ji,overflow:Zi}:null,retryLane:536870912,hydrationErrors:null},o=ny(i),o.return=r,r.child=o,gn=r,xe=null)):i=null,i===null)throw Qs(r);return mm(i)?r.lanes=32:r.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Js(),d=r.mode,T=Nc({mode:"hidden",children:T},d),u=Yr(u,d,o,null),T.return=r,u.return=r,T.sibling=u,r.child=T,u=r.child,u.memoizedState=Dd(o),u.childLanes=Od(i,_,o),r.memoizedState=Nd,wl(null,u)):(Ws(r),Id(r,T))}var P=i.memoizedState;if(P!==null&&(T=P.dehydrated,T!==null)){if(p)r.flags&256?(Ws(r),r.flags&=-257,r=Vd(i,r,o)):r.memoizedState!==null?(Js(),r.child=i.child,r.flags|=128,r=null):(Js(),T=u.fallback,d=r.mode,u=Nc({mode:"visible",children:u.children},d),T=Yr(T,d,o,null),T.flags|=2,u.return=r,T.return=r,u.sibling=T,r.child=u,Wr(r,i.child,null,o),u=r.child,u.memoizedState=Dd(o),u.childLanes=Od(i,_,o),r.memoizedState=Nd,r=wl(null,u));else if(Ws(r),mm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var H=_.dgst;_=H,u=Error(n(419)),u.stack="",u.digest=_,ul({value:u,source:null,stack:null}),r=Vd(i,r,o)}else if(Ze||Fa(i,r,o,!1),_=(o&i.childLanes)!==0,Ze||_){if(_=Se,_!==null&&(u=Fo(_,o),u!==0&&u!==P.retryLane))throw P.retryLane=u,qr(i,u),Bn(_,i,u),Rd;dm(T)||jc(),r=Vd(i,r,o)}else dm(T)?(r.flags|=192,r.child=i.child,r=null):(i=P.treeContext,xe=mi(T.nextSibling),gn=r,ie=!0,Hs=null,fi=!1,i!==null&&ry(r,i),r=Id(r,u.children),r.flags|=4096);return r}return d?(Js(),T=u.fallback,d=r.mode,P=i.child,H=P.sibling,u=ms(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,H!==null?T=ms(H,T):(T=Yr(T,d,o,null),T.flags|=2),T.return=r,u.return=r,u.sibling=T,r.child=u,wl(null,u),u=r.child,T=i.child.memoizedState,T===null?T=Dd(o):(d=T.cachePool,d!==null?(P=We._currentValue,d=d.parent!==P?{parent:P,pool:P}:d):d=hy(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=Od(i,_,o),r.memoizedState=Nd,wl(i.child,u)):(Ws(r),o=i.child,i=o.sibling,o=ms(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=o,r.memoizedState=null,o)}function Id(i,r){return r=Nc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Nc(i,r){return i=$n(22,i,null,r),i.lanes=0,i}function Vd(i,r,o){return Wr(r,i.child,null,o),i=Id(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function T0(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),$f(i.return,r,o)}function Pd(i,r,o,u,d,p){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=d,_.treeForkCount=p)}function x0(i,r,o){var u=r.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var _=Be.current,T=(_&2)!==0;if(T?(_=_&1|2,r.flags|=128):_&=1,mt(Be,_),yn(i,r,u,o),u=ie?ll:0,!T&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&T0(i,o,r);else if(i.tag===19)T0(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(d){case"forwards":for(o=r.child,d=null;o!==null;)i=o.alternate,i!==null&&vc(i)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Pd(r,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(i=d.alternate,i!==null&&vc(i)===null){r.child=d;break}i=d.sibling,d.sibling=o,o=d,d=i}Pd(r,!0,o,null,p,u);break;case"together":Pd(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function _s(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),er|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Fa(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,o=ms(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=ms(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function kd(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&cc(i)))}function jT(i,r,o){switch(r.tag){case 3:Ht(r,r.stateNode.containerInfo),Gs(r,We,i.memoizedState.cache),Hr();break;case 27:case 5:fe(r);break;case 4:Ht(r,r.stateNode.containerInfo);break;case 10:Gs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,od(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ws(r),r.flags|=128,null):(o&r.child.childLanes)!==0?S0(i,r,o):(Ws(r),i=_s(i,r,o),i!==null?i.sibling:null);Ws(r);break;case 19:var d=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Fa(i,r,o,!1),u=(o&r.childLanes)!==0),d){if(u)return x0(i,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),mt(Be,Be.current),u)break;return null;case 22:return r.lanes=0,y0(i,r,o,r.pendingProps);case 24:Gs(r,We,i.memoizedState.cache)}return _s(i,r,o)}function A0(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)Ze=!0;else{if(!kd(i,o)&&(r.flags&128)===0)return Ze=!1,jT(i,r,o);Ze=(i.flags&131072)!==0}else Ze=!1,ie&&(r.flags&1048576)!==0&&sy(r,ll,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(i=$r(r.elementType),r.type=i,typeof i=="function")Bf(i)?(u=Zr(i,u),r.tag=1,r=w0(null,r,i,u,o)):(r.tag=0,r=Md(null,r,i,u,o));else{if(i!=null){var d=i.$$typeof;if(d===gt){r.tag=11,r=m0(null,r,i,u,o);break t}else if(d===N){r.tag=14,r=g0(null,r,i,u,o);break t}}throw r=kt(i)||i,Error(n(306,r,""))}}return r;case 0:return Md(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,d=Zr(u,r.pendingProps),w0(i,r,u,d,o);case 3:t:{if(Ht(r,r.stateNode.containerInfo),i===null)throw Error(n(387));u=r.pendingProps;var p=r.memoizedState;d=p.element,nd(i,r),pl(r,u,null,o);var _=r.memoizedState;if(u=_.cache,Gs(r,We,u),u!==p.cache&&Xf(r,[We],o,!0),gl(),u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=E0(i,r,u,o);break t}else if(u!==d){d=ui(Error(n(424)),r),ul(d),r=E0(i,r,u,o);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xe=mi(i.firstChild),gn=r,ie=!0,Hs=null,fi=!0,o=yy(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Hr(),u===d){r=_s(i,r,o);break t}yn(i,r,u,o)}r=r.child}return r;case 26:return Mc(i,r),i===null?(o=zv(r.type,null,r.pendingProps,null))?r.memoizedState=o:ie||(o=r.type,i=r.pendingProps,u=Qc(_t.current).createElement(o),u[Ke]=r,u[ln]=i,vn(u,o,i),$e(u),r.stateNode=u):r.memoizedState=zv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return fe(r),i===null&&ie&&(u=r.stateNode=Vv(r.type,r.pendingProps,_t.current),gn=r,fi=!0,d=xe,ar(r.type)?(gm=d,xe=mi(u.firstChild)):xe=d),yn(i,r,r.pendingProps.children,o),Mc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&ie&&((d=u=xe)&&(u=gx(u,r.type,r.pendingProps,fi),u!==null?(r.stateNode=u,gn=r,xe=mi(u.firstChild),fi=!1,d=!0):d=!1),d||Qs(r)),fe(r),d=r.type,p=r.pendingProps,_=i!==null?i.memoizedProps:null,u=p.children,cm(d,p)?u=null:_!==null&&cm(d,_)&&(r.flags|=32),r.memoizedState!==null&&(d=ud(i,r,NT,null,null,o),kl._currentValue=d),Mc(i,r),yn(i,r,u,o),r.child;case 6:return i===null&&ie&&((i=o=xe)&&(o=px(o,r.pendingProps,fi),o!==null?(r.stateNode=o,gn=r,xe=null,i=!0):i=!1),i||Qs(r)),null;case 13:return S0(i,r,o);case 4:return Ht(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Wr(r,null,u,o):yn(i,r,u,o),r.child;case 11:return m0(i,r,r.type,r.pendingProps,o);case 7:return yn(i,r,r.pendingProps,o),r.child;case 8:return yn(i,r,r.pendingProps.children,o),r.child;case 12:return yn(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,Gs(r,r.type,u.value),yn(i,r,u.children,o),r.child;case 9:return d=r.type._context,u=r.pendingProps.children,Gr(r),d=pn(d),u=u(d),r.flags|=1,yn(i,r,u,o),r.child;case 14:return g0(i,r,r.type,r.pendingProps,o);case 15:return p0(i,r,r.type,r.pendingProps,o);case 19:return x0(i,r,o);case 31:return LT(i,r,o);case 22:return y0(i,r,o,r.pendingProps);case 24:return Gr(r),u=pn(We),i===null?(d=Zf(),d===null&&(d=Se,p=Wf(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),r.memoizedState={parent:u,cache:d},ed(r),Gs(r,We,d)):((i.lanes&o)!==0&&(nd(i,r),pl(r,null,null,o),gl()),d=i.memoizedState,p=r.memoizedState,d.parent!==u?(d={parent:u,cache:u},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Gs(r,We,u)):(u=p.cache,Gs(r,We,u),u!==d.cache&&Xf(r,[We],o,!0))),yn(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function ws(i){i.flags|=4}function zd(i,r,o,u,d){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(d&335544128)===d)if(i.stateNode.complete)i.flags|=8192;else if(Z0())i.flags|=8192;else throw Xr=mc,td}else i.flags&=-16777217}function C0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Fv(r))if(Z0())i.flags|=8192;else throw Xr=mc,td}function Dc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?zu():536870912,i.lanes|=r,to|=r)}function El(i,r){if(!ie)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ae(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var d=i.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=i,d=d.sibling;else for(d=i.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=i,d=d.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function UT(i,r,o){var u=r.pendingProps;switch(Hf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(r),null;case 1:return Ae(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ys(We),zt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Ba(r)?ws(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gf())),Ae(r),null;case 26:var d=r.type,p=r.memoizedState;return i===null?(ws(r),p!==null?(Ae(r),C0(r,p)):(Ae(r),zd(r,d,null,u,o))):p?p!==i.memoizedState?(ws(r),Ae(r),C0(r,p)):(Ae(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ws(r),Ae(r),zd(r,d,i,u,o)),null;case 27:if(Re(r),o=_t.current,d=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ae(r),null}i=pt.current,Ba(r)?ay(r):(i=Vv(d,u,o),r.stateNode=i,ws(r))}return Ae(r),null;case 5:if(Re(r),d=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ae(r),null}if(p=pt.current,Ba(r))ay(r);else{var _=Qc(_t.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}p[Ke]=r,p[ln]=u;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=p;t:switch(vn(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ws(r)}}return Ae(r),zd(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ws(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(i=_t.current,Ba(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,d=gn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}i[Ke]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Sv(i.nodeValue,o)),i||Qs(r,!0)}else i=Qc(i).createTextNode(u),i[Ke]=r,r.stateNode=i}return Ae(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=Ba(r),o!==null){if(i===null){if(!u)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Ke]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ae(r),i=!1}else o=Gf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(Wn(r),r):(Wn(r),null);if((r.flags&128)!==0)throw Error(n(558))}return Ae(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(d=Ba(r),u!==null&&u.dehydrated!==null){if(i===null){if(!d)throw Error(n(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[Ke]=r}else Hr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ae(r),d=!1}else d=Gf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Wn(r),r):(Wn(r),null)}return Wn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),Dc(r,r.updateQueue),Ae(r),null);case 4:return zt(),i===null&&rm(r.stateNode.containerInfo),Ae(r),null;case 10:return ys(r.type),Ae(r),null;case 19:if(J(Be),u=r.memoizedState,u===null)return Ae(r),null;if(d=(r.flags&128)!==0,p=u.rendering,p===null)if(d)El(u,!1);else{if(Le!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=vc(i),p!==null){for(r.flags|=128,El(u,!1),i=p.updateQueue,r.updateQueue=i,Dc(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)ey(o,i),o=o.sibling;return mt(Be,Be.current&1|2),ie&&gs(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&ft()>kc&&(r.flags|=128,d=!0,El(u,!1),r.lanes=4194304)}else{if(!d)if(i=vc(p),i!==null){if(r.flags|=128,d=!0,i=i.updateQueue,r.updateQueue=i,Dc(r,i),El(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!ie)return Ae(r),null}else 2*ft()-u.renderingStartTime>kc&&o!==536870912&&(r.flags|=128,d=!0,El(u,!1),r.lanes=4194304);u.isBackwards?(p.sibling=r.child,r.child=p):(i=u.last,i!==null?i.sibling=p:r.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=ft(),i.sibling=null,o=Be.current,mt(Be,d?o&1|2:o&1),ie&&gs(r,u.treeForkCount),i):(Ae(r),null);case 22:case 23:return Wn(r),ad(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(Ae(r),r.subtreeFlags&6&&(r.flags|=8192)):Ae(r),o=r.updateQueue,o!==null&&Dc(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&J(Kr),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ys(We),Ae(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function BT(i,r){switch(Hf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ys(We),zt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Re(r),null;case 31:if(r.memoizedState!==null){if(Wn(r),r.alternate===null)throw Error(n(340));Hr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Wn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Hr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return J(Be),null;case 4:return zt(),null;case 10:return ys(r.type),null;case 22:case 23:return Wn(r),ad(),i!==null&&J(Kr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ys(We),null;case 25:return null;default:return null}}function R0(i,r){switch(Hf(r),r.tag){case 3:ys(We),zt();break;case 26:case 27:case 5:Re(r);break;case 4:zt();break;case 31:r.memoizedState!==null&&Wn(r);break;case 13:Wn(r);break;case 19:J(Be);break;case 10:ys(r.type);break;case 22:case 23:Wn(r),ad(),i!==null&&J(Kr);break;case 24:ys(We)}}function Sl(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&i)===i){u=void 0;var p=o.create,_=o.inst;u=p(),_.destroy=u}o=o.next}while(o!==d)}}catch(T){ye(r,r.return,T)}}function Zs(i,r,o){try{var u=r.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&i)===i){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=r;var P=o,H=T;try{H()}catch(tt){ye(d,P,tt)}}}u=u.next}while(u!==p)}}catch(tt){ye(r,r.return,tt)}}function M0(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{by(r,o)}catch(u){ye(i,i.return,u)}}}function N0(i,r,o){o.props=Zr(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ye(i,r,u)}}function Tl(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(d){ye(i,r,d)}}function ts(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){ye(i,r,d)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ye(i,r,d)}else o.current=null}function D0(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){ye(i,i.return,d)}}function Ld(i,r,o){try{var u=i.stateNode;ux(u,i.type,o,r),u[ln]=r}catch(d){ye(i,i.return,d)}}function O0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ar(i.type)||i.tag===4}function jd(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||O0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ar(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ud(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ei));else if(u!==4&&(u===27&&ar(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(Ud(i,r,o),i=i.sibling;i!==null;)Ud(i,r,o),i=i.sibling}function Oc(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&ar(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Oc(i,r,o),i=i.sibling;i!==null;)Oc(i,r,o),i=i.sibling}function I0(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);vn(r,u,o),r[Ke]=i,r[ln]=o}catch(p){ye(i,i.return,p)}}var Es=!1,tn=!1,Bd=!1,V0=typeof WeakSet=="function"?WeakSet:Set,cn=null;function FT(i,r){if(i=i.containerInfo,lm=Zc,i=Qp(i),Vf(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var _=0,T=-1,P=-1,H=0,tt=0,st=i,Q=null;e:for(;;){for(var X;st!==o||d!==0&&st.nodeType!==3||(T=_+d),st!==p||u!==0&&st.nodeType!==3||(P=_+u),st.nodeType===3&&(_+=st.nodeValue.length),(X=st.firstChild)!==null;)Q=st,st=X;for(;;){if(st===i)break e;if(Q===o&&++H===d&&(T=_),Q===p&&++tt===u&&(P=_),(X=st.nextSibling)!==null)break;st=Q,Q=st.parentNode}st=X}o=T===-1||P===-1?null:{start:T,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(um={focusedElem:i,selectionRange:o},Zc=!1,cn=r;cn!==null;)if(r=cn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,cn=i;else for(;cn!==null;){switch(r=cn,p=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)d=i[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=r,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Mt=Zr(o.type,d);i=u.getSnapshotBeforeUpdate(Mt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Vt){ye(o,o.return,Vt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)fm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,cn=i;break}cn=r.return}}function P0(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ts(i,o),u&4&&Sl(5,o);break;case 1:if(Ts(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(_){ye(o,o.return,_)}else{var d=Zr(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(d,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ye(o,o.return,_)}}u&64&&M0(o),u&512&&Tl(o,o.return);break;case 3:if(Ts(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{by(i,r)}catch(_){ye(o,o.return,_)}}break;case 27:r===null&&u&4&&I0(o);case 26:case 5:Ts(i,o),r===null&&u&4&&D0(o),u&512&&Tl(o,o.return);break;case 12:Ts(i,o);break;case 31:Ts(i,o),u&4&&L0(i,o);break;case 13:Ts(i,o),u&4&&j0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=WT.bind(null,o),yx(i,o))));break;case 22:if(u=o.memoizedState!==null||Es,!u){r=r!==null&&r.memoizedState!==null||tn,d=Es;var p=tn;Es=u,(tn=r)&&!p?xs(i,o,(o.subtreeFlags&8772)!==0):Ts(i,o),Es=d,tn=p}break;case 30:break;default:Ts(i,o)}}function k0(i){var r=i.alternate;r!==null&&(i.alternate=null,k0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ta(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ie=null,zn=!1;function Ss(i,r,o){for(o=o.child;o!==null;)z0(i,r,o),o=o.sibling}function z0(i,r,o){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Tn,o)}catch{}switch(o.tag){case 26:tn||ts(o,r),Ss(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:tn||ts(o,r);var u=Ie,d=zn;ar(o.type)&&(Ie=o.stateNode,zn=!1),Ss(i,r,o),Il(o.stateNode),Ie=u,zn=d;break;case 5:tn||ts(o,r);case 6:if(u=Ie,d=zn,Ie=null,Ss(i,r,o),Ie=u,zn=d,Ie!==null)if(zn)try{(Ie.nodeType===9?Ie.body:Ie.nodeName==="HTML"?Ie.ownerDocument.body:Ie).removeChild(o.stateNode)}catch(p){ye(o,r,p)}else try{Ie.removeChild(o.stateNode)}catch(p){ye(o,r,p)}break;case 18:Ie!==null&&(zn?(i=Ie,Mv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),lo(i)):Mv(Ie,o.stateNode));break;case 4:u=Ie,d=zn,Ie=o.stateNode.containerInfo,zn=!0,Ss(i,r,o),Ie=u,zn=d;break;case 0:case 11:case 14:case 15:Zs(2,o,r),tn||Zs(4,o,r),Ss(i,r,o);break;case 1:tn||(ts(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&N0(o,r,u)),Ss(i,r,o);break;case 21:Ss(i,r,o);break;case 22:tn=(u=tn)||o.memoizedState!==null,Ss(i,r,o),tn=u;break;default:Ss(i,r,o)}}function L0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{lo(i)}catch(o){ye(r,r.return,o)}}}function j0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{lo(i)}catch(o){ye(r,r.return,o)}}function qT(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new V0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new V0),r;default:throw Error(n(435,i.tag))}}function Ic(i,r){var o=qT(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var d=JT.bind(null,i,u);u.then(d,d)}})}function Ln(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=i,_=r,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(ar(T.type)){Ie=T.stateNode,zn=!1;break t}break;case 5:Ie=T.stateNode,zn=!1;break t;case 3:case 4:Ie=T.stateNode.containerInfo,zn=!0;break t}T=T.return}if(Ie===null)throw Error(n(160));z0(p,_,d),Ie=null,zn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)U0(r,i),r=r.sibling}var Ri=null;function U0(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ln(r,i),jn(i),u&4&&(Zs(3,i,i.return),Sl(3,i),Zs(5,i,i.return));break;case 1:Ln(r,i),jn(i),u&512&&(tn||o===null||ts(o,o.return)),u&64&&Es&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Ri;if(Ln(r,i),jn(i),u&512&&(tn||o===null||ts(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,d=d.ownerDocument||d;e:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ui]||p[Ke]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),vn(p,u,o),p[Ke]=i,$e(p),u=p;break t;case"link":var _=Uv("link","href",d).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(p=_[T],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break e}}p=d.createElement(u),vn(p,u,o),d.head.appendChild(p);break;case"meta":if(_=Uv("meta","content",d).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(p=_[T],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break e}}p=d.createElement(u),vn(p,u,o),d.head.appendChild(p);break;default:throw Error(n(468,u))}p[Ke]=i,$e(p),u=p}i.stateNode=u}else Bv(d,i.type,i.stateNode);else i.stateNode=jv(d,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Bv(d,i.type,i.stateNode):jv(d,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Ld(i,i.memoizedProps,o.memoizedProps)}break;case 27:Ln(r,i),jn(i),u&512&&(tn||o===null||ts(o,o.return)),o!==null&&u&4&&Ld(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Ln(r,i),jn(i),u&512&&(tn||o===null||ts(o,o.return)),i.flags&32){d=i.stateNode;try{kn(d,"")}catch(Mt){ye(i,i.return,Mt)}}u&4&&i.stateNode!=null&&(d=i.memoizedProps,Ld(i,d,o!==null?o.memoizedProps:d)),u&1024&&(Bd=!0);break;case 6:if(Ln(r,i),jn(i),u&4){if(i.stateNode===null)throw Error(n(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(Mt){ye(i,i.return,Mt)}}break;case 3:if($c=null,d=Ri,Ri=Gc(r.containerInfo),Ln(r,i),Ri=d,jn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{lo(r.containerInfo)}catch(Mt){ye(i,i.return,Mt)}Bd&&(Bd=!1,B0(i));break;case 4:u=Ri,Ri=Gc(i.stateNode.containerInfo),Ln(r,i),jn(i),Ri=u;break;case 12:Ln(r,i),jn(i);break;case 31:Ln(r,i),jn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ic(i,u)));break;case 13:Ln(r,i),jn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Pc=ft()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ic(i,u)));break;case 22:d=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,H=Es,tt=tn;if(Es=H||d,tn=tt||P,Ln(r,i),tn=tt,Es=H,jn(i),u&8192)t:for(r=i.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||P||Es||tn||ta(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){P=o=r;try{if(p=P.stateNode,d)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=P.stateNode;var st=P.memoizedProps.style,Q=st!=null&&st.hasOwnProperty("display")?st.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Mt){ye(P,P.return,Mt)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=d?"":P.memoizedProps}catch(Mt){ye(P,P.return,Mt)}}}else if(r.tag===18){if(o===null){P=r;try{var X=P.stateNode;d?Nv(X,!0):Nv(P.stateNode,!1)}catch(Mt){ye(P,P.return,Mt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ic(i,o))));break;case 19:Ln(r,i),jn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ic(i,u)));break;case 30:break;case 21:break;default:Ln(r,i),jn(i)}}function jn(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(O0(u)){o=u;break}u=u.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var d=o.stateNode,p=jd(i);Oc(i,p,d);break;case 5:var _=o.stateNode;o.flags&32&&(kn(_,""),o.flags&=-33);var T=jd(i);Oc(i,T,_);break;case 3:case 4:var P=o.stateNode.containerInfo,H=jd(i);Ud(i,H,P);break;default:throw Error(n(161))}}catch(tt){ye(i,i.return,tt)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function B0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;B0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ts(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)P0(i,r.alternate,r),r=r.sibling}function ta(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Zs(4,r,r.return),ta(r);break;case 1:ts(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&N0(r,r.return,o),ta(r);break;case 27:Il(r.stateNode);case 26:case 5:ts(r,r.return),ta(r);break;case 22:r.memoizedState===null&&ta(r);break;case 30:ta(r);break;default:ta(r)}i=i.sibling}}function xs(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,d=i,p=r,_=p.flags;switch(p.tag){case 0:case 11:case 15:xs(d,p,o),Sl(4,p);break;case 1:if(xs(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){ye(u,u.return,H)}if(u=p,d=u.updateQueue,d!==null){var T=u.stateNode;try{var P=d.shared.hiddenCallbacks;if(P!==null)for(d.shared.hiddenCallbacks=null,d=0;d<P.length;d++)vy(P[d],T)}catch(H){ye(u,u.return,H)}}o&&_&64&&M0(p),Tl(p,p.return);break;case 27:I0(p);case 26:case 5:xs(d,p,o),o&&u===null&&_&4&&D0(p),Tl(p,p.return);break;case 12:xs(d,p,o);break;case 31:xs(d,p,o),o&&_&4&&L0(d,p);break;case 13:xs(d,p,o),o&&_&4&&j0(d,p);break;case 22:p.memoizedState===null&&xs(d,p,o),Tl(p,p.return);break;case 30:break;default:xs(d,p,o)}r=r.sibling}}function Fd(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&cl(o))}function qd(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&cl(i))}function Mi(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)F0(i,r,o,u),r=r.sibling}function F0(i,r,o,u){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Mi(i,r,o,u),d&2048&&Sl(9,r);break;case 1:Mi(i,r,o,u);break;case 3:Mi(i,r,o,u),d&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&cl(i)));break;case 12:if(d&2048){Mi(i,r,o,u),i=r.stateNode;try{var p=r.memoizedProps,_=p.id,T=p.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){ye(r,r.return,P)}}else Mi(i,r,o,u);break;case 31:Mi(i,r,o,u);break;case 13:Mi(i,r,o,u);break;case 23:break;case 22:p=r.stateNode,_=r.alternate,r.memoizedState!==null?p._visibility&2?Mi(i,r,o,u):xl(i,r):p._visibility&2?Mi(i,r,o,u):(p._visibility|=2,Wa(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Fd(_,r);break;case 24:Mi(i,r,o,u),d&2048&&qd(r.alternate,r);break;default:Mi(i,r,o,u)}}function Wa(i,r,o,u,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=i,_=r,T=o,P=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(p,_,T,P,d),Sl(8,_);break;case 23:break;case 22:var tt=_.stateNode;_.memoizedState!==null?tt._visibility&2?Wa(p,_,T,P,d):xl(p,_):(tt._visibility|=2,Wa(p,_,T,P,d)),d&&H&2048&&Fd(_.alternate,_);break;case 24:Wa(p,_,T,P,d),d&&H&2048&&qd(_.alternate,_);break;default:Wa(p,_,T,P,d)}r=r.sibling}}function xl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,d=u.flags;switch(u.tag){case 22:xl(o,u),d&2048&&Fd(u.alternate,u);break;case 24:xl(o,u),d&2048&&qd(u.alternate,u);break;default:xl(o,u)}r=r.sibling}}var Al=8192;function Ja(i,r,o){if(i.subtreeFlags&Al)for(i=i.child;i!==null;)q0(i,r,o),i=i.sibling}function q0(i,r,o){switch(i.tag){case 26:Ja(i,r,o),i.flags&Al&&i.memoizedState!==null&&Mx(o,Ri,i.memoizedState,i.memoizedProps);break;case 5:Ja(i,r,o);break;case 3:case 4:var u=Ri;Ri=Gc(i.stateNode.containerInfo),Ja(i,r,o),Ri=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Al,Al=16777216,Ja(i,r,o),Al=u):Ja(i,r,o));break;default:Ja(i,r,o)}}function Y0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Cl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];cn=u,Q0(u,i)}Y0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H0(i),i=i.sibling}function H0(i){switch(i.tag){case 0:case 11:case 15:Cl(i),i.flags&2048&&Zs(9,i,i.return);break;case 3:Cl(i);break;case 12:Cl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Vc(i)):Cl(i);break;default:Cl(i)}}function Vc(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];cn=u,Q0(u,i)}Y0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Zs(8,r,r.return),Vc(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Vc(r));break;default:Vc(r)}i=i.sibling}}function Q0(i,r){for(;cn!==null;){var o=cn;switch(o.tag){case 0:case 11:case 15:Zs(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:cl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,cn=u;else t:for(o=i;cn!==null;){u=cn;var d=u.sibling,p=u.return;if(k0(u),u===o){cn=null;break t}if(d!==null){d.return=p,cn=d;break t}cn=p}}}var YT={getCacheForType:function(i){var r=pn(We),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return pn(We).controller.signal}},HT=typeof WeakMap=="function"?WeakMap:Map,ce=0,Se=null,Kt=null,Wt=0,pe=0,Jn=null,tr=!1,Za=!1,Yd=!1,As=0,Le=0,er=0,ea=0,Hd=0,Zn=0,to=0,Rl=null,Un=null,Qd=!1,Pc=0,G0=0,kc=1/0,zc=null,nr=null,rn=0,ir=null,eo=null,Cs=0,Gd=0,Kd=null,K0=null,Ml=0,$d=null;function ti(){return(ce&2)!==0&&Wt!==0?Wt&-Wt:G.T!==null?em():Lu()}function $0(){if(Zn===0)if((Wt&536870912)===0||ie){var i=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),Zn=i}else Zn=536870912;return i=Xn.current,i!==null&&(i.flags|=32),Zn}function Bn(i,r,o){(i===Se&&(pe===2||pe===9)||i.cancelPendingCommit!==null)&&(no(i,0),sr(i,Wt,Zn,!1)),Mr(i,o),((ce&2)===0||i!==Se)&&(i===Se&&((ce&2)===0&&(ea|=o),Le===4&&sr(i,Wt,Zn,!1)),es(i))}function X0(i,r,o){if((ce&6)!==0)throw Error(n(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||bi(i,r),d=u?KT(i,r):Wd(i,r,!0),p=u;do{if(d===0){Za&&!u&&sr(i,r,0,!1);break}else{if(o=i.current.alternate,p&&!QT(o)){d=Wd(i,r,!1),p=!1;continue}if(d===2){if(p=r,i.errorRecoveryDisabledLanes&p)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var T=i;d=Rl;var P=T.current.memoizedState.isDehydrated;if(P&&(no(T,_).flags|=256),_=Wd(T,_,!1),_!==2){if(Yd&&!P){T.errorRecoveryDisabledLanes|=p,ea|=p,d=4;break t}p=Un,Un=d,p!==null&&(Un===null?Un=p:Un.push.apply(Un,p))}d=_}if(p=!1,d!==2)continue}}if(d===1){no(i,0),sr(i,r,0,!0);break}t:{switch(u=i,p=d,p){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:sr(u,r,Zn,!tr);break t;case 2:Un=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(d=Pc+300-ft(),10<d)){if(sr(u,r,Zn,!tr),zi(u,0,!0)!==0)break t;Cs=r,u.timeoutHandle=Cv(W0.bind(null,u,o,Un,zc,Qd,r,Zn,ea,to,tr,p,"Throttled",-0,0),d);break t}W0(u,o,Un,zc,Qd,r,Zn,ea,to,tr,p,null,-0,0)}}break}while(!0);es(i)}function W0(i,r,o,u,d,p,_,T,P,H,tt,st,Q,X){if(i.timeoutHandle=-1,st=r.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ei},q0(r,p,st);var Mt=(p&62914560)===p?Pc-ft():(p&4194048)===p?G0-ft():0;if(Mt=Nx(st,Mt),Mt!==null){Cs=p,i.cancelPendingCommit=Mt(rv.bind(null,i,r,p,o,u,d,_,T,P,tt,st,null,Q,X)),sr(i,p,_,!H);return}}rv(i,r,p,o,u,d,_,T,P)}function QT(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Kn(p(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function sr(i,r,o,u){r&=~Hd,r&=~ea,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var d=r;0<d;){var p=31-je(d),_=1<<p;u[p]=-1,d&=~_}o!==0&&Nr(i,o,r)}function Lc(){return(ce&6)===0?(Nl(0),!1):!0}function Xd(){if(Kt!==null){if(pe===0)var i=Kt.return;else i=Kt,ps=Qr=null,fd(i),Qa=null,fl=0,i=Kt;for(;i!==null;)R0(i.alternate,i),i=i.return;Kt=null}}function no(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,fx(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Cs=0,Xd(),Se=i,Kt=o=ms(i.current,null),Wt=r,pe=0,Jn=null,tr=!1,Za=bi(i,r),Yd=!1,to=Zn=Hd=ea=er=Le=0,Un=Rl=null,Qd=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var d=31-je(u),p=1<<d;r|=i[d],u&=~p}return As=r,rc(),o}function J0(i,r){qt=null,G.H=_l,r===Ha||r===dc?(r=my(),pe=3):r===td?(r=my(),pe=4):pe=r===Rd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Jn=r,Kt===null&&(Le=1,Cc(i,ui(r,i.current)))}function Z0(){var i=Xn.current;return i===null?!0:(Wt&4194048)===Wt?di===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?i===di:!1}function tv(){var i=G.H;return G.H=_l,i===null?_l:i}function ev(){var i=G.A;return G.A=YT,i}function jc(){Le=4,tr||(Wt&4194048)!==Wt&&Xn.current!==null||(Za=!0),(er&134217727)===0&&(ea&134217727)===0||Se===null||sr(Se,Wt,Zn,!1)}function Wd(i,r,o){var u=ce;ce|=2;var d=tv(),p=ev();(Se!==i||Wt!==r)&&(zc=null,no(i,r)),r=!1;var _=Le;t:do try{if(pe!==0&&Kt!==null){var T=Kt,P=Jn;switch(pe){case 8:Xd(),_=6;break t;case 3:case 2:case 9:case 6:Xn.current===null&&(r=!0);var H=pe;if(pe=0,Jn=null,io(i,T,P,H),o&&Za){_=0;break t}break;default:H=pe,pe=0,Jn=null,io(i,T,P,H)}}GT(),_=Le;break}catch(tt){J0(i,tt)}while(!0);return r&&i.shellSuspendCounter++,ps=Qr=null,ce=u,G.H=d,G.A=p,Kt===null&&(Se=null,Wt=0,rc()),_}function GT(){for(;Kt!==null;)nv(Kt)}function KT(i,r){var o=ce;ce|=2;var u=tv(),d=ev();Se!==i||Wt!==r?(zc=null,kc=ft()+500,no(i,r)):Za=bi(i,r);t:do try{if(pe!==0&&Kt!==null){r=Kt;var p=Jn;e:switch(pe){case 1:pe=0,Jn=null,io(i,r,p,1);break;case 2:case 9:if(fy(p)){pe=0,Jn=null,iv(r);break}r=function(){pe!==2&&pe!==9||Se!==i||(pe=7),es(i)},p.then(r,r);break t;case 3:pe=7;break t;case 4:pe=5;break t;case 7:fy(p)?(pe=0,Jn=null,iv(r)):(pe=0,Jn=null,io(i,r,p,7));break;case 5:var _=null;switch(Kt.tag){case 26:_=Kt.memoizedState;case 5:case 27:var T=Kt;if(_?Fv(_):T.stateNode.complete){pe=0,Jn=null;var P=T.sibling;if(P!==null)Kt=P;else{var H=T.return;H!==null?(Kt=H,Uc(H)):Kt=null}break e}}pe=0,Jn=null,io(i,r,p,5);break;case 6:pe=0,Jn=null,io(i,r,p,6);break;case 8:Xd(),Le=6;break t;default:throw Error(n(462))}}$T();break}catch(tt){J0(i,tt)}while(!0);return ps=Qr=null,G.H=u,G.A=d,ce=o,Kt!==null?0:(Se=null,Wt=0,rc(),Le)}function $T(){for(;Kt!==null&&!W();)nv(Kt)}function nv(i){var r=A0(i.alternate,i,As);i.memoizedProps=i.pendingProps,r===null?Uc(i):Kt=r}function iv(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=_0(o,r,r.pendingProps,r.type,void 0,Wt);break;case 11:r=_0(o,r,r.pendingProps,r.type.render,r.ref,Wt);break;case 5:fd(r);default:R0(o,r),r=Kt=ey(r,As),r=A0(o,r,As)}i.memoizedProps=i.pendingProps,r===null?Uc(i):Kt=r}function io(i,r,o,u){ps=Qr=null,fd(r),Qa=null,fl=0;var d=r.return;try{if(zT(i,d,r,o,Wt)){Le=1,Cc(i,ui(o,i.current)),Kt=null;return}}catch(p){if(d!==null)throw Kt=d,p;Le=1,Cc(i,ui(o,i.current)),Kt=null;return}r.flags&32768?(ie||u===1?i=!0:Za||(Wt&536870912)!==0?i=!1:(tr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Xn.current,u!==null&&u.tag===13&&(u.flags|=16384))),sv(r,i)):Uc(r)}function Uc(i){var r=i;do{if((r.flags&32768)!==0){sv(r,tr);return}i=r.return;var o=UT(r.alternate,r,As);if(o!==null){Kt=o;return}if(r=r.sibling,r!==null){Kt=r;return}Kt=r=i}while(r!==null);Le===0&&(Le=5)}function sv(i,r){do{var o=BT(i.alternate,i);if(o!==null){o.flags&=32767,Kt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Kt=i;return}Kt=i=o}while(i!==null);Le=6,Kt=null}function rv(i,r,o,u,d,p,_,T,P){i.cancelPendingCommit=null;do Bc();while(rn!==0);if((ce&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(p=r.lanes|r.childLanes,p|=jf,Nf(i,o,p,_,T,P),i===Se&&(Kt=Se=null,Wt=0),eo=r,ir=i,Cs=o,Gd=p,Kd=d,K0=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,ZT(Gt,function(){return cv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,d=dt.p,dt.p=2,_=ce,ce|=4;try{FT(i,r,o)}finally{ce=_,dt.p=d,G.T=u}}rn=1,av(),ov(),lv()}}function av(){if(rn===1){rn=0;var i=ir,r=eo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var u=dt.p;dt.p=2;var d=ce;ce|=4;try{U0(r,i);var p=um,_=Qp(i.containerInfo),T=p.focusedElem,P=p.selectionRange;if(_!==T&&T&&T.ownerDocument&&Hp(T.ownerDocument.documentElement,T)){if(P!==null&&Vf(T)){var H=P.start,tt=P.end;if(tt===void 0&&(tt=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(tt,T.value.length);else{var st=T.ownerDocument||document,Q=st&&st.defaultView||window;if(Q.getSelection){var X=Q.getSelection(),Mt=T.textContent.length,Vt=Math.min(P.start,Mt),Ee=P.end===void 0?Vt:Math.min(P.end,Mt);!X.extend&&Vt>Ee&&(_=Ee,Ee=Vt,Vt=_);var F=Yp(T,Vt),j=Yp(T,Ee);if(F&&j&&(X.rangeCount!==1||X.anchorNode!==F.node||X.anchorOffset!==F.offset||X.focusNode!==j.node||X.focusOffset!==j.offset)){var Y=st.createRange();Y.setStart(F.node,F.offset),X.removeAllRanges(),Vt>Ee?(X.addRange(Y),X.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),X.addRange(Y))}}}}for(st=[],X=T;X=X.parentNode;)X.nodeType===1&&st.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<st.length;T++){var et=st[T];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}Zc=!!lm,um=lm=null}finally{ce=d,dt.p=u,G.T=o}}i.current=r,rn=2}}function ov(){if(rn===2){rn=0;var i=ir,r=eo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var u=dt.p;dt.p=2;var d=ce;ce|=4;try{P0(i,r.alternate,r)}finally{ce=d,dt.p=u,G.T=o}}rn=3}}function lv(){if(rn===4||rn===3){rn=0,it();var i=ir,r=eo,o=Cs,u=K0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rn=5:(rn=0,eo=ir=null,uv(i,i.pendingLanes));var d=i.pendingLanes;if(d===0&&(nr=null),cs(o),r=r.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Tn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=G.T,d=dt.p,dt.p=2,G.T=null;try{for(var p=i.onRecoverableError,_=0;_<u.length;_++){var T=u[_];p(T.value,{componentStack:T.stack})}}finally{G.T=r,dt.p=d}}(Cs&3)!==0&&Bc(),es(i),d=i.pendingLanes,(o&261930)!==0&&(d&42)!==0?i===$d?Ml++:(Ml=0,$d=i):Ml=0,Nl(0)}}function uv(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,cl(r)))}function Bc(){return av(),ov(),lv(),cv()}function cv(){if(rn!==5)return!1;var i=ir,r=Gd;Gd=0;var o=cs(Cs),u=G.T,d=dt.p;try{dt.p=32>o?32:o,G.T=null,o=Kd,Kd=null;var p=ir,_=Cs;if(rn=0,eo=ir=null,Cs=0,(ce&6)!==0)throw Error(n(331));var T=ce;if(ce|=4,H0(p.current),F0(p,p.current,_,o),ce=T,Nl(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Tn,p)}catch{}return!0}finally{dt.p=d,G.T=u,uv(i,r)}}function hv(i,r,o){r=ui(o,r),r=Cd(i.stateNode,r,2),i=Xs(i,r,2),i!==null&&(Mr(i,2),es(i))}function ye(i,r,o){if(i.tag===3)hv(i,i,o);else for(;r!==null;){if(r.tag===3){hv(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(nr===null||!nr.has(u))){i=ui(o,i),o=f0(2),u=Xs(r,o,2),u!==null&&(d0(o,u,r,i),Mr(u,2),es(u));break}}r=r.return}}function Jd(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new HT;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(o)||(Yd=!0,d.add(o),i=XT.bind(null,i,r,o),r.then(i,i))}function XT(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,Se===i&&(Wt&o)===o&&(Le===4||Le===3&&(Wt&62914560)===Wt&&300>ft()-Pc?(ce&2)===0&&no(i,0):Hd|=o,to===Wt&&(to=0)),es(i)}function fv(i,r){r===0&&(r=zu()),i=qr(i,r),i!==null&&(Mr(i,r),es(i))}function WT(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),fv(i,o)}function JT(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,d=i.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(r),fv(i,o)}function ZT(i,r){return me(i,r)}var Fc=null,so=null,Zd=!1,qc=!1,tm=!1,rr=0;function es(i){i!==so&&i.next===null&&(so===null?Fc=so=i:so=so.next=i),qc=!0,Zd||(Zd=!0,ex())}function Nl(i,r){if(!tm&&qc){tm=!0;do for(var o=!1,u=Fc;u!==null;){if(i!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var _=u.suspendedLanes,T=u.pingedLanes;p=(1<<31-je(42|i)+1)-1,p&=d&~(_&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,pv(u,p))}else p=Wt,p=zi(u,u===Se?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||bi(u,p)||(o=!0,pv(u,p));u=u.next}while(o);tm=!1}}function tx(){dv()}function dv(){qc=Zd=!1;var i=0;rr!==0&&hx()&&(i=rr);for(var r=ft(),o=null,u=Fc;u!==null;){var d=u.next,p=mv(u,r);p===0?(u.next=null,o===null?Fc=d:o.next=d,d===null&&(so=o)):(o=u,(i!==0||(p&3)!==0)&&(qc=!0)),u=d}rn!==0&&rn!==5||Nl(i),rr!==0&&(rr=0)}function mv(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,d=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var _=31-je(p),T=1<<_,P=d[_];P===-1?((T&o)===0||(T&u)!==0)&&(d[_]=Mf(T,r)):P<=r&&(i.expiredLanes|=T),p&=~T}if(r=Se,o=Wt,o=zi(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(pe===2||pe===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&k(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||bi(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&k(u),cs(o)){case 2:case 8:o=Bt;break;case 32:o=Gt;break;case 268435456:o=Ne;break;default:o=Gt}return u=gv.bind(null,i),o=me(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&k(u),i.callbackPriority=2,i.callbackNode=null,2}function gv(i,r){if(rn!==0&&rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Bc()&&i.callbackNode!==o)return null;var u=Wt;return u=zi(i,i===Se?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(X0(i,u,r),mv(i,ft()),i.callbackNode!=null&&i.callbackNode===o?gv.bind(null,i):null)}function pv(i,r){if(Bc())return null;X0(i,r,!0)}function ex(){dx(function(){(ce&6)!==0?me(Rt,tx):dv()})}function em(){if(rr===0){var i=qa;i===0&&(i=Pi,Pi<<=1,(Pi&261888)===0&&(Pi=256)),rr=i}return rr}function yv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ra(""+i)}function vv(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function nx(i,r,o,u,d){if(r==="submit"&&o&&o.stateNode===d){var p=yv((d[ln]||null).action),_=u.submitter;_&&(r=(r=_[ln]||null)?yv(r.formAction):_.getAttribute("formAction"),r!==null&&(p=r,_=null));var T=new Ki("action","action",null,u,d);i.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(rr!==0){var P=_?vv(d,_):new FormData(d);wd(o,{pending:!0,data:P,method:d.method,action:p},null,P)}}else typeof p=="function"&&(T.preventDefault(),P=_?vv(d,_):new FormData(d),wd(o,{pending:!0,data:P,method:d.method,action:p},p,P))},currentTarget:d}]})}}for(var nm=0;nm<Lf.length;nm++){var im=Lf[nm],ix=im.toLowerCase(),sx=im[0].toUpperCase()+im.slice(1);Ci(ix,"on"+sx)}Ci($p,"onAnimationEnd"),Ci(Xp,"onAnimationIteration"),Ci(Wp,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(_T,"onTransitionRun"),Ci(wT,"onTransitionStart"),Ci(ET,"onTransitionCancel"),Ci(Jp,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function bv(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],d=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],P=T.instance,H=T.currentTarget;if(T=T.listener,P!==p&&d.isPropagationStopped())break t;p=T,d.currentTarget=H;try{p(d)}catch(tt){sc(tt)}d.currentTarget=null,p=P}else for(_=0;_<u.length;_++){if(T=u[_],P=T.instance,H=T.currentTarget,T=T.listener,P!==p&&d.isPropagationStopped())break t;p=T,d.currentTarget=H;try{p(d)}catch(tt){sc(tt)}d.currentTarget=null,p=P}}}}function $t(i,r){var o=r[Sa];o===void 0&&(o=r[Sa]=new Set);var u=i+"__bubble";o.has(u)||(_v(r,i,2,!1),o.add(u))}function sm(i,r,o){var u=0;r&&(u|=4),_v(o,i,u,r)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function rm(i){if(!i[Yc]){i[Yc]=!0,qo.forEach(function(o){o!=="selectionchange"&&(rx.has(o)||sm(o,!1,i),sm(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Yc]||(r[Yc]=!0,sm("selectionchange",!1,r))}}function _v(i,r,o,u){switch($v(r)){case 2:var d=Ix;break;case 8:d=Vx;break;default:d=_m}o=d.bind(null,r,o,i),d=void 0,!Pr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),u?d!==void 0?i.addEventListener(r,o,{capture:!0,passive:d}):i.addEventListener(r,o,!0):d!==void 0?i.addEventListener(r,o,{passive:d}):i.addEventListener(r,o,!1)}function am(i,r,o,u,d){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=u.return;_!==null;){var P=_.tag;if((P===3||P===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=Bi(T),_===null)return;if(P=_.tag,P===5||P===6||P===26||P===27){u=p=_;continue t}T=T.parentNode}}u=u.return}Us(function(){var H=p,tt=ri(o),st=[];t:{var Q=Zp.get(i);if(Q!==void 0){var X=Ki,Mt=i;switch(i){case"keypress":if(zr(o)===0)break t;case"keydown":case"keyup":X=ec;break;case"focusin":Mt="focus",X=jr;break;case"focusout":Mt="blur",X=jr;break;case"beforeblur":case"afterblur":X=jr;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=v;break;case $p:case Xp:case Wp:X=Ku;break;case Jp:X=C;break;case"scroll":case"scrollend":X=el;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ds;break;case"toggle":case"beforetoggle":X=Ft}var Vt=(r&4)!==0,Ee=!Vt&&(i==="scroll"||i==="scrollend"),F=Vt?Q!==null?Q+"Capture":null:Q;Vt=[];for(var j=H,Y;j!==null;){var et=j;if(Y=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||Y===null||F===null||(et=Si(j,F),et!=null&&Vt.push(Ol(j,et,Y))),Ee)break;j=j.return}0<Vt.length&&(Q=new X(Q,Mt,null,o,tt),st.push({event:Q,listeners:Vt}))}}if((r&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",Q&&o!==Jo&&(Mt=o.relatedTarget||o.fromElement)&&(Bi(Mt)||Mt[ji]))break t;if((X||Q)&&(Q=tt.window===tt?tt:(Q=tt.ownerDocument)?Q.defaultView||Q.parentWindow:window,X?(Mt=o.relatedTarget||o.toElement,X=H,Mt=Mt?Bi(Mt):null,Mt!==null&&(Ee=l(Mt),Vt=Mt.tag,Mt!==Ee||Vt!==5&&Vt!==27&&Vt!==6)&&(Mt=null)):(X=null,Mt=H),X!==Mt)){if(Vt=nl,et="onMouseLeave",F="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Vt=ds,et="onPointerLeave",F="onPointerEnter",j="pointer"),Ee=X==null?Q:Qn(X),Y=Mt==null?Q:Qn(Mt),Q=new Vt(et,j+"leave",X,o,tt),Q.target=Ee,Q.relatedTarget=Y,et=null,Bi(tt)===H&&(Vt=new Vt(F,j+"enter",Mt,o,tt),Vt.target=Y,Vt.relatedTarget=Ee,et=Vt),Ee=et,X&&Mt)e:{for(Vt=ax,F=X,j=Mt,Y=0,et=F;et;et=Vt(et))Y++;et=0;for(var Ot=j;Ot;Ot=Vt(Ot))et++;for(;0<Y-et;)F=Vt(F),Y--;for(;0<et-Y;)j=Vt(j),et--;for(;Y--;){if(F===j||j!==null&&F===j.alternate){Vt=F;break e}F=Vt(F),j=Vt(j)}Vt=null}else Vt=null;X!==null&&wv(st,Q,X,Vt,!1),Mt!==null&&Ee!==null&&wv(st,Ee,Mt,Vt,!0)}}t:{if(Q=H?Qn(H):window,X=Q.nodeName&&Q.nodeName.toLowerCase(),X==="select"||X==="input"&&Q.type==="file")var oe=Lp;else if(kp(Q))if(jp)oe=yT;else{oe=gT;var Nt=mT}else X=Q.nodeName,!X||X.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Ca(H.elementType)&&(oe=Lp):oe=pT;if(oe&&(oe=oe(i,H))){zp(st,oe,o,tt);break t}Nt&&Nt(i,Q,H),i==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&$o(Q,"number",Q.value)}switch(Nt=H?Qn(H):window,i){case"focusin":(kp(Nt)||Nt.contentEditable==="true")&&(Pa=Nt,Pf=H,ol=null);break;case"focusout":ol=Pf=Pa=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,Gp(st,o,tt);break;case"selectionchange":if(bT)break;case"keydown":case"keyup":Gp(st,o,tt)}var Qt;if(ue)t:{switch(i){case"compositionstart":var Jt="onCompositionStart";break t;case"compositionend":Jt="onCompositionEnd";break t;case"compositionupdate":Jt="onCompositionUpdate";break t}Jt=void 0}else Va?Ur(i,o)&&(Jt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Jt="onCompositionStart");Jt&&(Wi&&o.locale!=="ko"&&(Va||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Va&&(Qt=tl()):(Gi=tt,Zo="value"in Gi?Gi.value:Gi.textContent,Va=!0)),Nt=Hc(H,Jt),0<Nt.length&&(Jt=new Xi(Jt,i,null,o,tt),st.push({event:Jt,listeners:Nt}),Qt?Jt.data=Qt:(Qt=Ia(o),Qt!==null&&(Jt.data=Qt)))),(Qt=oi?cT(i,o):hT(i,o))&&(Jt=Hc(H,"onBeforeInput"),0<Jt.length&&(Nt=new Xi("onBeforeInput","beforeinput",null,o,tt),st.push({event:Nt,listeners:Jt}),Nt.data=Qt)),nx(st,i,H,o,tt)}bv(st,r)})}function Ol(i,r,o){return{instance:i,listener:r,currentTarget:o}}function Hc(i,r){for(var o=r+"Capture",u=[];i!==null;){var d=i,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Si(i,o),d!=null&&u.unshift(Ol(i,d,p)),d=Si(i,r),d!=null&&u.push(Ol(i,d,p))),i.tag===3)return u;i=i.return}return[]}function ax(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function wv(i,r,o,u,d){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,P=T.alternate,H=T.stateNode;if(T=T.tag,P!==null&&P===u)break;T!==5&&T!==26&&T!==27||H===null||(P=H,d?(H=Si(o,p),H!=null&&_.unshift(Ol(o,H,P))):d||(H=Si(o,p),H!=null&&_.push(Ol(o,H,P)))),o=o.return}_.length!==0&&i.push({event:r,listeners:_})}var ox=/\r\n?/g,lx=/\u0000|\uFFFD/g;function Ev(i){return(typeof i=="string"?i:""+i).replace(ox,`
`).replace(lx,"")}function Sv(i,r){return r=Ev(r),Ev(i)===r}function we(i,r,o,u,d,p){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||kn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&kn(i,""+u);break;case"className":Gn(i,"class",u);break;case"tabIndex":Gn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(i,o,u);break;case"style":Wo(i,u,p);break;case"data":if(r!=="object"){Gn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ra(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&we(i,r,"name",d.name,d,null),we(i,r,"formEncType",d.formEncType,d,null),we(i,r,"formMethod",d.formMethod,d,null),we(i,r,"formTarget",d.formTarget,d,null)):(we(i,r,"encType",d.encType,d,null),we(i,r,"method",d.method,d,null),we(i,r,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ra(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Ei);break;case"onScroll":u!=null&&$t("scroll",i);break;case"onScrollEnd":u!=null&&$t("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ra(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":$t("beforetoggle",i),$t("toggle",i),xa(i,"popover",u);break;case"xlinkActuate":Xe(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xe(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xe(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xe(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xe(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xe(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xe(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xe(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xe(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":xa(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hu.get(o)||o,xa(i,o,u))}}function om(i,r,o,u,d,p){switch(o){case"style":Wo(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"children":typeof u=="string"?kn(i,u):(typeof u=="number"||typeof u=="bigint")&&kn(i,""+u);break;case"onScroll":u!=null&&$t("scroll",i);break;case"onScrollEnd":u!=null&&$t("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),p=i[ln]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(r,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,d);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):xa(i,o,u)}}}function vn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",i),$t("load",i);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var _=o[p];if(_!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:we(i,r,p,_,o,null)}}d&&we(i,r,"srcSet",o.srcSet,o,null),u&&we(i,r,"src",o.src,o,null);return;case"input":$t("invalid",i);var T=p=_=d=null,P=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var tt=o[u];if(tt!=null)switch(u){case"name":d=tt;break;case"type":_=tt;break;case"checked":P=tt;break;case"defaultChecked":H=tt;break;case"value":p=tt;break;case"defaultValue":T=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(137,r));break;default:we(i,r,u,tt,o,null)}}Fu(i,p,T,P,H,_,d,!1);return;case"select":$t("invalid",i),u=_=p=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":p=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:we(i,r,d,T,o,null)}r=p,o=_,i.multiple=!!u,r!=null?ks(i,!!u,r,!1):o!=null&&ks(i,!!u,o,!0);return;case"textarea":$t("invalid",i),p=d=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":d=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:we(i,r,_,T,o,null)}zs(i,u,d,p);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(u=o[P],u!=null))switch(P){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:we(i,r,P,u,o,null)}return;case"dialog":$t("beforetoggle",i),$t("toggle",i),$t("cancel",i),$t("close",i);break;case"iframe":case"object":$t("load",i);break;case"video":case"audio":for(u=0;u<Dl.length;u++)$t(Dl[u],i);break;case"image":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"embed":case"source":case"link":$t("error",i),$t("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:we(i,r,H,u,o,null)}return;default:if(Ca(r)){for(tt in o)o.hasOwnProperty(tt)&&(u=o[tt],u!==void 0&&om(i,r,tt,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&we(i,r,T,u,o,null))}function ux(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,_=null,T=null,P=null,H=null,tt=null;for(X in o){var st=o[X];if(o.hasOwnProperty(X)&&st!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":P=st;default:u.hasOwnProperty(X)||we(i,r,X,null,u,st)}}for(var Q in u){var X=u[Q];if(st=o[Q],u.hasOwnProperty(Q)&&(X!=null||st!=null))switch(Q){case"type":p=X;break;case"name":d=X;break;case"checked":H=X;break;case"defaultChecked":tt=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,r));break;default:X!==st&&we(i,r,Q,X,u,st)}}Aa(i,_,T,P,H,tt,p,d);return;case"select":X=_=T=Q=null;for(p in o)if(P=o[p],o.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":X=P;default:u.hasOwnProperty(p)||we(i,r,p,null,u,P)}for(d in u)if(p=u[d],P=o[d],u.hasOwnProperty(d)&&(p!=null||P!=null))switch(d){case"value":Q=p;break;case"defaultValue":T=p;break;case"multiple":_=p;default:p!==P&&we(i,r,d,p,u,P)}r=T,o=_,u=X,Q!=null?ks(i,!!o,Q,!1):!!u!=!!o&&(r!=null?ks(i,!!o,r,!0):ks(i,!!o,o?[]:"",!1));return;case"textarea":X=Q=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:we(i,r,T,null,u,d)}for(_ in u)if(d=u[_],p=o[_],u.hasOwnProperty(_)&&(d!=null||p!=null))switch(_){case"value":Q=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==p&&we(i,r,_,d,u,p)}qu(i,Q,X);return;case"option":for(var Mt in o)if(Q=o[Mt],o.hasOwnProperty(Mt)&&Q!=null&&!u.hasOwnProperty(Mt))switch(Mt){case"selected":i.selected=!1;break;default:we(i,r,Mt,null,u,Q)}for(P in u)if(Q=u[P],X=o[P],u.hasOwnProperty(P)&&Q!==X&&(Q!=null||X!=null))switch(P){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:we(i,r,P,Q,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in o)Q=o[Vt],o.hasOwnProperty(Vt)&&Q!=null&&!u.hasOwnProperty(Vt)&&we(i,r,Vt,null,u,Q);for(H in u)if(Q=u[H],X=o[H],u.hasOwnProperty(H)&&Q!==X&&(Q!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:we(i,r,H,Q,u,X)}return;default:if(Ca(r)){for(var Ee in o)Q=o[Ee],o.hasOwnProperty(Ee)&&Q!==void 0&&!u.hasOwnProperty(Ee)&&om(i,r,Ee,void 0,u,Q);for(tt in u)Q=u[tt],X=o[tt],!u.hasOwnProperty(tt)||Q===X||Q===void 0&&X===void 0||om(i,r,tt,Q,u,X);return}}for(var F in o)Q=o[F],o.hasOwnProperty(F)&&Q!=null&&!u.hasOwnProperty(F)&&we(i,r,F,null,u,Q);for(st in u)Q=u[st],X=o[st],!u.hasOwnProperty(st)||Q===X||Q==null&&X==null||we(i,r,st,Q,u,X)}function Tv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,_=d.initiatorType,T=d.duration;if(p&&T&&Tv(_)){for(_=0,T=d.responseEnd,u+=1;u<o.length;u++){var P=o[u],H=P.startTime;if(H>T)break;var tt=P.transferSize,st=P.initiatorType;tt&&Tv(st)&&(P=P.responseEnd,_+=tt*(P<T?1:(T-H)/(P-H)))}if(--u,r+=8*(p+_)/(d.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var lm=null,um=null;function Qc(i){return i.nodeType===9?i:i.ownerDocument}function xv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function cm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hm=null;function hx(){var i=window.event;return i&&i.type==="popstate"?i===hm?!1:(hm=i,!0):(hm=null,!1)}var Cv=typeof setTimeout=="function"?setTimeout:void 0,fx=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(i){return Rv.resolve(null).then(i).catch(mx)}:Cv;function mx(i){setTimeout(function(){throw i})}function ar(i){return i==="head"}function Mv(i,r){var o=r,u=0;do{var d=o.nextSibling;if(i.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(d),lo(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Il(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Il(o);for(var p=o.firstChild;p;){var _=p.nextSibling,T=p.nodeName;p[Ui]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=_}}else o==="body"&&Il(i.ownerDocument.body);o=d}while(o);lo(r)}function Nv(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function fm(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":fm(o),Ta(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function gx(i,r,o,u){for(;i.nodeType===1;){var d=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ui])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==d.rel||i.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||i.getAttribute("title")!==(d.title==null?null:d.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(d.src==null?null:d.src)||i.getAttribute("type")!==(d.type==null?null:d.type)||i.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=mi(i.nextSibling),i===null)break}return null}function px(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=mi(i.nextSibling),i===null))return null;return i}function Dv(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=mi(i.nextSibling),i===null))return null;return i}function dm(i){return i.data==="$?"||i.data==="$~"}function mm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function yx(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function mi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var gm=null;function Ov(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return mi(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function Iv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function Vv(i,r,o){switch(r=Qc(o),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Il(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ta(i)}var gi=new Map,Pv=new Set;function Gc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Rs=dt.d;dt.d={f:vx,r:bx,D:_x,C:wx,L:Ex,m:Sx,X:xx,S:Tx,M:Ax};function vx(){var i=Rs.f(),r=Lc();return i||r}function bx(i){var r=si(i);r!==null&&r.tag===5&&r.type==="form"?Jy(r):Rs.r(i)}var ro=typeof document>"u"?null:document;function kv(i,r,o){var u=ro;if(u&&typeof r=="string"&&r){var d=Pn(r);d='link[rel="'+i+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Pv.has(d)||(Pv.add(d),i={rel:i,crossOrigin:o,href:r},u.querySelector(d)===null&&(r=u.createElement("link"),vn(r,"link",i),$e(r),u.head.appendChild(r)))}}function _x(i){Rs.D(i),kv("dns-prefetch",i,null)}function wx(i,r){Rs.C(i,r),kv("preconnect",i,r)}function Ex(i,r,o){Rs.L(i,r,o);var u=ro;if(u&&i&&r){var d='link[rel="preload"][as="'+Pn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Pn(o.imageSizes)+'"]')):d+='[href="'+Pn(i)+'"]';var p=d;switch(r){case"style":p=ao(i);break;case"script":p=oo(i)}gi.has(p)||(i=b({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),gi.set(p,i),u.querySelector(d)!==null||r==="style"&&u.querySelector(Vl(p))||r==="script"&&u.querySelector(Pl(p))||(r=u.createElement("link"),vn(r,"link",i),$e(r),u.head.appendChild(r)))}}function Sx(i,r){Rs.m(i,r);var o=ro;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Pn(u)+'"][href="'+Pn(i)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=oo(i)}if(!gi.has(p)&&(i=b({rel:"modulepreload",href:i},r),gi.set(p,i),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Pl(p)))return}u=o.createElement("link"),vn(u,"link",i),$e(u),o.head.appendChild(u)}}}function Tx(i,r,o){Rs.S(i,r,o);var u=ro;if(u&&i){var d=Fi(u).hoistableStyles,p=ao(i);r=r||"default";var _=d.get(p);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(Vl(p)))T.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":r},o),(o=gi.get(p))&&pm(i,o);var P=_=u.createElement("link");$e(P),vn(P,"link",i),P._p=new Promise(function(H,tt){P.onload=H,P.onerror=tt}),P.addEventListener("load",function(){T.loading|=1}),P.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Kc(_,r,u)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(p,_)}}}function xx(i,r){Rs.X(i,r);var o=ro;if(o&&i){var u=Fi(o).hoistableScripts,d=oo(i),p=u.get(d);p||(p=o.querySelector(Pl(d)),p||(i=b({src:i,async:!0},r),(r=gi.get(d))&&ym(i,r),p=o.createElement("script"),$e(p),vn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function Ax(i,r){Rs.M(i,r);var o=ro;if(o&&i){var u=Fi(o).hoistableScripts,d=oo(i),p=u.get(d);p||(p=o.querySelector(Pl(d)),p||(i=b({src:i,async:!0,type:"module"},r),(r=gi.get(d))&&ym(i,r),p=o.createElement("script"),$e(p),vn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function zv(i,r,o,u){var d=(d=_t.current)?Gc(d):null;if(!d)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ao(o.href),o=Fi(d).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ao(o.href);var p=Fi(d).hoistableStyles,_=p.get(i);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,_),(p=d.querySelector(Vl(i)))&&!p._p&&(_.instance=p,_.state.loading=5),gi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},gi.set(i,o),p||Cx(d,i,o,_.state))),r&&u===null)throw Error(n(528,""));return _}if(r&&u!==null)throw Error(n(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oo(o),o=Fi(d).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function ao(i){return'href="'+Pn(i)+'"'}function Vl(i){return'link[rel="stylesheet"]['+i+"]"}function Lv(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function Cx(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),vn(r,"link",o),$e(r),i.head.appendChild(r))}function oo(i){return'[src="'+Pn(i)+'"]'}function Pl(i){return"script[async]"+i}function jv(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Pn(o.href)+'"]');if(u)return r.instance=u,$e(u),u;var d=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),$e(u),vn(u,"style",d),Kc(u,o.precedence,i),r.instance=u;case"stylesheet":d=ao(o.href);var p=i.querySelector(Vl(d));if(p)return r.state.loading|=4,r.instance=p,$e(p),p;u=Lv(o),(d=gi.get(d))&&pm(u,d),p=(i.ownerDocument||i).createElement("link"),$e(p);var _=p;return _._p=new Promise(function(T,P){_.onload=T,_.onerror=P}),vn(p,"link",u),r.state.loading|=4,Kc(p,o.precedence,i),r.instance=p;case"script":return p=oo(o.src),(d=i.querySelector(Pl(p)))?(r.instance=d,$e(d),d):(u=o,(d=gi.get(p))&&(u=b({},o),ym(u,d)),i=i.ownerDocument||i,d=i.createElement("script"),$e(d),vn(d,"link",u),i.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Kc(u,o.precedence,i));return r.instance}function Kc(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===r)p=T;else if(p!==d)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function pm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function ym(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var $c=null;function Uv(i,r,o){if($c===null){var u=new Map,d=$c=new Map;d.set(o,u)}else d=$c,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),d=0;d<o.length;d++){var p=o[d];if(!(p[Ui]||p[Ke]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(r)||"";_=i+_;var T=u.get(_);T?T.push(p):u.set(_,[p])}}return u}function Bv(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function Rx(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Fv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Mx(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=ao(u.href),p=r.querySelector(Vl(d));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Xc.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=p,$e(p);return}p=r.ownerDocument||r,u=Lv(u),(d=gi.get(d))&&pm(u,d),p=p.createElement("link"),$e(p);var _=p;_._p=new Promise(function(T,P){_.onload=T,_.onerror=P}),vn(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Xc.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var vm=0;function Nx(i,r){return i.stylesheets&&i.count===0&&Jc(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Jc(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+r);0<i.imgBytes&&vm===0&&(vm=62500*cx());var d=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Jc(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>vm?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wc=null;function Jc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wc=new Map,r.forEach(Dx,i),Wc=null,Xc.call(i))}function Dx(i,r){if(!(r.state.loading&4)){var o=Wc.get(i);if(o)var u=o.get(null);else{o=new Map,Wc.set(i,o);for(var d=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var _=d[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}d=r.instance,_=d.getAttribute("data-precedence"),p=o.get(_)||u,p===u&&o.set(null,d),o.set(_,d),this.count++,u=Xc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(d,i.firstChild)),r.state.loading|=4}}var kl={$$typeof:rt,Provider:null,Consumer:null,_currentValue:bt,_currentValue2:bt,_threadCount:0};function Ox(i,r,o,u,d,p,_,T,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function qv(i,r,o,u,d,p,_,T,P,H,tt,st){return i=new Ox(i,r,o,_,P,H,tt,st,T),r=1,p===!0&&(r|=24),p=$n(3,null,null,r),i.current=p,p.stateNode=i,r=Wf(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:r},ed(p),i}function Yv(i){return i?(i=La,i):La}function Hv(i,r,o,u,d,p){d=Yv(d),u.context===null?u.context=d:u.pendingContext=d,u=$s(r),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Xs(i,u,r),o!==null&&(Bn(o,i,r),ml(o,i,r))}function Qv(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function bm(i,r){Qv(i,r),(i=i.alternate)&&Qv(i,r)}function Gv(i){if(i.tag===13||i.tag===31){var r=qr(i,67108864);r!==null&&Bn(r,i,67108864),bm(i,67108864)}}function Kv(i){if(i.tag===13||i.tag===31){var r=ti();r=Dr(r);var o=qr(i,r);o!==null&&Bn(o,i,r),bm(i,r)}}var Zc=!0;function Ix(i,r,o,u){var d=G.T;G.T=null;var p=dt.p;try{dt.p=2,_m(i,r,o,u)}finally{dt.p=p,G.T=d}}function Vx(i,r,o,u){var d=G.T;G.T=null;var p=dt.p;try{dt.p=8,_m(i,r,o,u)}finally{dt.p=p,G.T=d}}function _m(i,r,o,u){if(Zc){var d=wm(u);if(d===null)am(i,r,u,th,o),Xv(i,u);else if(kx(d,i,r,o,u))u.stopPropagation();else if(Xv(i,u),r&4&&-1<Px.indexOf(i)){for(;d!==null;){var p=si(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=ki(p.pendingLanes);if(_!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var P=1<<31-je(_);T.entanglements[1]|=P,_&=~P}es(p),(ce&6)===0&&(kc=ft()+500,Nl(0))}}break;case 31:case 13:T=qr(p,2),T!==null&&Bn(T,p,2),Lc(),bm(p,2)}if(p=wm(u),p===null&&am(i,r,u,th,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else am(i,r,u,null,o)}}function wm(i){return i=ri(i),Em(i)}var th=null;function Em(i){if(th=null,i=Bi(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===31){if(i=f(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return th=i,null}function $v(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case Rt:return 2;case Bt:return 8;case Gt:case ne:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Sm=!1,or=null,lr=null,ur=null,zl=new Map,Ll=new Map,cr=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xv(i,r){switch(i){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":zl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function jl(i,r,o,u,d,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},r!==null&&(r=si(r),r!==null&&Gv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),i)}function kx(i,r,o,u,d){switch(r){case"focusin":return or=jl(or,i,r,o,u,d),!0;case"dragenter":return lr=jl(lr,i,r,o,u,d),!0;case"mouseover":return ur=jl(ur,i,r,o,u,d),!0;case"pointerover":var p=d.pointerId;return zl.set(p,jl(zl.get(p)||null,i,r,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Ll.set(p,jl(Ll.get(p)||null,i,r,o,u,d)),!0}return!1}function Wv(i){var r=Bi(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,_i(i.priority,function(){Kv(o)});return}}else if(r===31){if(r=f(o),r!==null){i.blockedOn=r,_i(i.priority,function(){Kv(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function eh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=wm(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);Jo=u,o.target.dispatchEvent(u),Jo=null}else return r=si(o),r!==null&&Gv(r),i.blockedOn=o,!1;r.shift()}return!0}function Jv(i,r,o){eh(i)&&o.delete(r)}function zx(){Sm=!1,or!==null&&eh(or)&&(or=null),lr!==null&&eh(lr)&&(lr=null),ur!==null&&eh(ur)&&(ur=null),zl.forEach(Jv),Ll.forEach(Jv)}function nh(i,r){i.blockedOn===r&&(i.blockedOn=null,Sm||(Sm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zx)))}var ih=null;function Zv(i){ih!==i&&(ih=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ih===i&&(ih=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],d=i[r+2];if(typeof u!="function"){if(Em(u||o)===null)continue;break}var p=si(o);p!==null&&(i.splice(r,3),r-=3,wd(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function lo(i){function r(P){return nh(P,i)}or!==null&&nh(or,i),lr!==null&&nh(lr,i),ur!==null&&nh(ur,i),zl.forEach(r),Ll.forEach(r);for(var o=0;o<cr.length;o++){var u=cr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<cr.length&&(o=cr[0],o.blockedOn===null);)Wv(o),o.blockedOn===null&&cr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],_=d[ln]||null;if(typeof p=="function")_||Zv(o);else if(_){var T=null;if(p&&p.hasAttribute("formAction")){if(d=p,_=p[ln]||null)T=_.formAction;else if(Em(d)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),Zv(o)}}}function tb(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Tm(i){this._internalRoot=i}sh.prototype.render=Tm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var o=r.current,u=ti();Hv(o,u,i,r,null,null)},sh.prototype.unmount=Tm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Hv(i.current,2,null,i,null,null),Lc(),r[ji]=null}};function sh(i){this._internalRoot=i}sh.prototype.unstable_scheduleHydration=function(i){if(i){var r=Lu();i={blockedOn:null,target:i,priority:r};for(var o=0;o<cr.length&&r!==0&&r<cr[o].priority;o++);cr.splice(o,0,i),o===0&&Wv(i)}};var eb=t.version;if(eb!=="19.2.1")throw Error(n(527,eb,"19.2.1"));dt.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=g(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var Lx={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Tn=rh.inject(Lx),De=rh}catch{}}return Bl.createRoot=function(i,r){if(!a(i))throw Error(n(299));var o=!1,u="",d=l0,p=u0,_=c0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=qv(i,1,!1,null,null,o,u,null,d,p,_,tb),i[ji]=r.current,rm(i),new Tm(r)},Bl.hydrateRoot=function(i,r,o){if(!a(i))throw Error(n(299));var u=!1,d="",p=l0,_=u0,T=c0,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),r=qv(i,1,!0,r,o??null,u,d,P,p,_,T,tb),r.context=Yv(null),o=r.current,u=ti(),u=Dr(u),d=$s(u),d.callback=null,Xs(o,d,u),o=u,r.current.lanes=o,Mr(r,o),es(r),i[ji]=r.current,rm(i),new sh(r)},Bl.version="19.2.1",Bl}var hb;function $x(){if(hb)return Cm.exports;hb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Cm.exports=Kx(),Cm.exports}var Xx=$x(),nf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wx={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},Jx=class{#t=Wx;#e=!1;setTimeoutProvider(s){this.#t=s}setTimeout(s,t){return this.#t.setTimeout(s,t)}clearTimeout(s){this.#t.clearTimeout(s)}setInterval(s,t){return this.#t.setInterval(s,t)}clearInterval(s){this.#t.clearInterval(s)}},lg=new Jx;function Zx(s){setTimeout(s,0)}var sf=typeof window>"u"||"Deno"in globalThis;function Ni(){}function t2(s,t){return typeof s=="function"?s(t):s}function e2(s){return typeof s=="number"&&s>=0&&s!==1/0}function n2(s,t){return Math.max(s+(t||0)-Date.now(),0)}function ug(s,t){return typeof s=="function"?s(t):s}function i2(s,t){return typeof s=="function"?s(t):s}function fb(s,t){const{type:e="all",exact:n,fetchStatus:a,predicate:l,queryKey:c,stale:f}=s;if(c){if(n){if(t.queryHash!==qg(c,t.options))return!1}else if(!uu(t.queryKey,c))return!1}if(e!=="all"){const m=t.isActive();if(e==="active"&&!m||e==="inactive"&&m)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||a&&a!==t.state.fetchStatus||l&&!l(t))}function db(s,t){const{exact:e,status:n,predicate:a,mutationKey:l}=s;if(l){if(!t.options.mutationKey)return!1;if(e){if(lu(t.options.mutationKey)!==lu(l))return!1}else if(!uu(t.options.mutationKey,l))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function qg(s,t){return(t?.queryKeyHashFn||lu)(s)}function lu(s){return JSON.stringify(s,(t,e)=>cg(e)?Object.keys(e).sort().reduce((n,a)=>(n[a]=e[a],n),{}):e)}function uu(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(e=>uu(s[e],t[e])):!1}var s2=Object.prototype.hasOwnProperty;function sw(s,t){if(s===t)return s;const e=mb(s)&&mb(t);if(!e&&!(cg(s)&&cg(t)))return t;const a=(e?s:Object.keys(s)).length,l=e?t:Object.keys(t),c=l.length,f=e?new Array(c):{};let m=0;for(let g=0;g<c;g++){const y=e?g:l[g],b=s[y],E=t[y];if(b===E){f[y]=b,(e?g<a:s2.call(s,y))&&m++;continue}if(b===null||E===null||typeof b!="object"||typeof E!="object"){f[y]=E;continue}const A=sw(b,E);f[y]=A,A===b&&m++}return a===c&&m===a?s:f}function mb(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function cg(s){if(!gb(s))return!1;const t=s.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!gb(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function gb(s){return Object.prototype.toString.call(s)==="[object Object]"}function r2(s){return new Promise(t=>{lg.setTimeout(t,s)})}function a2(s,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(s,t):e.structuralSharing!==!1?sw(s,t):t}function o2(s,t,e=0){const n=[...s,t];return e&&n.length>e?n.slice(1):n}function l2(s,t,e=0){const n=[t,...s];return e&&n.length>e?n.slice(0,-1):n}var Yg=Symbol();function rw(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===Yg?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var u2=class extends nf{#t;#e;#n;constructor(){super(),this.#n=s=>{if(!sf&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#n=s,this.#e?.(),this.#e=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#t!==s&&(this.#t=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},aw=new u2;function c2(){let s,t;const e=new Promise((a,l)=>{s=a,t=l});e.status="pending",e.catch(()=>{});function n(a){Object.assign(e,a),delete e.resolve,delete e.reject}return e.resolve=a=>{n({status:"fulfilled",value:a}),s(a)},e.reject=a=>{n({status:"rejected",reason:a}),t(a)},e}var h2=Zx;function f2(){let s=[],t=0,e=f=>{f()},n=f=>{f()},a=h2;const l=f=>{t?s.push(f):a(()=>{e(f)})},c=()=>{const f=s;s=[],f.length&&a(()=>{n(()=>{f.forEach(m=>{e(m)})})})};return{batch:f=>{let m;t++;try{m=f()}finally{t--,t||c()}return m},batchCalls:f=>(...m)=>{l(()=>{f(...m)})},schedule:l,setNotifyFunction:f=>{e=f},setBatchNotifyFunction:f=>{n=f},setScheduler:f=>{a=f}}}var On=f2(),d2=class extends nf{#t=!0;#e;#n;constructor(){super(),this.#n=s=>{if(!sf&&window.addEventListener){const t=()=>s(!0),e=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(s){this.#n=s,this.#e?.(),this.#e=s(this.setOnline.bind(this))}setOnline(s){this.#t!==s&&(this.#t=s,this.listeners.forEach(e=>{e(s)}))}isOnline(){return this.#t}},Ih=new d2;function m2(s){return Math.min(1e3*2**s,3e4)}function ow(s){return(s??"online")==="online"?Ih.isOnline():!0}var hg=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function lw(s){let t=!1,e=0,n;const a=c2(),l=()=>a.status!=="pending",c=R=>{if(!l()){const D=new hg(R);E(D),s.onCancel?.(D)}},f=()=>{t=!0},m=()=>{t=!1},g=()=>aw.isFocused()&&(s.networkMode==="always"||Ih.isOnline())&&s.canRun(),y=()=>ow(s.networkMode)&&s.canRun(),b=R=>{l()||(n?.(),a.resolve(R))},E=R=>{l()||(n?.(),a.reject(R))},A=()=>new Promise(R=>{n=D=>{(l()||g())&&R(D)},s.onPause?.()}).then(()=>{n=void 0,l()||s.onContinue?.()}),x=()=>{if(l())return;let R;const D=e===0?s.initialPromise:void 0;try{R=D??s.fn()}catch(B){R=Promise.reject(B)}Promise.resolve(R).then(b).catch(B=>{if(l())return;const Z=s.retry??(sf?0:3),rt=s.retryDelay??m2,gt=typeof rt=="function"?rt(e,B):rt,yt=Z===!0||typeof Z=="number"&&e<Z||typeof Z=="function"&&Z(e,B);if(t||!yt){E(B);return}e++,s.onFail?.(e,B),r2(gt).then(()=>g()?void 0:A()).then(()=>{t?E(B):x()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(n?.(),a),cancelRetry:f,continueRetry:m,canStart:y,start:()=>(y()?x():A().then(x),a)}}var uw=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),e2(this.gcTime)&&(this.#t=lg.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(sf?1/0:300*1e3))}clearGcTimeout(){this.#t&&(lg.clearTimeout(this.#t),this.#t=void 0)}},g2=class extends uw{#t;#e;#n;#s;#i;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#n=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=yb(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=yb(this.options);e.data!==void 0&&(this.setState(pb(e.data,e.dataUpdatedAt)),this.#t=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=a2(this.state.data,t,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#r({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(Ni).catch(Ni):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>i2(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ug(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!n2(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},l=()=>{const m=rw(this.options,e),y=(()=>{const b={client:this.#s,queryKey:this.queryKey,meta:this.meta};return a(b),b})();return this.#o=!1,this.options.persister?this.options.persister(m,y,this):m(y)},f=(()=>{const m={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:l};return a(m),m})();this.options.behavior?.onFetch(f,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#r({type:"fetch",meta:f.fetchOptions?.meta}),this.#i=lw({initialPromise:e?.initialPromise,fn:f.fetchFn,onCancel:m=>{m instanceof hg&&m.revert&&this.setState({...this.#e,fetchStatus:"idle"}),n.abort()},onFail:(m,g)=>{this.#r({type:"failed",failureCount:m,error:g})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const m=await this.#i.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#n.config.onSuccess?.(m,this),this.#n.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof hg){if(m.silent)return this.#i.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#r({type:"error",error:m}),this.#n.config.onError?.(m,this),this.#n.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...p2(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...pb(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=t.manual?a:void 0,a;case"error":const l=t.error;return{...n,error:l,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),On.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function p2(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ow(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function pb(s,t){return{data:s,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yb(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,e=t!==void 0,n=e?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}function vb(s){return{onFetch:(t,e)=>{const n=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let f={pages:[],pageParams:[]},m=0;const g=async()=>{let y=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},E=rw(t.options,t.fetchOptions),A=async(x,R,D)=>{if(y)return Promise.reject();if(R==null&&x.pages.length)return Promise.resolve(x);const Z=(()=>{const xt={client:t.client,queryKey:t.queryKey,pageParam:R,direction:D?"backward":"forward",meta:t.options.meta};return b(xt),xt})(),rt=await E(Z),{maxPages:gt}=t.options,yt=D?l2:o2;return{pages:yt(x.pages,rt,gt),pageParams:yt(x.pageParams,R,gt)}};if(a&&l.length){const x=a==="backward",R=x?y2:bb,D={pages:l,pageParams:c},B=R(n,D);f=await A(D,B,x)}else{const x=s??l.length;do{const R=m===0?c[0]??n.initialPageParam:bb(n,f);if(m>0&&R==null)break;f=await A(f,R),m++}while(m<x)}return f};t.options.persister?t.fetchFn=()=>t.options.persister?.(g,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e):t.fetchFn=g}}}function bb(s,{pages:t,pageParams:e}){const n=t.length-1;return t.length>0?s.getNextPageParam(t[n],t,e[n],e):void 0}function y2(s,{pages:t,pageParams:e}){return t.length>0?s.getPreviousPageParam?.(t[0],t,e[0],e):void 0}var v2=class extends uw{#t;#e;#n;#s;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#e=[],this.state=t.state||b2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=lw({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(c,f)=>{this.#i({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const a=this.state.status==="pending",l=!this.#s.canStart();try{if(a)e();else{this.#i({type:"pending",variables:t,isPaused:l}),await this.#n.config.onMutate?.(t,this,n);const f=await this.options.onMutate?.(t,n);f!==this.state.context&&this.#i({type:"pending",context:f,variables:t,isPaused:l})}const c=await this.#s.start();return await this.#n.config.onSuccess?.(c,t,this.state.context,this,n),await this.options.onSuccess?.(c,t,this.state.context,n),await this.#n.config.onSettled?.(c,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(c,null,t,this.state.context,n),this.#i({type:"success",data:c}),c}catch(c){try{throw await this.#n.config.onError?.(c,t,this.state.context,this,n),await this.options.onError?.(c,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,c,t,this.state.context,n),c}finally{this.#i({type:"error",error:c})}}finally{this.#n.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),On.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function b2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _2=class extends nf{constructor(s={}){super(),this.config=s,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(s,t,e){const n=new v2({client:s,mutationCache:this,mutationId:++this.#n,options:s.defaultMutationOptions(t),state:e});return this.add(n),n}add(s){this.#t.add(s);const t=oh(s);if(typeof t=="string"){const e=this.#e.get(t);e?e.push(s):this.#e.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#t.delete(s)){const t=oh(s);if(typeof t=="string"){const e=this.#e.get(t);if(e)if(e.length>1){const n=e.indexOf(s);n!==-1&&e.splice(n,1)}else e[0]===s&&this.#e.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=oh(s);if(typeof t=="string"){const n=this.#e.get(t)?.find(a=>a.state.status==="pending");return!n||n===s}else return!0}runNext(s){const t=oh(s);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){On.batch(()=>{this.#t.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(s){const t={exact:!0,...s};return this.getAll().find(e=>db(t,e))}findAll(s={}){return this.getAll().filter(t=>db(s,t))}notify(s){On.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return On.batch(()=>Promise.all(s.map(t=>t.continue().catch(Ni))))}};function oh(s){return s.options.scope?.id}var w2=class extends nf{constructor(s={}){super(),this.config=s,this.#t=new Map}#t;build(s,t,e){const n=t.queryKey,a=t.queryHash??qg(n,t);let l=this.get(a);return l||(l=new g2({client:s,queryKey:n,queryHash:a,options:s.defaultQueryOptions(t),state:e,defaultOptions:s.getQueryDefaults(n)}),this.add(l)),l}add(s){this.#t.has(s.queryHash)||(this.#t.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#t.get(s.queryHash);t&&(s.destroy(),t===s&&this.#t.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){On.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#t.get(s)}getAll(){return[...this.#t.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(e=>fb(t,e))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(e=>fb(s,e)):t}notify(s){On.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){On.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},E2=class{#t;#e;#n;#s;#i;#a;#o;#r;constructor(s={}){this.#t=s.queryCache||new w2,this.#e=s.mutationCache||new _2,this.#n=s.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=aw.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#r=Ih.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#r?.(),this.#r=void 0)}isFetching(s){return this.#t.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#e.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),e=this.#t.build(this,t),n=e.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&e.isStaleByTime(ug(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(s){return this.#t.findAll(s).map(({queryKey:t,state:e})=>{const n=e.data;return[t,n]})}setQueryData(s,t,e){const n=this.defaultQueryOptions({queryKey:s}),l=this.#t.get(n.queryHash)?.state.data,c=t2(t,l);if(c!==void 0)return this.#t.build(this,n).setData(c,{...e,manual:!0})}setQueriesData(s,t,e){return On.batch(()=>this.#t.findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,t,e)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#t.get(t.queryHash)?.state}removeQueries(s){const t=this.#t;On.batch(()=>{t.findAll(s).forEach(e=>{t.remove(e)})})}resetQueries(s,t){const e=this.#t;return On.batch(()=>(e.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const e={revert:!0,...t},n=On.batch(()=>this.#t.findAll(s).map(a=>a.cancel(e)));return Promise.all(n).then(Ni).catch(Ni)}invalidateQueries(s,t={}){return On.batch(()=>(this.#t.findAll(s).forEach(e=>{e.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},n=On.batch(()=>this.#t.findAll(s).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,e);return e.throwOnError||(l=l.catch(Ni)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(n).then(Ni)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const e=this.#t.build(this,t);return e.isStaleByTime(ug(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ni).catch(Ni)}fetchInfiniteQuery(s){return s.behavior=vb(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ni).catch(Ni)}ensureInfiniteQueryData(s){return s.behavior=vb(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Ih.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(s){this.#n=s}setQueryDefaults(s,t){this.#s.set(lu(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#s.values()],e={};return t.forEach(n=>{uu(s,n.queryKey)&&Object.assign(e,n.defaultOptions)}),e}setMutationDefaults(s,t){this.#i.set(lu(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#i.values()],e={};return t.forEach(n=>{uu(s,n.mutationKey)&&Object.assign(e,n.defaultOptions)}),e}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#n.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=qg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Yg&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#n.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},S2=nt.createContext(void 0),T2=({client:s,children:t})=>(nt.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),S.jsx(S2.Provider,{value:s,children:t}));const x2="modulepreload",A2=function(s){return"/back-test/"+s},_b={},cw=function(t,e,n){let a=Promise.resolve();if(e&&e.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};var c=g;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");a=g(e.map(y=>{if(y=A2(y),y in _b)return;_b[y]=!0;const b=y.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const A=document.createElement("link");if(A.rel=b?"stylesheet":x2,b||(A.as="script"),A.crossOrigin="",A.href=y,m&&A.setAttribute("nonce",m),document.head.appendChild(A),b)return new Promise((x,R)=>{A.addEventListener("load",x),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return a.then(f=>{for(const m of f||[])m.status==="rejected"&&l(m.reason);return t().catch(l)})};const C2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R2=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),wb=s=>{const t=R2(s);return t.charAt(0).toUpperCase()+t.slice(1)},hw=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),M2=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var N2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const D2=nt.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:l,iconNode:c,...f},m)=>nt.createElement("svg",{ref:m,...N2,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:hw("lucide",a),...!l&&!M2(f)&&{"aria-hidden":"true"},...f},[...c.map(([g,y])=>nt.createElement(g,y)),...Array.isArray(l)?l:[l]]));const he=(s,t)=>{const e=nt.forwardRef(({className:n,...a},l)=>nt.createElement(D2,{ref:l,iconNode:t,className:hw(`lucide-${C2(wb(s))}`,`lucide-${s}`,n),...a}));return e.displayName=wb(s),e};const O2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],I2=he("activity",O2);const V2=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],P2=he("calendar-clock",V2);const k2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Dm=he("calendar",k2);const z2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fw=he("camera",z2);const L2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dw=he("chevron-down",L2);const j2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],U2=he("chevron-left",j2);const B2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mw=he("chevron-right",B2);const F2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],q2=he("circle-alert",F2);const Y2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],H2=he("circle-check-big",Y2);const Q2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G2=he("circle",Q2);const K2=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],$2=he("cloud-download",K2);const X2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],W2=he("database",X2);const J2=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],Z2=he("fast-forward",J2);const tA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],eA=he("file-plus",tA);const nA=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],iA=he("hard-drive",nA);const sA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],rA=he("info",sA);const aA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],oA=he("message-square",aA);const lA=[["path",{d:"M5 12h14",key:"1ays0h"}]],uA=he("minus",lA);const cA=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],hA=he("mouse-pointer",cA);const fA=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],dA=he("pause",fA);const mA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gA=he("pen",mA);const pA=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],yA=he("play",pA);const vA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gw=he("save",vA);const bA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Eb=he("search",bA);const _A=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wA=he("settings",_A);const EA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],SA=he("square",EA);const TA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xA=he("target",TA);const AA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],CA=he("trending-up",AA);const RA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MA=he("triangle-alert",RA);const NA=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],DA=he("type",NA);const OA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],So=he("x",OA);function pw(s,t){return function(){return s.apply(t,arguments)}}const{toString:IA}=Object.prototype,{getPrototypeOf:Hg}=Object,{iterator:rf,toStringTag:yw}=Symbol,af=(s=>t=>{const e=IA.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ii=s=>(s=s.toLowerCase(),t=>af(t)===s),of=s=>t=>typeof t===s,{isArray:Vo}=Array,To=of("undefined");function xu(s){return s!==null&&!To(s)&&s.constructor!==null&&!To(s.constructor)&&qn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const vw=Ii("ArrayBuffer");function VA(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&vw(s.buffer),t}const PA=of("string"),qn=of("function"),bw=of("number"),Au=s=>s!==null&&typeof s=="object",kA=s=>s===!0||s===!1,Eh=s=>{if(af(s)!=="object")return!1;const t=Hg(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(yw in s)&&!(rf in s)},zA=s=>{if(!Au(s)||xu(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},LA=Ii("Date"),jA=Ii("File"),UA=Ii("Blob"),BA=Ii("FileList"),FA=s=>Au(s)&&qn(s.pipe),qA=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||qn(s.append)&&((t=af(s))==="formdata"||t==="object"&&qn(s.toString)&&s.toString()==="[object FormData]"))},YA=Ii("URLSearchParams"),[HA,QA,GA,KA]=["ReadableStream","Request","Response","Headers"].map(Ii),$A=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cu(s,t,{allOwnKeys:e=!1}={}){if(s===null||typeof s>"u")return;let n,a;if(typeof s!="object"&&(s=[s]),Vo(s))for(n=0,a=s.length;n<a;n++)t.call(null,s[n],n,s);else{if(xu(s))return;const l=e?Object.getOwnPropertyNames(s):Object.keys(s),c=l.length;let f;for(n=0;n<c;n++)f=l[n],t.call(null,s[f],f,s)}}function _w(s,t){if(xu(s))return null;t=t.toLowerCase();const e=Object.keys(s);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const ra=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ww=s=>!To(s)&&s!==ra;function fg(){const{caseless:s,skipUndefined:t}=ww(this)&&this||{},e={},n=(a,l)=>{const c=s&&_w(e,l)||l;Eh(e[c])&&Eh(a)?e[c]=fg(e[c],a):Eh(a)?e[c]=fg({},a):Vo(a)?e[c]=a.slice():(!t||!To(a))&&(e[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Cu(arguments[a],n);return e}const XA=(s,t,e,{allOwnKeys:n}={})=>(Cu(t,(a,l)=>{e&&qn(a)?s[l]=pw(a,e):s[l]=a},{allOwnKeys:n}),s),WA=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),JA=(s,t,e,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),e&&Object.assign(s.prototype,e)},ZA=(s,t,e,n)=>{let a,l,c;const f={};if(t=t||{},s==null)return t;do{for(a=Object.getOwnPropertyNames(s),l=a.length;l-- >0;)c=a[l],(!n||n(c,s,t))&&!f[c]&&(t[c]=s[c],f[c]=!0);s=e!==!1&&Hg(s)}while(s&&(!e||e(s,t))&&s!==Object.prototype);return t},tC=(s,t,e)=>{s=String(s),(e===void 0||e>s.length)&&(e=s.length),e-=t.length;const n=s.indexOf(t,e);return n!==-1&&n===e},eC=s=>{if(!s)return null;if(Vo(s))return s;let t=s.length;if(!bw(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=s[t];return e},nC=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Hg(Uint8Array)),iC=(s,t)=>{const n=(s&&s[rf]).call(s);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(s,l[0],l[1])}},sC=(s,t)=>{let e;const n=[];for(;(e=s.exec(t))!==null;)n.push(e);return n},rC=Ii("HTMLFormElement"),aC=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),Sb=(({hasOwnProperty:s})=>(t,e)=>s.call(t,e))(Object.prototype),oC=Ii("RegExp"),Ew=(s,t)=>{const e=Object.getOwnPropertyDescriptors(s),n={};Cu(e,(a,l)=>{let c;(c=t(a,l,s))!==!1&&(n[l]=c||a)}),Object.defineProperties(s,n)},lC=s=>{Ew(s,(t,e)=>{if(qn(s)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=s[e];if(qn(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},uC=(s,t)=>{const e={},n=a=>{a.forEach(l=>{e[l]=!0})};return Vo(s)?n(s):n(String(s).split(t)),e},cC=()=>{},hC=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function fC(s){return!!(s&&qn(s.append)&&s[yw]==="FormData"&&s[rf])}const dC=s=>{const t=new Array(10),e=(n,a)=>{if(Au(n)){if(t.indexOf(n)>=0)return;if(xu(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Vo(n)?[]:{};return Cu(n,(c,f)=>{const m=e(c,a+1);!To(m)&&(l[f]=m)}),t[a]=void 0,l}}return n};return e(s,0)},mC=Ii("AsyncFunction"),gC=s=>s&&(Au(s)||qn(s))&&qn(s.then)&&qn(s.catch),Sw=((s,t)=>s?setImmediate:t?((e,n)=>(ra.addEventListener("message",({source:a,data:l})=>{a===ra&&l===e&&n.length&&n.shift()()},!1),a=>{n.push(a),ra.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",qn(ra.postMessage)),pC=typeof queueMicrotask<"u"?queueMicrotask.bind(ra):typeof process<"u"&&process.nextTick||Sw,yC=s=>s!=null&&qn(s[rf]),$={isArray:Vo,isArrayBuffer:vw,isBuffer:xu,isFormData:qA,isArrayBufferView:VA,isString:PA,isNumber:bw,isBoolean:kA,isObject:Au,isPlainObject:Eh,isEmptyObject:zA,isReadableStream:HA,isRequest:QA,isResponse:GA,isHeaders:KA,isUndefined:To,isDate:LA,isFile:jA,isBlob:UA,isRegExp:oC,isFunction:qn,isStream:FA,isURLSearchParams:YA,isTypedArray:nC,isFileList:BA,forEach:Cu,merge:fg,extend:XA,trim:$A,stripBOM:WA,inherits:JA,toFlatObject:ZA,kindOf:af,kindOfTest:Ii,endsWith:tC,toArray:eC,forEachEntry:iC,matchAll:sC,isHTMLForm:rC,hasOwnProperty:Sb,hasOwnProp:Sb,reduceDescriptors:Ew,freezeMethods:lC,toObjectSet:uC,toCamelCase:aC,noop:cC,toFiniteNumber:hC,findKey:_w,global:ra,isContextDefined:ww,isSpecCompliantForm:fC,toJSONObject:dC,isAsyncFn:mC,isThenable:gC,setImmediate:Sw,asap:pC,isIterable:yC};function Yt(s,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}$.inherits(Yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Tw=Yt.prototype,xw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{xw[s]={value:s}});Object.defineProperties(Yt,xw);Object.defineProperty(Tw,"isAxiosError",{value:!0});Yt.from=(s,t,e,n,a,l)=>{const c=Object.create(Tw);$.toFlatObject(s,c,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const f=s&&s.message?s.message:"Error",m=t==null&&s?s.code:t;return Yt.call(c,f,m,e,n,a),s&&c.cause==null&&Object.defineProperty(c,"cause",{value:s,configurable:!0}),c.name=s&&s.name||"Error",l&&Object.assign(c,l),c};const vC=null;function dg(s){return $.isPlainObject(s)||$.isArray(s)}function Aw(s){return $.endsWith(s,"[]")?s.slice(0,-2):s}function Tb(s,t,e){return s?s.concat(t).map(function(a,l){return a=Aw(a),!e&&l?"["+a+"]":a}).join(e?".":""):t}function bC(s){return $.isArray(s)&&!s.some(dg)}const _C=$.toFlatObject($,{},null,function(t){return/^is[A-Z]/.test(t)});function lf(s,t,e){if(!$.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,e=$.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,D){return!$.isUndefined(D[R])});const n=e.metaTokens,a=e.visitor||y,l=e.dots,c=e.indexes,m=(e.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(a))throw new TypeError("visitor must be a function");function g(x){if(x===null)return"";if($.isDate(x))return x.toISOString();if($.isBoolean(x))return x.toString();if(!m&&$.isBlob(x))throw new Yt("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(x)||$.isTypedArray(x)?m&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function y(x,R,D){let B=x;if(x&&!D&&typeof x=="object"){if($.endsWith(R,"{}"))R=n?R:R.slice(0,-2),x=JSON.stringify(x);else if($.isArray(x)&&bC(x)||($.isFileList(x)||$.endsWith(R,"[]"))&&(B=$.toArray(x)))return R=Aw(R),B.forEach(function(rt,gt){!($.isUndefined(rt)||rt===null)&&t.append(c===!0?Tb([R],gt,l):c===null?R:R+"[]",g(rt))}),!1}return dg(x)?!0:(t.append(Tb(D,R,l),g(x)),!1)}const b=[],E=Object.assign(_C,{defaultVisitor:y,convertValue:g,isVisitable:dg});function A(x,R){if(!$.isUndefined(x)){if(b.indexOf(x)!==-1)throw Error("Circular reference detected in "+R.join("."));b.push(x),$.forEach(x,function(B,Z){(!($.isUndefined(B)||B===null)&&a.call(t,B,$.isString(Z)?Z.trim():Z,R,E))===!0&&A(B,R?R.concat(Z):[Z])}),b.pop()}}if(!$.isObject(s))throw new TypeError("data must be an object");return A(s),t}function xb(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Qg(s,t){this._pairs=[],s&&lf(s,this,t)}const Cw=Qg.prototype;Cw.append=function(t,e){this._pairs.push([t,e])};Cw.toString=function(t){const e=t?function(n){return t.call(this,n,xb)}:xb;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function wC(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rw(s,t,e){if(!t)return s;const n=e&&e.encode||wC;$.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let l;if(a?l=a(t,e):l=$.isURLSearchParams(t)?t.toString():new Qg(t,e).toString(n),l){const c=s.indexOf("#");c!==-1&&(s=s.slice(0,c)),s+=(s.indexOf("?")===-1?"?":"&")+l}return s}class Ab{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Mw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EC=typeof URLSearchParams<"u"?URLSearchParams:Qg,SC=typeof FormData<"u"?FormData:null,TC=typeof Blob<"u"?Blob:null,xC={isBrowser:!0,classes:{URLSearchParams:EC,FormData:SC,Blob:TC},protocols:["http","https","file","blob","url","data"]},Gg=typeof window<"u"&&typeof document<"u",mg=typeof navigator=="object"&&navigator||void 0,AC=Gg&&(!mg||["ReactNative","NativeScript","NS"].indexOf(mg.product)<0),CC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RC=Gg&&window.location.href||"http://localhost",MC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gg,hasStandardBrowserEnv:AC,hasStandardBrowserWebWorkerEnv:CC,navigator:mg,origin:RC},Symbol.toStringTag,{value:"Module"})),Mn={...MC,...xC};function NC(s,t){return lf(s,new Mn.classes.URLSearchParams,{visitor:function(e,n,a,l){return Mn.isNode&&$.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function DC(s){return $.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function OC(s){const t={},e=Object.keys(s);let n;const a=e.length;let l;for(n=0;n<a;n++)l=e[n],t[l]=s[l];return t}function Nw(s){function t(e,n,a,l){let c=e[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),m=l>=e.length;return c=!c&&$.isArray(a)?a.length:c,m?($.hasOwnProp(a,c)?a[c]=[a[c],n]:a[c]=n,!f):((!a[c]||!$.isObject(a[c]))&&(a[c]=[]),t(e,n,a[c],l)&&$.isArray(a[c])&&(a[c]=OC(a[c])),!f)}if($.isFormData(s)&&$.isFunction(s.entries)){const e={};return $.forEachEntry(s,(n,a)=>{t(DC(n),a,e,0)}),e}return null}function IC(s,t,e){if($.isString(s))try{return(t||JSON.parse)(s),$.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(s)}const Ru={transitional:Mw,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,l=$.isObject(t);if(l&&$.isHTMLForm(t)&&(t=new FormData(t)),$.isFormData(t))return a?JSON.stringify(Nw(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return NC(t,this.formSerializer).toString();if((f=$.isFileList(t))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return lf(f?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||a?(e.setContentType("application/json",!1),IC(t)):t}],transformResponse:[function(t){const e=this.transitional||Ru.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(n&&!this.responseType||a)){const c=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(f){if(c)throw f.name==="SyntaxError"?Yt.from(f,Yt.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Mn.classes.FormData,Blob:Mn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],s=>{Ru.headers[s]={}});const VC=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PC=s=>{const t={};let e,n,a;return s&&s.split(`
`).forEach(function(c){a=c.indexOf(":"),e=c.substring(0,a).trim().toLowerCase(),n=c.substring(a+1).trim(),!(!e||t[e]&&VC[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Cb=Symbol("internals");function Fl(s){return s&&String(s).trim().toLowerCase()}function Sh(s){return s===!1||s==null?s:$.isArray(s)?s.map(Sh):String(s)}function kC(s){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(s);)t[n[1]]=n[2];return t}const zC=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Om(s,t,e,n,a){if($.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!$.isString(t)){if($.isString(n))return t.indexOf(n)!==-1;if($.isRegExp(n))return n.test(t)}}function LC(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function jC(s,t){const e=$.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+e,{value:function(a,l,c){return this[n].call(this,t,a,l,c)},configurable:!0})})}let Yn=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function l(f,m,g){const y=Fl(m);if(!y)throw new Error("header name must be a non-empty string");const b=$.findKey(a,y);(!b||a[b]===void 0||g===!0||g===void 0&&a[b]!==!1)&&(a[b||m]=Sh(f))}const c=(f,m)=>$.forEach(f,(g,y)=>l(g,y,m));if($.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if($.isString(t)&&(t=t.trim())&&!zC(t))c(PC(t),e);else if($.isObject(t)&&$.isIterable(t)){let f={},m,g;for(const y of t){if(!$.isArray(y))throw TypeError("Object iterator must return a key-value pair");f[g=y[0]]=(m=f[g])?$.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}c(f,e)}else t!=null&&l(e,t,n);return this}get(t,e){if(t=Fl(t),t){const n=$.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return kC(a);if($.isFunction(e))return e.call(this,a,n);if($.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Fl(t),t){const n=$.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||Om(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function l(c){if(c=Fl(c),c){const f=$.findKey(n,c);f&&(!e||Om(n,n[f],f,e))&&(delete n[f],a=!0)}}return $.isArray(t)?t.forEach(l):l(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const l=e[n];(!t||Om(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const e=this,n={};return $.forEach(this,(a,l)=>{const c=$.findKey(n,l);if(c){e[c]=Sh(a),delete e[l];return}const f=t?LC(l):String(l).trim();f!==l&&delete e[l],e[f]=Sh(a),n[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return $.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&$.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Cb]=this[Cb]={accessors:{}}).accessors,a=this.prototype;function l(c){const f=Fl(c);n[f]||(jC(a,c),n[f]=!0)}return $.isArray(t)?t.forEach(l):l(t),this}};Yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Yn.prototype,({value:s},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[e]=n}}});$.freezeMethods(Yn);function Im(s,t){const e=this||Ru,n=t||e,a=Yn.from(n.headers);let l=n.data;return $.forEach(s,function(f){l=f.call(e,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Dw(s){return!!(s&&s.__CANCEL__)}function Po(s,t,e){Yt.call(this,s??"canceled",Yt.ERR_CANCELED,t,e),this.name="CanceledError"}$.inherits(Po,Yt,{__CANCEL__:!0});function Ow(s,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?s(e):t(new Yt("Request failed with status code "+e.status,[Yt.ERR_BAD_REQUEST,Yt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function UC(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function BC(s,t){s=s||10;const e=new Array(s),n=new Array(s);let a=0,l=0,c;return t=t!==void 0?t:1e3,function(m){const g=Date.now(),y=n[l];c||(c=g),e[a]=m,n[a]=g;let b=l,E=0;for(;b!==a;)E+=e[b++],b=b%s;if(a=(a+1)%s,a===l&&(l=(l+1)%s),g-c<t)return;const A=y&&g-y;return A?Math.round(E*1e3/A):void 0}}function FC(s,t){let e=0,n=1e3/t,a,l;const c=(g,y=Date.now())=>{e=y,a=null,l&&(clearTimeout(l),l=null),s(...g)};return[(...g)=>{const y=Date.now(),b=y-e;b>=n?c(g,y):(a=g,l||(l=setTimeout(()=>{l=null,c(a)},n-b)))},()=>a&&c(a)]}const Vh=(s,t,e=3)=>{let n=0;const a=BC(50,250);return FC(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,m=c-n,g=a(m),y=c<=f;n=c;const b={loaded:c,total:f,progress:f?c/f:void 0,bytes:m,rate:g||void 0,estimated:g&&f&&y?(f-c)/g:void 0,event:l,lengthComputable:f!=null,[t?"download":"upload"]:!0};s(b)},e)},Rb=(s,t)=>{const e=s!=null;return[n=>t[0]({lengthComputable:e,total:s,loaded:n}),t[1]]},Mb=s=>(...t)=>$.asap(()=>s(...t)),qC=Mn.hasStandardBrowserEnv?((s,t)=>e=>(e=new URL(e,Mn.origin),s.protocol===e.protocol&&s.host===e.host&&(t||s.port===e.port)))(new URL(Mn.origin),Mn.navigator&&/(msie|trident)/i.test(Mn.navigator.userAgent)):()=>!0,YC=Mn.hasStandardBrowserEnv?{write(s,t,e,n,a,l,c){if(typeof document>"u")return;const f=[`${s}=${encodeURIComponent(t)}`];$.isNumber(e)&&f.push(`expires=${new Date(e).toUTCString()}`),$.isString(n)&&f.push(`path=${n}`),$.isString(a)&&f.push(`domain=${a}`),l===!0&&f.push("secure"),$.isString(c)&&f.push(`SameSite=${c}`),document.cookie=f.join("; ")},read(s){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function HC(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function QC(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function Iw(s,t,e){let n=!HC(t);return s&&(n||e==!1)?QC(s,t):t}const Nb=s=>s instanceof Yn?{...s}:s;function ca(s,t){t=t||{};const e={};function n(g,y,b,E){return $.isPlainObject(g)&&$.isPlainObject(y)?$.merge.call({caseless:E},g,y):$.isPlainObject(y)?$.merge({},y):$.isArray(y)?y.slice():y}function a(g,y,b,E){if($.isUndefined(y)){if(!$.isUndefined(g))return n(void 0,g,b,E)}else return n(g,y,b,E)}function l(g,y){if(!$.isUndefined(y))return n(void 0,y)}function c(g,y){if($.isUndefined(y)){if(!$.isUndefined(g))return n(void 0,g)}else return n(void 0,y)}function f(g,y,b){if(b in t)return n(g,y);if(b in s)return n(void 0,g)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(g,y,b)=>a(Nb(g),Nb(y),b,!0)};return $.forEach(Object.keys({...s,...t}),function(y){const b=m[y]||a,E=b(s[y],t[y],y);$.isUndefined(E)&&b!==f||(e[y]=E)}),e}const Vw=s=>{const t=ca({},s);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:f}=t;if(t.headers=c=Yn.from(c),t.url=Rw(Iw(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),$.isFormData(e)){if(Mn.hasStandardBrowserEnv||Mn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if($.isFunction(e.getHeaders)){const m=e.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,b])=>{g.includes(y.toLowerCase())&&c.set(y,b)})}}if(Mn.hasStandardBrowserEnv&&(n&&$.isFunction(n)&&(n=n(t)),n||n!==!1&&qC(t.url))){const m=a&&l&&YC.read(l);m&&c.set(a,m)}return t},GC=typeof XMLHttpRequest<"u",KC=GC&&function(s){return new Promise(function(e,n){const a=Vw(s);let l=a.data;const c=Yn.from(a.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:g}=a,y,b,E,A,x;function R(){A&&A(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(y),a.signal&&a.signal.removeEventListener("abort",y)}let D=new XMLHttpRequest;D.open(a.method.toUpperCase(),a.url,!0),D.timeout=a.timeout;function B(){if(!D)return;const rt=Yn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),yt={data:!f||f==="text"||f==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:rt,config:s,request:D};Ow(function(N){e(N),R()},function(N){n(N),R()},yt),D=null}"onloadend"in D?D.onloadend=B:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(B)},D.onabort=function(){D&&(n(new Yt("Request aborted",Yt.ECONNABORTED,s,D)),D=null)},D.onerror=function(gt){const yt=gt&&gt.message?gt.message:"Network Error",xt=new Yt(yt,Yt.ERR_NETWORK,s,D);xt.event=gt||null,n(xt),D=null},D.ontimeout=function(){let gt=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const yt=a.transitional||Mw;a.timeoutErrorMessage&&(gt=a.timeoutErrorMessage),n(new Yt(gt,yt.clarifyTimeoutError?Yt.ETIMEDOUT:Yt.ECONNABORTED,s,D)),D=null},l===void 0&&c.setContentType(null),"setRequestHeader"in D&&$.forEach(c.toJSON(),function(gt,yt){D.setRequestHeader(yt,gt)}),$.isUndefined(a.withCredentials)||(D.withCredentials=!!a.withCredentials),f&&f!=="json"&&(D.responseType=a.responseType),g&&([E,x]=Vh(g,!0),D.addEventListener("progress",E)),m&&D.upload&&([b,A]=Vh(m),D.upload.addEventListener("progress",b),D.upload.addEventListener("loadend",A)),(a.cancelToken||a.signal)&&(y=rt=>{D&&(n(!rt||rt.type?new Po(null,s,D):rt),D.abort(),D=null)},a.cancelToken&&a.cancelToken.subscribe(y),a.signal&&(a.signal.aborted?y():a.signal.addEventListener("abort",y)));const Z=UC(a.url);if(Z&&Mn.protocols.indexOf(Z)===-1){n(new Yt("Unsupported protocol "+Z+":",Yt.ERR_BAD_REQUEST,s));return}D.send(l||null)})},$C=(s,t)=>{const{length:e}=s=s?s.filter(Boolean):[];if(t||e){let n=new AbortController,a;const l=function(g){if(!a){a=!0,f();const y=g instanceof Error?g:this.reason;n.abort(y instanceof Yt?y:new Po(y instanceof Error?y.message:y))}};let c=t&&setTimeout(()=>{c=null,l(new Yt(`timeout ${t} of ms exceeded`,Yt.ETIMEDOUT))},t);const f=()=>{s&&(c&&clearTimeout(c),c=null,s.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),s=null)};s.forEach(g=>g.addEventListener("abort",l));const{signal:m}=n;return m.unsubscribe=()=>$.asap(f),m}},XC=function*(s,t){let e=s.byteLength;if(e<t){yield s;return}let n=0,a;for(;n<e;)a=n+t,yield s.slice(n,a),n=a},WC=async function*(s,t){for await(const e of JC(s))yield*XC(e,t)},JC=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Db=(s,t,e,n)=>{const a=WC(s,t);let l=0,c,f=m=>{c||(c=!0,n&&n(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await a.next();if(g){f(),m.close();return}let b=y.byteLength;if(e){let E=l+=b;e(E)}m.enqueue(new Uint8Array(y))}catch(g){throw f(g),g}},cancel(m){return f(m),a.return()}},{highWaterMark:2})},Ob=64*1024,{isFunction:lh}=$,ZC=(({Request:s,Response:t})=>({Request:s,Response:t}))($.global),{ReadableStream:Ib,TextEncoder:Vb}=$.global,Pb=(s,...t)=>{try{return!!s(...t)}catch{return!1}},tR=s=>{s=$.merge.call({skipUndefined:!0},ZC,s);const{fetch:t,Request:e,Response:n}=s,a=t?lh(t):typeof fetch=="function",l=lh(e),c=lh(n);if(!a)return!1;const f=a&&lh(Ib),m=a&&(typeof Vb=="function"?(x=>R=>x.encode(R))(new Vb):async x=>new Uint8Array(await new e(x).arrayBuffer())),g=l&&f&&Pb(()=>{let x=!1;const R=new e(Mn.origin,{body:new Ib,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!R}),y=c&&f&&Pb(()=>$.isReadableStream(new n("").body)),b={stream:y&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!b[x]&&(b[x]=(R,D)=>{let B=R&&R[x];if(B)return B.call(R);throw new Yt(`Response type '${x}' is not supported`,Yt.ERR_NOT_SUPPORT,D)})});const E=async x=>{if(x==null)return 0;if($.isBlob(x))return x.size;if($.isSpecCompliantForm(x))return(await new e(Mn.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if($.isArrayBufferView(x)||$.isArrayBuffer(x))return x.byteLength;if($.isURLSearchParams(x)&&(x=x+""),$.isString(x))return(await m(x)).byteLength},A=async(x,R)=>{const D=$.toFiniteNumber(x.getContentLength());return D??E(R)};return async x=>{let{url:R,method:D,data:B,signal:Z,cancelToken:rt,timeout:gt,onDownloadProgress:yt,onUploadProgress:xt,responseType:N,headers:M,withCredentials:O="same-origin",fetchOptions:L}=Vw(x),z=t||fetch;N=N?(N+"").toLowerCase():"text";let U=$C([Z,rt&&rt.toAbortSignal()],gt),I=null;const kt=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let Xt;try{if(xt&&g&&D!=="get"&&D!=="head"&&(Xt=await A(M,B))!==0){let V=new e(R,{method:"POST",body:B,duplex:"half"}),J;if($.isFormData(B)&&(J=V.headers.get("content-type"))&&M.setContentType(J),V.body){const[mt,pt]=Rb(Xt,Vh(Mb(xt)));B=Db(V.body,Ob,mt,pt)}}$.isString(O)||(O=O?"include":"omit");const G=l&&"credentials"in e.prototype,dt={...L,signal:U,method:D.toUpperCase(),headers:M.normalize().toJSON(),body:B,duplex:"half",credentials:G?O:void 0};I=l&&new e(R,dt);let bt=await(l?z(I,L):z(R,dt));const ut=y&&(N==="stream"||N==="response");if(y&&(yt||ut&&kt)){const V={};["status","statusText","headers"].forEach(ot=>{V[ot]=bt[ot]});const J=$.toFiniteNumber(bt.headers.get("content-length")),[mt,pt]=yt&&Rb(J,Vh(Mb(yt),!0))||[];bt=new n(Db(bt.body,Ob,mt,()=>{pt&&pt(),kt&&kt()}),V)}N=N||"text";let St=await b[$.findKey(b,N)||"text"](bt,x);return!ut&&kt&&kt(),await new Promise((V,J)=>{Ow(V,J,{data:St,headers:Yn.from(bt.headers),status:bt.status,statusText:bt.statusText,config:x,request:I})})}catch(G){throw kt&&kt(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Yt("Network Error",Yt.ERR_NETWORK,x,I),{cause:G.cause||G}):Yt.from(G,G&&G.code,x,I)}}},eR=new Map,Pw=s=>{let t=s&&s.env||{};const{fetch:e,Request:n,Response:a}=t,l=[n,a,e];let c=l.length,f=c,m,g,y=eR;for(;f--;)m=l[f],g=y.get(m),g===void 0&&y.set(m,g=f?new Map:tR(t)),y=g;return g};Pw();const Kg={http:vC,xhr:KC,fetch:{get:Pw}};$.forEach(Kg,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const kb=s=>`- ${s}`,nR=s=>$.isFunction(s)||s===null||s===!1;function iR(s,t){s=$.isArray(s)?s:[s];const{length:e}=s;let n,a;const l={};for(let c=0;c<e;c++){n=s[c];let f;if(a=n,!nR(n)&&(a=Kg[(f=String(n)).toLowerCase()],a===void 0))throw new Yt(`Unknown adapter '${f}'`);if(a&&($.isFunction(a)||(a=a.get(t))))break;l[f||"#"+c]=a}if(!a){const c=Object.entries(l).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let f=e?c.length>1?`since :
`+c.map(kb).join(`
`):" "+kb(c[0]):"as no adapter specified";throw new Yt("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return a}const kw={getAdapter:iR,adapters:Kg};function Vm(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Po(null,s)}function zb(s){return Vm(s),s.headers=Yn.from(s.headers),s.data=Im.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),kw.getAdapter(s.adapter||Ru.adapter,s)(s).then(function(n){return Vm(s),n.data=Im.call(s,s.transformResponse,n),n.headers=Yn.from(n.headers),n},function(n){return Dw(n)||(Vm(s),n&&n.response&&(n.response.data=Im.call(s,s.transformResponse,n.response),n.response.headers=Yn.from(n.response.headers))),Promise.reject(n)})}const zw="1.13.2",uf={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{uf[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const Lb={};uf.transitional=function(t,e,n){function a(l,c){return"[Axios v"+zw+"] Transitional option '"+l+"'"+c+(n?". "+n:"")}return(l,c,f)=>{if(t===!1)throw new Yt(a(c," has been removed"+(e?" in "+e:"")),Yt.ERR_DEPRECATED);return e&&!Lb[c]&&(Lb[c]=!0,console.warn(a(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,c,f):!0}};uf.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function sR(s,t,e){if(typeof s!="object")throw new Yt("options must be an object",Yt.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let a=n.length;for(;a-- >0;){const l=n[a],c=t[l];if(c){const f=s[l],m=f===void 0||c(f,l,s);if(m!==!0)throw new Yt("option "+l+" must be "+m,Yt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Yt("Unknown option "+l,Yt.ERR_BAD_OPTION)}}const Th={assertOptions:sR,validators:uf},ns=Th.validators;let oa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ab,response:new Ab}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ca(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:l}=e;n!==void 0&&Th.assertOptions(n,{silentJSONParsing:ns.transitional(ns.boolean),forcedJSONParsing:ns.transitional(ns.boolean),clarifyTimeoutError:ns.transitional(ns.boolean)},!1),a!=null&&($.isFunction(a)?e.paramsSerializer={serialize:a}:Th.assertOptions(a,{encode:ns.function,serialize:ns.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Th.assertOptions(e,{baseUrl:ns.spelling("baseURL"),withXsrfToken:ns.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=l&&$.merge(l.common,l[e.method]);l&&$.forEach(["delete","get","head","post","put","patch","common"],x=>{delete l[x]}),e.headers=Yn.concat(c,l);const f=[];let m=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(m=m&&R.synchronous,f.unshift(R.fulfilled,R.rejected))});const g=[];this.interceptors.response.forEach(function(R){g.push(R.fulfilled,R.rejected)});let y,b=0,E;if(!m){const x=[zb.bind(this),void 0];for(x.unshift(...f),x.push(...g),E=x.length,y=Promise.resolve(e);b<E;)y=y.then(x[b++],x[b++]);return y}E=f.length;let A=e;for(;b<E;){const x=f[b++],R=f[b++];try{A=x(A)}catch(D){R.call(this,D);break}}try{y=zb.call(this,A)}catch(x){return Promise.reject(x)}for(b=0,E=g.length;b<E;)y=y.then(g[b++],g[b++]);return y}getUri(t){t=ca(this.defaults,t);const e=Iw(t.baseURL,t.url,t.allowAbsoluteUrls);return Rw(e,t.params,t.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(t){oa.prototype[t]=function(e,n){return this.request(ca(n||{},{method:t,url:e,data:(n||{}).data}))}});$.forEach(["post","put","patch"],function(t){function e(n){return function(l,c,f){return this.request(ca(f||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}oa.prototype[t]=e(),oa.prototype[t+"Form"]=e(!0)});let rR=class Lw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(f=>{n.subscribe(f),l=f}).then(a);return c.cancel=function(){n.unsubscribe(l)},c},t(function(l,c,f){n.reason||(n.reason=new Po(l,c,f),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Lw(function(a){t=a}),cancel:t}}};function aR(s){return function(e){return s.apply(null,e)}}function oR(s){return $.isObject(s)&&s.isAxiosError===!0}const gg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gg).forEach(([s,t])=>{gg[t]=s});function jw(s){const t=new oa(s),e=pw(oa.prototype.request,t);return $.extend(e,oa.prototype,t,{allOwnKeys:!0}),$.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return jw(ca(s,a))},e}const He=jw(Ru);He.Axios=oa;He.CanceledError=Po;He.CancelToken=rR;He.isCancel=Dw;He.VERSION=zw;He.toFormData=lf;He.AxiosError=Yt;He.Cancel=He.CanceledError;He.all=function(t){return Promise.all(t)};He.spread=aR;He.isAxiosError=oR;He.mergeConfig=ca;He.AxiosHeaders=Yn;He.formToJSON=s=>Nw($.isHTMLForm(s)?new FormData(s):s);He.getAdapter=kw.getAdapter;He.HttpStatusCode=gg;He.default=He;const{Axios:VP,AxiosError:PP,CanceledError:kP,isCancel:zP,CancelToken:LP,VERSION:jP,all:UP,Cancel:BP,isAxiosError:FP,spread:qP,toFormData:YP,AxiosHeaders:HP,HttpStatusCode:QP,formToJSON:GP,getAdapter:KP,mergeConfig:$P}=He,lR="http://localhost:3001",Uw=He.create({baseURL:lR,headers:{"Content-Type":"application/json"}});async function Bw(s){return(await Uw.get("/api/data/candles",{params:s})).data}async function uR(s,t){return(await Uw.post("/api/screenshot/upload",{image:s,fileName:t})).data}const jb=s=>{let t;const e=new Set,n=(g,y)=>{const b=typeof g=="function"?g(t):g;if(!Object.is(b,t)){const E=t;t=y??(typeof b!="object"||b===null)?b:Object.assign({},t,b),e.forEach(A=>A(t,E))}},a=()=>t,f={setState:n,getState:a,getInitialState:()=>m,subscribe:g=>(e.add(g),()=>e.delete(g))},m=t=s(n,a,f);return f},cR=(s=>s?jb(s):jb),hR=s=>s;function fR(s,t=hR){const e=ah.useSyncExternalStore(s.subscribe,ah.useCallback(()=>t(s.getState()),[s,t]),ah.useCallback(()=>t(s.getInitialState()),[s,t]));return ah.useDebugValue(e),e}const Ub=s=>{const t=cR(s),e=n=>fR(t,n);return Object.assign(e,t),e},Fw=(s=>s?Ub(s):Ub),qw="backtesting_trade_sessions";function dR(){try{const s=localStorage.getItem(qw);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading trade sessions:",s),[]}}function mR(s,t,e){const n=dR(),a={id:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,instrument:s,startDate:t.length>0?t[0].timestamp:Date.now(),endDate:t.length>0?t[t.length-1].timestamp:Date.now(),trades:t,totalPnL:e.totalPnL,winRate:e.winRate,totalTrades:t.length};n.push(a);try{localStorage.setItem(qw,JSON.stringify(n))}catch(l){console.error("Error saving trade session:",l)}return a}function Yw(s){const t=[];let e=null,n=0;for(const a of s){const l=a.type==="BUY"?1:-1,c=a.quantity*l;if(n===0)n=c,e={id:`pos-${a.id}`,direction:a.type==="BUY"?"LONG":"SHORT",status:"OPEN",instrument:a.instrument,entryTime:a.timestamp,avgEntryPrice:a.price,totalQuantity:a.quantity,remainingQuantity:a.quantity,realizedPnL:0,executions:[a]};else if(n>0&&l>0||n<0&&l<0){if(!e)continue;const m=e.avgEntryPrice*e.remainingQuantity,g=a.price*a.quantity,y=e.remainingQuantity+a.quantity;e.avgEntryPrice=(m+g)/y,e.totalQuantity+=a.quantity,e.remainingQuantity=y,e.executions.push(a),n+=c}else{if(!e)continue;const m=Math.abs(n),g=Math.min(m,a.quantity),y=a.quantity-g,E=(e.direction==="LONG"?a.price-e.avgEntryPrice:e.avgEntryPrice-a.price)*g;if(e.realizedPnL+=E,e.remainingQuantity-=g,y>0){const A={...a,quantity:g,pnl:E};e.executions.push(A),e.status="CLOSED",e.exitTime=a.timestamp,e.avgExitPrice=a.price,t.push(e),n=l*y,e={id:`pos-${a.id}-flip`,direction:a.type==="BUY"?"LONG":"SHORT",status:"OPEN",instrument:a.instrument,entryTime:a.timestamp,avgEntryPrice:a.price,totalQuantity:y,remainingQuantity:y,realizedPnL:0,executions:[{...a,quantity:y,pnl:void 0}]}}else{const A={...a,quantity:g,pnl:E};e.executions.push(A),e.remainingQuantity=Math.abs(n)-g,n+=c,n===0&&(e.status="CLOSED",e.exitTime=a.timestamp,e.avgExitPrice=a.price,t.push(e),e=null)}}}return e&&t.push(e),t.map(a=>(a.entryTime&&a.exitTime&&(a.durationMinutes=(a.exitTime-a.entryTime)/60),a)).reverse()}function Hw(s){const t=s.filter(b=>b.status==="CLOSED");let e=0,n=0,a=0,l=0,c=0,f=0,m=0,g=0,y=0;return t.forEach(b=>{e+=b.realizedPnL,b.realizedPnL>0?(n++,l+=b.realizedPnL):b.realizedPnL<0&&(a++,c+=Math.abs(b.realizedPnL)),b.direction==="LONG"?(f++,m+=b.realizedPnL):(g++,y+=b.realizedPnL)}),{totalTrades:t.length,winningTrades:n,losingTrades:a,winRate:t.length>0?n/t.length*100:0,totalPnL:e,avgWin:n>0?l/n:0,avgLoss:a>0?c/a:0,profitFactor:c>0?l/c:l>0?1/0:0,maxDrawdown:0,longs:{count:f,pnl:m},shorts:{count:g,pnl:y}}}const gR=()=>{};var Bb={};const Qw=function(s){const t=[];let e=0;for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&n+1<s.length&&(s.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++n)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},pR=function(s){const t=[];let e=0,n=0;for(;e<s.length;){const a=s[e++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[e++];t[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[e++],c=s[e++],f=s[e++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[n++]=String.fromCharCode(55296+(m>>10)),t[n++]=String.fromCharCode(56320+(m&1023))}else{const l=s[e++],c=s[e++];t[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},Gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,f=c?s[a+1]:0,m=a+2<s.length,g=m?s[a+2]:0,y=l>>2,b=(l&3)<<4|f>>4;let E=(f&15)<<2|g>>6,A=g&63;m||(A=64,c||(E=64)),n.push(e[y],e[b],e[E],e[A])}return n.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Qw(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):pR(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<s.length;){const l=e[s.charAt(a++)],f=a<s.length?e[s.charAt(a)]:0;++a;const g=a<s.length?e[s.charAt(a)]:64;++a;const b=a<s.length?e[s.charAt(a)]:64;if(++a,l==null||f==null||g==null||b==null)throw new yR;const E=l<<2|f>>4;if(n.push(E),g!==64){const A=f<<4&240|g>>2;if(n.push(A),b!==64){const x=g<<6&192|b;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class yR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vR=function(s){const t=Qw(s);return Gw.encodeByteArray(t,!0)},Ph=function(s){return vR(s).replace(/\./g,"")},bR=function(s){try{return Gw.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wR=()=>_R().__FIREBASE_DEFAULTS__,ER=()=>{if(typeof process>"u"||typeof Bb>"u")return;const s=Bb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},SR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&bR(s[1]);return t&&JSON.parse(t)},$g=()=>{try{return gR()||wR()||ER()||SR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},TR=s=>$g()?.emulatorHosts?.[s],xR=s=>{const t=TR(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},Kw=()=>$g()?.config;class AR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}function Xg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CR(s){return(await fetch(s,{credentials:"include"})).ok}function RR(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ph(JSON.stringify(e)),Ph(JSON.stringify(c)),""].join(".")}const Jl={};function MR(){const s={prod:[],emulator:[]};for(const t of Object.keys(Jl))Jl[t]?s.emulator.push(t):s.prod.push(t);return s}function NR(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let Fb=!1;function DR(s,t){if(typeof window>"u"||typeof document>"u"||!Xg(window.location.host)||Jl[s]===t||Jl[s]||Fb)return;Jl[s]=t;function e(E){return`__firebase__banner__${E}`}const n="__firebase__banner",l=MR().prod.length>0;function c(){const E=document.getElementById(n);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Fb=!0,c()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function b(){const E=NR(n),A=e("text"),x=document.getElementById(A)||document.createElement("span"),R=e("learnmore"),D=document.getElementById(R)||document.createElement("a"),B=e("preprendIcon"),Z=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const rt=E.element;f(rt),y(D,R);const gt=g();m(Z,B),rt.append(Z,x,D,gt),document.body.appendChild(rt)}l?(x.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function OR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){const s=$g()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return!IR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PR(){try{return typeof indexedDB=="object"}catch{return!1}}function kR(){return new Promise((s,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(n),s(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}const zR="FirebaseError";class ko extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=zR,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$w.prototype.create)}}class $w{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?LR(l,n):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new ko(a,f,n)}}function LR(s,t){return s.replace(jR,(e,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const jR=/\{\$([^}]+)}/g;function kh(s,t){if(s===t)return!0;const e=Object.keys(s),n=Object.keys(t);for(const a of e){if(!n.includes(a))return!1;const l=s[a],c=t[a];if(qb(l)&&qb(c)){if(!kh(l,c))return!1}else if(l!==c)return!1}for(const a of n)if(!e.includes(a))return!1;return!0}function qb(s){return s!==null&&typeof s=="object"}function zh(s){return s&&s._delegate?s._delegate:s}class cu{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ia="[DEFAULT]";class UR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new AR;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FR(t))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(t=ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ia){return this.instances.has(t)}getOptions(t=ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);n===f&&c.resolve(a)}return a}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&t(l,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const a of n)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BR(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ia){return this.component?this.component.multipleInstances?t:ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BR(s){return s===ia?void 0:s}function FR(s){return s.instantiationMode==="EAGER"}class qR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new UR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var ae;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ae||(ae={}));const YR={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},HR=ae.INFO,QR={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},GR=(s,t,...e)=>{if(t<s.logLevel)return;const n=new Date().toISOString(),a=QR[t];if(a)console[a](`[${n}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Xw{constructor(t){this.name=t,this._logLevel=HR,this._logHandler=GR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?YR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}const KR=(s,t)=>t.some(e=>s instanceof e);let Yb,Hb;function $R(){return Yb||(Yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XR(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,pg=new WeakMap,Jw=new WeakMap,Pm=new WeakMap,Wg=new WeakMap;function WR(s){const t=new Promise((e,n)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{e(pr(s.result)),a()},c=()=>{n(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Ww.set(e,s)}).catch(()=>{}),Wg.set(t,s),t}function JR(s){if(pg.has(s))return;const t=new Promise((e,n)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{n(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});pg.set(s,t)}let yg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return pg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Jw.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return pr(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function ZR(s){yg=s(yg)}function tM(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=s.call(km(this),t,...e);return Jw.set(n,t.sort?t.sort():[t]),pr(n)}:XR().includes(s)?function(...t){return s.apply(km(this),t),pr(Ww.get(this))}:function(...t){return pr(s.apply(km(this),t))}}function eM(s){return typeof s=="function"?tM(s):(s instanceof IDBTransaction&&JR(s),KR(s,$R())?new Proxy(s,yg):s)}function pr(s){if(s instanceof IDBRequest)return WR(s);if(Pm.has(s))return Pm.get(s);const t=eM(s);return t!==s&&(Pm.set(s,t),Wg.set(t,s)),t}const km=s=>Wg.get(s);function nM(s,t,{blocked:e,upgrade:n,blocking:a,terminated:l}={}){const c=indexedDB.open(s,t),f=pr(c);return n&&c.addEventListener("upgradeneeded",m=>{n(pr(c.result),m.oldVersion,m.newVersion,pr(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const iM=["get","getKey","getAll","getAllKeys","count"],sM=["put","add","delete","clear"],zm=new Map;function Qb(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(zm.get(t))return zm.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,a=sM.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(a||iM.includes(e)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return n&&(g=g.index(f.shift())),(await Promise.all([g[e](...f),a&&m.done]))[0]};return zm.set(t,l),l}ZR(s=>({...s,get:(t,e,n)=>Qb(t,e)||s.get(t,e,n),has:(t,e)=>!!Qb(t,e)||s.has(t,e)}));class rM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(aM(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function aM(s){return s.getComponent()?.type==="VERSION"}const vg="@firebase/app",Gb="0.14.7";const Os=new Xw("@firebase/app"),oM="@firebase/app-compat",lM="@firebase/analytics-compat",uM="@firebase/analytics",cM="@firebase/app-check-compat",hM="@firebase/app-check",fM="@firebase/auth",dM="@firebase/auth-compat",mM="@firebase/database",gM="@firebase/data-connect",pM="@firebase/database-compat",yM="@firebase/functions",vM="@firebase/functions-compat",bM="@firebase/installations",_M="@firebase/installations-compat",wM="@firebase/messaging",EM="@firebase/messaging-compat",SM="@firebase/performance",TM="@firebase/performance-compat",xM="@firebase/remote-config",AM="@firebase/remote-config-compat",CM="@firebase/storage",RM="@firebase/storage-compat",MM="@firebase/firestore",NM="@firebase/ai",DM="@firebase/firestore-compat",OM="firebase",IM="12.8.0";const bg="[DEFAULT]",VM={[vg]:"fire-core",[oM]:"fire-core-compat",[uM]:"fire-analytics",[lM]:"fire-analytics-compat",[hM]:"fire-app-check",[cM]:"fire-app-check-compat",[fM]:"fire-auth",[dM]:"fire-auth-compat",[mM]:"fire-rtdb",[gM]:"fire-data-connect",[pM]:"fire-rtdb-compat",[yM]:"fire-fn",[vM]:"fire-fn-compat",[bM]:"fire-iid",[_M]:"fire-iid-compat",[wM]:"fire-fcm",[EM]:"fire-fcm-compat",[SM]:"fire-perf",[TM]:"fire-perf-compat",[xM]:"fire-rc",[AM]:"fire-rc-compat",[CM]:"fire-gcs",[RM]:"fire-gcs-compat",[MM]:"fire-fst",[DM]:"fire-fst-compat",[NM]:"fire-vertex","fire-js":"fire-js",[OM]:"fire-js-all"};const Lh=new Map,PM=new Map,_g=new Map;function Kb(s,t){try{s.container.addComponent(t)}catch(e){Os.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function jh(s){const t=s.name;if(_g.has(t))return Os.debug(`There were multiple attempts to register component ${t}.`),!1;_g.set(t,s);for(const e of Lh.values())Kb(e,s);for(const e of PM.values())Kb(e,s);return!0}function kM(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function zM(s){return s==null?!1:s.settings!==void 0}const LM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new $w("app","Firebase",LM);class jM{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const UM=IM;function Zw(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const n={name:bg,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw yr.create("bad-app-name",{appName:String(a)});if(e||(e=Kw()),!e)throw yr.create("no-options");const l=Lh.get(a);if(l){if(kh(e,l.options)&&kh(n,l.config))return l;throw yr.create("duplicate-app",{appName:a})}const c=new qR(a);for(const m of _g.values())c.addComponent(m);const f=new jM(e,n,c);return Lh.set(a,f),f}function BM(s=bg){const t=Lh.get(s);if(!t&&s===bg&&Kw())return Zw();if(!t)throw yr.create("no-app",{appName:s});return t}function vo(s,t,e){let n=VM[s]??s;e&&(n+=`-${e}`);const a=n.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${n}" with version "${t}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Os.warn(c.join(" "));return}jh(new cu(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}const FM="firebase-heartbeat-database",qM=1,hu="firebase-heartbeat-store";let Lm=null;function tE(){return Lm||(Lm=nM(FM,qM,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hu)}catch(e){console.warn(e)}}}}).catch(s=>{throw yr.create("idb-open",{originalErrorMessage:s.message})})),Lm}async function YM(s){try{const e=(await tE()).transaction(hu),n=await e.objectStore(hu).get(eE(s));return await e.done,n}catch(t){if(t instanceof ko)Os.warn(t.message);else{const e=yr.create("idb-get",{originalErrorMessage:t?.message});Os.warn(e.message)}}}async function $b(s,t){try{const n=(await tE()).transaction(hu,"readwrite");await n.objectStore(hu).put(t,eE(s)),await n.done}catch(e){if(e instanceof ko)Os.warn(e.message);else{const n=yr.create("idb-set",{originalErrorMessage:e?.message});Os.warn(n.message)}}}function eE(s){return`${s.name}!${s.options.appId}`}const HM=1024,QM=30;class GM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $M(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Xb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(a=>a.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>QM){const a=XM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Os.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xb(),{heartbeatsToSend:e,unsentEntries:n}=KM(this._heartbeatsCache.heartbeats),a=Ph(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Os.warn(t),""}}}function Xb(){return new Date().toISOString().substring(0,10)}function KM(s,t=HM){const e=[];let n=s.slice();for(const a of s){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Wb(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Wb(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class $M{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PR()?kR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await YM(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return $b(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return $b(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Wb(s){return Ph(JSON.stringify({version:2,heartbeats:s})).length}function XM(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let n=1;n<s.length;n++)s[n].date<e&&(e=s[n].date,t=n);return t}function WM(s){jh(new cu("platform-logger",t=>new rM(t),"PRIVATE")),jh(new cu("heartbeat",t=>new GM(t),"PRIVATE")),vo(vg,Gb,s),vo(vg,Gb,"esm2020"),vo("fire-js","")}WM("");var JM="firebase",ZM="12.8.0";vo(JM,ZM,"app");var Jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vr,nE;(function(){var s;function t(N,M){function O(){}O.prototype=M.prototype,N.F=M.prototype,N.prototype=new O,N.prototype.constructor=N,N.D=function(L,z,U){for(var I=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)I[kt-2]=arguments[kt];return M.prototype[z].apply(L,I)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,M,O){O||(O=0);const L=Array(16);if(typeof M=="string")for(var z=0;z<16;++z)L[z]=M.charCodeAt(O++)|M.charCodeAt(O++)<<8|M.charCodeAt(O++)<<16|M.charCodeAt(O++)<<24;else for(z=0;z<16;++z)L[z]=M[O++]|M[O++]<<8|M[O++]<<16|M[O++]<<24;M=N.g[0],O=N.g[1],z=N.g[2];let U=N.g[3],I;I=M+(U^O&(z^U))+L[0]+3614090360&4294967295,M=O+(I<<7&4294967295|I>>>25),I=U+(z^M&(O^z))+L[1]+3905402710&4294967295,U=M+(I<<12&4294967295|I>>>20),I=z+(O^U&(M^O))+L[2]+606105819&4294967295,z=U+(I<<17&4294967295|I>>>15),I=O+(M^z&(U^M))+L[3]+3250441966&4294967295,O=z+(I<<22&4294967295|I>>>10),I=M+(U^O&(z^U))+L[4]+4118548399&4294967295,M=O+(I<<7&4294967295|I>>>25),I=U+(z^M&(O^z))+L[5]+1200080426&4294967295,U=M+(I<<12&4294967295|I>>>20),I=z+(O^U&(M^O))+L[6]+2821735955&4294967295,z=U+(I<<17&4294967295|I>>>15),I=O+(M^z&(U^M))+L[7]+4249261313&4294967295,O=z+(I<<22&4294967295|I>>>10),I=M+(U^O&(z^U))+L[8]+1770035416&4294967295,M=O+(I<<7&4294967295|I>>>25),I=U+(z^M&(O^z))+L[9]+2336552879&4294967295,U=M+(I<<12&4294967295|I>>>20),I=z+(O^U&(M^O))+L[10]+4294925233&4294967295,z=U+(I<<17&4294967295|I>>>15),I=O+(M^z&(U^M))+L[11]+2304563134&4294967295,O=z+(I<<22&4294967295|I>>>10),I=M+(U^O&(z^U))+L[12]+1804603682&4294967295,M=O+(I<<7&4294967295|I>>>25),I=U+(z^M&(O^z))+L[13]+4254626195&4294967295,U=M+(I<<12&4294967295|I>>>20),I=z+(O^U&(M^O))+L[14]+2792965006&4294967295,z=U+(I<<17&4294967295|I>>>15),I=O+(M^z&(U^M))+L[15]+1236535329&4294967295,O=z+(I<<22&4294967295|I>>>10),I=M+(z^U&(O^z))+L[1]+4129170786&4294967295,M=O+(I<<5&4294967295|I>>>27),I=U+(O^z&(M^O))+L[6]+3225465664&4294967295,U=M+(I<<9&4294967295|I>>>23),I=z+(M^O&(U^M))+L[11]+643717713&4294967295,z=U+(I<<14&4294967295|I>>>18),I=O+(U^M&(z^U))+L[0]+3921069994&4294967295,O=z+(I<<20&4294967295|I>>>12),I=M+(z^U&(O^z))+L[5]+3593408605&4294967295,M=O+(I<<5&4294967295|I>>>27),I=U+(O^z&(M^O))+L[10]+38016083&4294967295,U=M+(I<<9&4294967295|I>>>23),I=z+(M^O&(U^M))+L[15]+3634488961&4294967295,z=U+(I<<14&4294967295|I>>>18),I=O+(U^M&(z^U))+L[4]+3889429448&4294967295,O=z+(I<<20&4294967295|I>>>12),I=M+(z^U&(O^z))+L[9]+568446438&4294967295,M=O+(I<<5&4294967295|I>>>27),I=U+(O^z&(M^O))+L[14]+3275163606&4294967295,U=M+(I<<9&4294967295|I>>>23),I=z+(M^O&(U^M))+L[3]+4107603335&4294967295,z=U+(I<<14&4294967295|I>>>18),I=O+(U^M&(z^U))+L[8]+1163531501&4294967295,O=z+(I<<20&4294967295|I>>>12),I=M+(z^U&(O^z))+L[13]+2850285829&4294967295,M=O+(I<<5&4294967295|I>>>27),I=U+(O^z&(M^O))+L[2]+4243563512&4294967295,U=M+(I<<9&4294967295|I>>>23),I=z+(M^O&(U^M))+L[7]+1735328473&4294967295,z=U+(I<<14&4294967295|I>>>18),I=O+(U^M&(z^U))+L[12]+2368359562&4294967295,O=z+(I<<20&4294967295|I>>>12),I=M+(O^z^U)+L[5]+4294588738&4294967295,M=O+(I<<4&4294967295|I>>>28),I=U+(M^O^z)+L[8]+2272392833&4294967295,U=M+(I<<11&4294967295|I>>>21),I=z+(U^M^O)+L[11]+1839030562&4294967295,z=U+(I<<16&4294967295|I>>>16),I=O+(z^U^M)+L[14]+4259657740&4294967295,O=z+(I<<23&4294967295|I>>>9),I=M+(O^z^U)+L[1]+2763975236&4294967295,M=O+(I<<4&4294967295|I>>>28),I=U+(M^O^z)+L[4]+1272893353&4294967295,U=M+(I<<11&4294967295|I>>>21),I=z+(U^M^O)+L[7]+4139469664&4294967295,z=U+(I<<16&4294967295|I>>>16),I=O+(z^U^M)+L[10]+3200236656&4294967295,O=z+(I<<23&4294967295|I>>>9),I=M+(O^z^U)+L[13]+681279174&4294967295,M=O+(I<<4&4294967295|I>>>28),I=U+(M^O^z)+L[0]+3936430074&4294967295,U=M+(I<<11&4294967295|I>>>21),I=z+(U^M^O)+L[3]+3572445317&4294967295,z=U+(I<<16&4294967295|I>>>16),I=O+(z^U^M)+L[6]+76029189&4294967295,O=z+(I<<23&4294967295|I>>>9),I=M+(O^z^U)+L[9]+3654602809&4294967295,M=O+(I<<4&4294967295|I>>>28),I=U+(M^O^z)+L[12]+3873151461&4294967295,U=M+(I<<11&4294967295|I>>>21),I=z+(U^M^O)+L[15]+530742520&4294967295,z=U+(I<<16&4294967295|I>>>16),I=O+(z^U^M)+L[2]+3299628645&4294967295,O=z+(I<<23&4294967295|I>>>9),I=M+(z^(O|~U))+L[0]+4096336452&4294967295,M=O+(I<<6&4294967295|I>>>26),I=U+(O^(M|~z))+L[7]+1126891415&4294967295,U=M+(I<<10&4294967295|I>>>22),I=z+(M^(U|~O))+L[14]+2878612391&4294967295,z=U+(I<<15&4294967295|I>>>17),I=O+(U^(z|~M))+L[5]+4237533241&4294967295,O=z+(I<<21&4294967295|I>>>11),I=M+(z^(O|~U))+L[12]+1700485571&4294967295,M=O+(I<<6&4294967295|I>>>26),I=U+(O^(M|~z))+L[3]+2399980690&4294967295,U=M+(I<<10&4294967295|I>>>22),I=z+(M^(U|~O))+L[10]+4293915773&4294967295,z=U+(I<<15&4294967295|I>>>17),I=O+(U^(z|~M))+L[1]+2240044497&4294967295,O=z+(I<<21&4294967295|I>>>11),I=M+(z^(O|~U))+L[8]+1873313359&4294967295,M=O+(I<<6&4294967295|I>>>26),I=U+(O^(M|~z))+L[15]+4264355552&4294967295,U=M+(I<<10&4294967295|I>>>22),I=z+(M^(U|~O))+L[6]+2734768916&4294967295,z=U+(I<<15&4294967295|I>>>17),I=O+(U^(z|~M))+L[13]+1309151649&4294967295,O=z+(I<<21&4294967295|I>>>11),I=M+(z^(O|~U))+L[4]+4149444226&4294967295,M=O+(I<<6&4294967295|I>>>26),I=U+(O^(M|~z))+L[11]+3174756917&4294967295,U=M+(I<<10&4294967295|I>>>22),I=z+(M^(U|~O))+L[2]+718787259&4294967295,z=U+(I<<15&4294967295|I>>>17),I=O+(U^(z|~M))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+M&4294967295,N.g[1]=N.g[1]+(z+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+z&4294967295,N.g[3]=N.g[3]+U&4294967295}n.prototype.v=function(N,M){M===void 0&&(M=N.length);const O=M-this.blockSize,L=this.C;let z=this.h,U=0;for(;U<M;){if(z==0)for(;U<=O;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<M;)if(L[z++]=N.charCodeAt(U++),z==this.blockSize){a(this,L),z=0;break}}else for(;U<M;)if(L[z++]=N[U++],z==this.blockSize){a(this,L),z=0;break}}this.h=z,this.o+=M},n.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var M=1;M<N.length-8;++M)N[M]=0;M=this.o*8;for(var O=N.length-8;O<N.length;++O)N[O]=M&255,M/=256;for(this.v(N),N=Array(16),M=0,O=0;O<4;++O)for(let L=0;L<32;L+=8)N[M++]=this.g[O]>>>L&255;return N};function l(N,M){var O=f;return Object.prototype.hasOwnProperty.call(O,N)?O[N]:O[N]=M(N)}function c(N,M){this.h=M;const O=[];let L=!0;for(let z=N.length-1;z>=0;z--){const U=N[z]|0;L&&U==M||(O[z]=U,L=!1)}this.g=O}var f={};function m(N){return-128<=N&&N<128?l(N,function(M){return new c([M|0],M<0?-1:0)}):new c([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return b;if(N<0)return D(g(-N));const M=[];let O=1;for(let L=0;N>=O;L++)M[L]=N/O|0,O*=4294967296;return new c(M,0)}function y(N,M){if(N.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N.charAt(0)=="-")return D(y(N.substring(1),M));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=g(Math.pow(M,8));let L=b;for(let U=0;U<N.length;U+=8){var z=Math.min(8,N.length-U);const I=parseInt(N.substring(U,U+z),M);z<8?(z=g(Math.pow(M,z)),L=L.j(z).add(g(I))):(L=L.j(O),L=L.add(g(I)))}return L}var b=m(0),E=m(1),A=m(16777216);s=c.prototype,s.m=function(){if(R(this))return-D(this).m();let N=0,M=1;for(let O=0;O<this.g.length;O++){const L=this.i(O);N+=(L>=0?L:4294967296+L)*M,M*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(R(this))return"-"+D(this).toString(N);const M=g(Math.pow(N,6));var O=this;let L="";for(;;){const z=gt(O,M).g;O=B(O,z.j(M));let U=((O.g.length>0?O.g[0]:O.h)>>>0).toString(N);if(O=z,x(O))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(let M=0;M<N.g.length;M++)if(N.g[M]!=0)return!1;return!0}function R(N){return N.h==-1}s.l=function(N){return N=B(this,N),R(N)?-1:x(N)?0:1};function D(N){const M=N.g.length,O=[];for(let L=0;L<M;L++)O[L]=~N.g[L];return new c(O,~N.h).add(E)}s.abs=function(){return R(this)?D(this):this},s.add=function(N){const M=Math.max(this.g.length,N.g.length),O=[];let L=0;for(let z=0;z<=M;z++){let U=L+(this.i(z)&65535)+(N.i(z)&65535),I=(U>>>16)+(this.i(z)>>>16)+(N.i(z)>>>16);L=I>>>16,U&=65535,I&=65535,O[z]=I<<16|U}return new c(O,O[O.length-1]&-2147483648?-1:0)};function B(N,M){return N.add(D(M))}s.j=function(N){if(x(this)||x(N))return b;if(R(this))return R(N)?D(this).j(D(N)):D(D(this).j(N));if(R(N))return D(this.j(D(N)));if(this.l(A)<0&&N.l(A)<0)return g(this.m()*N.m());const M=this.g.length+N.g.length,O=[];for(var L=0;L<2*M;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(let z=0;z<N.g.length;z++){const U=this.i(L)>>>16,I=this.i(L)&65535,kt=N.i(z)>>>16,Xt=N.i(z)&65535;O[2*L+2*z]+=I*Xt,Z(O,2*L+2*z),O[2*L+2*z+1]+=U*Xt,Z(O,2*L+2*z+1),O[2*L+2*z+1]+=I*kt,Z(O,2*L+2*z+1),O[2*L+2*z+2]+=U*kt,Z(O,2*L+2*z+2)}for(N=0;N<M;N++)O[N]=O[2*N+1]<<16|O[2*N];for(N=M;N<2*M;N++)O[N]=0;return new c(O,0)};function Z(N,M){for(;(N[M]&65535)!=N[M];)N[M+1]+=N[M]>>>16,N[M]&=65535,M++}function rt(N,M){this.g=N,this.h=M}function gt(N,M){if(x(M))throw Error("division by zero");if(x(N))return new rt(b,b);if(R(N))return M=gt(D(N),M),new rt(D(M.g),D(M.h));if(R(M))return M=gt(N,D(M)),new rt(D(M.g),M.h);if(N.g.length>30){if(R(N)||R(M))throw Error("slowDivide_ only works with positive integers.");for(var O=E,L=M;L.l(N)<=0;)O=yt(O),L=yt(L);var z=xt(O,1),U=xt(L,1);for(L=xt(L,2),O=xt(O,2);!x(L);){var I=U.add(L);I.l(N)<=0&&(z=z.add(O),U=I),L=xt(L,1),O=xt(O,1)}return M=B(N,z.j(M)),new rt(z,M)}for(z=b;N.l(M)>=0;){for(O=Math.max(1,Math.floor(N.m()/M.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=g(O),I=U.j(M);R(I)||I.l(N)>0;)O-=L,U=g(O),I=U.j(M);x(U)&&(U=E),z=z.add(U),N=B(N,I)}return new rt(z,N)}s.B=function(N){return gt(this,N).h},s.and=function(N){const M=Math.max(this.g.length,N.g.length),O=[];for(let L=0;L<M;L++)O[L]=this.i(L)&N.i(L);return new c(O,this.h&N.h)},s.or=function(N){const M=Math.max(this.g.length,N.g.length),O=[];for(let L=0;L<M;L++)O[L]=this.i(L)|N.i(L);return new c(O,this.h|N.h)},s.xor=function(N){const M=Math.max(this.g.length,N.g.length),O=[];for(let L=0;L<M;L++)O[L]=this.i(L)^N.i(L);return new c(O,this.h^N.h)};function yt(N){const M=N.g.length+1,O=[];for(let L=0;L<M;L++)O[L]=N.i(L)<<1|N.i(L-1)>>>31;return new c(O,N.h)}function xt(N,M){const O=M>>5;M%=32;const L=N.g.length-O,z=[];for(let U=0;U<L;U++)z[U]=M>0?N.i(U+O)>>>M|N.i(U+O+1)<<32-M:N.i(U+O);return new c(z,N.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,nE=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,vr=c}).apply(typeof Jb<"u"?Jb:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iE,Kl,sE,xh,wg,rE,aE,oE;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=e(this);function a(h,v){if(v)t:{var w=n;h=h.split(".");for(var C=0;C<h.length-1;C++){var q=h[C];if(!(q in w))break t;w=w[q]}h=h[h.length-1],C=w[h],v=v(C),v!=C&&v!=null&&t(w,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var w=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&w.push([C,v[C]]);return w}});var l=l||{},c=this||self;function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,w){return h.call.apply(h.bind,arguments)}function g(h,v,w){return g=m,g.apply(null,arguments)}function y(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function b(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(C,q,K){for(var vt=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)vt[Ft-2]=arguments[Ft];return v.prototype[q].apply(C,vt)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const v=h.length;if(v>0){const w=Array(v);for(let C=0;C<v;C++)w[C]=h[C];return w}return[]}function x(h,v){for(let C=1;C<arguments.length;C++){const q=arguments[C];var w=typeof q;if(w=w!="object"?w:q?Array.isArray(q)?"array":w:"null",w=="array"||w=="object"&&typeof q.length=="number"){w=h.length||0;const K=q.length||0;h.length=w+K;for(let vt=0;vt<K;vt++)h[w+vt]=q[vt]}else h.push(q)}}class R{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(h){c.setTimeout(()=>{throw h},0)}function B(){var h=N;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Z{constructor(){this.h=this.g=null}add(v,w){const C=rt.get();C.set(v,w),this.h?this.h.next=C:this.g=C,this.h=C}}var rt=new R(()=>new gt,h=>h.reset());class gt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,xt=!1,N=new Z,M=()=>{const h=Promise.resolve(void 0);yt=()=>{h.then(O)}};function O(){for(var h;h=B();){try{h.h.call(h.g)}catch(w){D(w)}var v=rt;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}xt=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,v),c.removeEventListener("test",w,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function kt(h,v){z.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(kt,z),kt.prototype.init=function(h,v){const w=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&kt.Z.h.call(this)},kt.prototype.h=function(){kt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Xt="closure_listenable_"+(Math.random()*1e6|0),G=0;function dt(h,v,w,C,q){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!C,this.ha=q,this.key=++G,this.da=this.fa=!1}function bt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ut(h,v,w){for(const C in h)v.call(w,h[C],C,h)}function St(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function V(h){const v={};for(const w in h)v[w]=h[w];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(h,v){let w,C;for(let q=1;q<arguments.length;q++){C=arguments[q];for(w in C)h[w]=C[w];for(let K=0;K<J.length;K++)w=J[K],Object.prototype.hasOwnProperty.call(C,w)&&(h[w]=C[w])}}function pt(h){this.src=h,this.g={},this.h=0}pt.prototype.add=function(h,v,w,C,q){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const vt=_t(h,v,C,q);return vt>-1?(v=h[vt],w||(v.fa=!1)):(v=new dt(v,this.src,K,!!C,q),v.fa=w,h.push(v)),v};function ot(h,v){const w=v.type;if(w in h.g){var C=h.g[w],q=Array.prototype.indexOf.call(C,v,void 0),K;(K=q>=0)&&Array.prototype.splice.call(C,q,1),K&&(bt(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function _t(h,v,w,C){for(let q=0;q<h.length;++q){const K=h[q];if(!K.da&&K.listener==v&&K.capture==!!w&&K.ha==C)return q}return-1}var Tt="closure_lm_"+(Math.random()*1e6|0),Ht={};function zt(h,v,w,C,q){if(Array.isArray(v)){for(let K=0;K<v.length;K++)zt(h,v[K],w,C,q);return null}return w=Ve(w),h&&h[Xt]?h.J(v,w,f(C)?!!C.capture:!1,q):fe(h,v,w,!1,C,q)}function fe(h,v,w,C,q,K){if(!v)throw Error("Invalid event type");const vt=f(q)?!!q.capture:!!q;let Ft=Ct(h);if(Ft||(h[Tt]=Ft=new pt(h)),w=Ft.add(v,w,C,vt,K),w.proxy)return w;if(C=Re(),w.proxy=C,C.src=h,C.listener=w,h.addEventListener)U||(q=vt),q===void 0&&(q=!1),h.addEventListener(v.toString(),C,q);else if(h.attachEvent)h.attachEvent(wt(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Re(){function h(w){return v.call(h.src,h.listener,w)}const v=Et;return h}function Qe(h,v,w,C,q){if(Array.isArray(v))for(var K=0;K<v.length;K++)Qe(h,v[K],w,C,q);else C=f(C)?!!C.capture:!!C,w=Ve(w),h&&h[Xt]?(h=h.i,K=String(v).toString(),K in h.g&&(v=h.g[K],w=_t(v,w,C,q),w>-1&&(bt(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ct(h))&&(v=h.g[v.toString()],h=-1,v&&(h=_t(v,w,C,q)),(w=h>-1?v[h]:null)&&Me(w))}function Me(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Xt])ot(v.i,h);else{var w=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(w,C,h.capture):v.detachEvent?v.detachEvent(wt(w),C):v.addListener&&v.removeListener&&v.removeListener(C),(w=Ct(v))?(ot(w,h),w.h==0&&(w.src=null,v[Tt]=null)):bt(h)}}}function wt(h){return h in Ht?Ht[h]:Ht[h]="on"+h}function Et(h,v){if(h.da)h=!0;else{v=new kt(v,this);const w=h.listener,C=h.ha||h.src;h.fa&&Me(h),h=w.call(C,v)}return h}function Ct(h){return h=h[Tt],h instanceof pt?h:null}var se="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ve(h){return typeof h=="function"?h:(h[se]||(h[se]=function(v){return h.handleEvent(v)}),h[se])}function ee(){L.call(this),this.i=new pt(this),this.M=this,this.G=null}b(ee,L),ee.prototype[Xt]=!0,ee.prototype.removeEventListener=function(h,v,w,C){Qe(this,h,v,w,C)};function me(h,v){var w,C=h.G;if(C)for(w=[];C;C=C.G)w.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new z(v,h);else if(v instanceof z)v.target=v.target||h;else{var q=v;v=new z(C,h),mt(v,q)}q=!0;let K,vt;if(w)for(vt=w.length-1;vt>=0;vt--)K=v.g=w[vt],q=k(K,C,!0,v)&&q;if(K=v.g=h,q=k(K,C,!0,v)&&q,q=k(K,C,!1,v)&&q,w)for(vt=0;vt<w.length;vt++)K=v.g=w[vt],q=k(K,C,!1,v)&&q}ee.prototype.N=function(){if(ee.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let C=0;C<w.length;C++)bt(w[C]);delete h.g[v],h.h--}}this.G=null},ee.prototype.J=function(h,v,w,C){return this.i.add(String(h),v,!1,w,C)},ee.prototype.K=function(h,v,w,C){return this.i.add(String(h),v,!0,w,C)};function k(h,v,w,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let K=0;K<v.length;++K){const vt=v[K];if(vt&&!vt.da&&vt.capture==w){const Ft=vt.listener,Ue=vt.ha||vt.src;vt.fa&&ot(h.i,vt),q=Ft.call(Ue,C)!==!1&&q}}return q&&!C.defaultPrevented}function W(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function it(h){h.g=W(()=>{h.g=null,h.i&&(h.i=!1,it(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class ft extends L{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(h){L.call(this),this.h=h,this.g={}}b(ct,L);var Rt=[];function Bt(h){ut(h.g,function(v,w){this.g.hasOwnProperty(w)&&Me(v)},h),h.g={}}ct.prototype.N=function(){ct.Z.N.call(this),Bt(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=c.JSON.stringify,ne=c.JSON.parse,Ne=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function dn(){}function Vn(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function De(){z.call(this,"d")}b(De,z);function ii(){z.call(this,"c")}b(ii,z);var je={},Pu=null;function Ea(){return Pu=Pu||new ee}je.Ia="serverreachability";function ku(h){z.call(this,je.Ia,h)}b(ku,z);function Pi(h){const v=Ea();me(v,new ku(v))}je.STAT_EVENT="statevent";function Rr(h,v){z.call(this,je.STAT_EVENT,h),this.stat=v}b(Rr,z);function Ge(h){const v=Ea();me(v,new Rr(v,h))}je.Ja="timingevent";function ki(h,v){z.call(this,je.Ja,h),this.size=v}b(ki,z);function zi(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function Mf(h,v,w,C,q,K){h.info(function(){if(h.g)if(K){var vt="",Ft=K.split("&");for(let ue=0;ue<Ft.length;ue++){var Ue=Ft[ue].split("=");if(Ue.length>1){const Oe=Ue[0];Ue=Ue[1];const oi=Oe.split("_");vt=oi.length>=2&&oi[1]=="type"?vt+(Oe+"="+Ue+"&"):vt+(Oe+"=redacted&")}}}else vt=null;else vt=K;return"XMLHTTP REQ ("+C+") [attempt "+q+"]: "+v+`
`+w+`
`+vt})}function zu(h,v,w,C,q,K,vt){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+q+"]: "+v+`
`+w+`
`+K+" "+vt})}function Li(h,v,w,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Nf(h,w)+(C?" "+C:"")})}function Mr(h,v){h.info(function(){return"TIMEOUT: "+v})}bi.prototype.info=function(){};function Nf(h,v){if(!h.g)return v;if(!v)return null;try{const K=JSON.parse(v);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var w=K[h];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var q=C[0];if(q!="noop"&&q!="stop"&&q!="close")for(let vt=1;vt<C.length;vt++)C[vt]=""}}}}return Gt(K)}catch{return v}}var Nr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fo;function Dr(){}b(Dr,dn),Dr.prototype.g=function(){return new XMLHttpRequest},Fo=new Dr;function cs(h){return encodeURIComponent(String(h))}function Lu(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function _i(h,v,w,C){this.j=h,this.i=v,this.l=w,this.S=C||1,this.V=new ct(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wi}function wi(){this.i=null,this.g="",this.h=!1}var Ke={},ln={};function ji(h,v,w){h.M=1,h.A=Or(Xe(v)),h.u=w,h.R=!0,Sa(h,null)}function Sa(h,v){h.F=Date.now(),Ui(h),h.B=Xe(h.A);var w=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Ca(w.i,"t",C),h.C=0,w=h.j.L,h.h=new wi,h.g=Zu(h.j,w?v:null,!h.u),h.P>0&&(h.O=new ft(g(h.Y,h,h.g),h.P)),v=h.V,w=h.g,C=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Rt[0]=q.toString()),q=Rt);for(let K=0;K<q.length;K++){const vt=zt(w,q[K],C||v.handleEvent,!1,v.h||v);if(!vt)break;v.g[vt.key]=vt}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Pi(),Mf(h.i,h.v,h.B,h.l,h.S,h.u)}_i.prototype.ba=function(h){h=h.target;const v=this.O;v&&Ti(h)==3?v.j():this.Y(h)},_i.prototype.Y=function(h){try{if(h==this.g)t:{const Ft=Ti(this.g),Ue=this.g.ya(),ue=this.g.ca();if(!(Ft<3)&&(Ft!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||Ft!=4||Ue==7||(Ue==8||ue<=0?Pi(3):Pi(2)),Bi(this);var v=this.g.ca();this.X=v;var w=Df(this);if(this.o=v==200,zu(this.i,this.v,this.B,this.l,this.S,Ft,v),this.o){if(this.U&&!this.L){e:{if(this.g){var C,q=this.g;if((C=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var K=C;break e}}K=null}if(h=K)Li(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fi(this,h);else{this.o=!1,this.m=3,Ge(12),Qn(this),si(this);break t}}if(this.R){h=!0;let Oe;for(;!this.K&&this.C<w.length;)if(Oe=Uu(this,w),Oe==ln){Ft==4&&(this.m=4,Ge(14),h=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Ke){this.m=4,Ge(15),Li(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Li(this.i,this.l,Oe,null),Fi(this,Oe);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||w.length!=0||this.h.h||(this.m=1,Ge(16),h=!1),this.o=this.o&&h,!h)Li(this.i,this.l,w,"[Invalid Chunked Response]"),Qn(this),si(this);else if(w.length>0&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.aa&&!vt.P&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),il(vt),vt.P=!0,Ge(11))}}else Li(this.i,this.l,w,null),Fi(this,w);Ft==4&&Qn(this),this.o&&!this.K&&(Ft==4?$u(this.j,this):(this.o=!1,Ui(this)))}else fs(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),Qn(this),si(this)}}}catch{}finally{}};function Df(h){if(!ju(h))return h.g.la();const v=mn(h.g);if(v==="")return"";let w="";const C=v.length,q=Ti(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Qn(h),si(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<C;K++)h.h.h=!0,w+=h.h.i.decode(v[K],{stream:!(q&&K==C-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function ju(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Uu(h,v){var w=h.C,C=v.indexOf(`
`,w);return C==-1?ln:(w=Number(v.substring(w,C)),isNaN(w)?Ke:(C+=1,C+w>v.length?ln:(v=v.slice(C,C+w),h.C=C+w,v)))}_i.prototype.cancel=function(){this.K=!0,Qn(this)};function Ui(h){h.T=Date.now()+h.H,Ta(h,h.H)}function Ta(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=zi(g(h.aa,h),v)}function Bi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}_i.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Mr(this.i,this.B),this.M!=2&&(Pi(),Ge(17)),Qn(this),this.m=2,si(this)):Ta(this,this.T-h)};function si(h){h.j.I==0||h.K||$u(h.j,h)}function Qn(h){Bi(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Bt(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Fi(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||Yi(w.h,h))){if(!h.L&&Yi(w.h,h)&&w.I==3){try{var C=w.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var q=C;if(q[0]==0){t:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Oa(w),Fs(w);else break t;jr(w),Ge(18)}}else w.xa=q[1],0<w.xa-w.K&&q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=zi(g(w.Va,w),6e3));qi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Xi(w,11)}else if((h.L||w.g==h)&&Oa(w),!I(v))for(q=w.Ba.g.parse(v),v=0;v<q.length;v++){let ue=q[v];const Oe=ue[0];if(!(Oe<=w.K))if(w.K=Oe,ue=ue[1],w.I==2)if(ue[0]=="c"){w.M=ue[1],w.ba=ue[2];const oi=ue[3];oi!=null&&(w.ka=oi,w.j.info("VER="+w.ka));const Wi=ue[4];Wi!=null&&(w.za=Wi,w.j.info("SVER="+w.za));const xi=ue[5];xi!=null&&typeof xi=="number"&&xi>0&&(C=1.5*xi,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Ai=h.g;if(Ai){const Ur=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ur){var K=C.h;K.g||Ur.indexOf("spdy")==-1&&Ur.indexOf("quic")==-1&&Ur.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ho(K,K.h),K.h=null))}if(C.G){const Ia=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(C.wa=Ia,ge(C.J,C.G,Ia))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var vt=h;if(C.na=Ju(C,C.L?C.ba:null,C.W),vt.L){Qo(C.h,vt);var Ft=vt,Ue=C.O;Ue&&(Ft.H=Ue),Ft.D&&(Bi(Ft),Ui(Ft)),C.g=vt}else Gu(C);w.i.length>0&&$i(w)}else ue[0]!="stop"&&ue[0]!="close"||Xi(w,7);else w.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Xi(w,7):el(w):ue[0]!="noop"&&w.l&&w.l.qa(ue),w.A=0)}}Pi(4)}catch{}}var $e=class{constructor(h,v){this.g=h,this.map=v}};function qo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qi(h){return h.h?1:h.g?h.g.size:0}function Yi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ho(h,v){h.g?h.g.add(v):h.h=v}function Qo(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}qo.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Go(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return A(h.i)}var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xa(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const C=h[w].indexOf("=");let q,K=null;C>=0?(q=h[w].substring(0,C),K=h[w].substring(C+1)):q=h[w],v(q,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Gn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Gn?(this.l=h.l,un(this,h.j),this.o=h.o,this.g=h.g,Ps(this,h.u),this.h=h.h,Ko(this,Hu(h.i)),this.m=h.m):h&&(v=String(h).match(Bu))?(this.l=!1,un(this,v[1]||"",!0),this.o=Hi(v[2]||""),this.g=Hi(v[3]||"",!0),Ps(this,v[4]),this.h=Hi(v[5]||"",!0),Ko(this,v[6]||"",!0),this.m=Hi(v[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Gn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ir(v,Aa,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ir(v,Aa,!0),"@"),h.push(cs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ir(w,w.charAt(0)=="/"?$o:Fu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ir(w,qu)),h.join("")},Gn.prototype.resolve=function(h){const v=Xe(this);let w=!!h.j;w?un(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var C=h.h;if(w)Ps(v,h.u);else if(w=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var q=v.h.lastIndexOf("/");q!=-1&&(C=v.h.slice(0,q+1)+C)}if(q=C,q==".."||q==".")C="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){C=q.lastIndexOf("/",0)==0,q=q.split("/");const K=[];for(let vt=0;vt<q.length;){const Ft=q[vt++];Ft=="."?C&&vt==q.length&&K.push(""):Ft==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&vt==q.length&&K.push("")):(K.push(Ft),C=!0)}C=K.join("/")}else C=q}return w?v.h=C:w=h.i.toString()!=="",w?Ko(v,Hu(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Xe(h){return new Gn(h)}function un(h,v,w){h.j=w?Hi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ps(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Ko(h,v,w){v instanceof zs?(h.i=v,Ra(h.i,h.l)):(w||(v=Ir(v,ks)),h.i=new zs(v,h.l))}function ge(h,v,w){h.i.set(v,w)}function Or(h){return ge(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Hi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ir(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Pn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Aa=/[#\/\?@]/g,Fu=/[#\?:]/g,$o=/[#\?]/g,ks=/[#\?@]/g,qu=/#/g;function zs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&xa(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}s=zs.prototype,s.add=function(h,v){kn(this),this.i=null,h=Ls(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function Yu(h,v){kn(h),v=Ls(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Xo(h,v){return kn(h),v=Ls(h,v),h.g.has(v)}s.forEach=function(h,v){kn(this),this.g.forEach(function(w,C){w.forEach(function(q){h.call(v,q,C,this)},this)},this)};function Wo(h,v){kn(h);let w=[];if(typeof v=="string")Xo(h,v)&&(w=w.concat(h.g.get(Ls(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}s.set=function(h,v){return kn(this),this.i=null,h=Ls(this,h),Xo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Wo(this,h),h.length>0?String(h[0]):v):v};function Ca(h,v,w){Yu(h,v),w.length>0&&(h.i=null,h.g.set(Ls(h,v),A(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var w=v[C];const q=cs(w);w=Wo(this,w);for(let K=0;K<w.length;K++){let vt=q;w[K]!==""&&(vt+="="+cs(w[K])),h.push(vt)}}return this.i=h.join("&")};function Hu(h){const v=new zs;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ls(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ra(h,v){v&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(w,C){const q=C.toLowerCase();C!=q&&(Yu(this,C),Ca(this,q,w))},h)),h.j=v}function Ei(h,v){const w=new bi;if(c.Image){const C=new Image;C.onload=y(ri,w,"TestLoadImage: loaded",!0,v,C),C.onerror=y(ri,w,"TestLoadImage: error",!1,v,C),C.onabort=y(ri,w,"TestLoadImage: abort",!1,v,C),C.ontimeout=y(ri,w,"TestLoadImage: timeout",!1,v,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function Jo(h,v){const w=new bi,C=new AbortController,q=setTimeout(()=>{C.abort(),ri(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(K=>{clearTimeout(q),K.ok?ri(w,"TestPingServer: ok",!0,v):ri(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),ri(w,"TestPingServer: error",!1,v)})}function ri(h,v,w,C,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),C(w)}catch{}}function js(){this.g=new Ne}function Qi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(Qi,dn),Qi.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(h,v){ee.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Vr,ee),s=Vr.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Si(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Us(this):Si(this),this.readyState==3&&Ma(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Us(this))},s.Na=function(h){this.g&&(this.response=h,Us(this))},s.ga=function(){this.g&&Us(this)};function Us(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Si(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Si(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ai(h){let v="";return ut(h,function(w,C){v+=C,v+=":",v+=w,v+=`\r
`}),v}function Pr(h,v,w){t:{for(C in w){var C=!1;break t}C=!0}C||(w=ai(w),typeof h=="string"?w!=null&&cs(w):ge(h,v,w))}function be(h){ee.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(be,ee);var Gi=/^https?$/i,Zo=["POST","PUT"];s=be.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fo.g(),this.g.onreadystatechange=E(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(K){kr(this,K);return}if(h=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var q in C)w.set(q,C[q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())w.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Zo,v,void 0)>=0)||C||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,vt]of w)this.g.setRequestHeader(K,vt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){kr(this,K)}};function kr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,tl(h),hs(h)}function tl(h){h.A||(h.A=!0,me(h,"complete"),me(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,me(this,"complete"),me(this,"abort"),hs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),be.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},s.Xa=function(){zr(this)};function zr(h){if(h.h&&typeof l<"u"){if(h.v&&Ti(h)==4)setTimeout(h.Ca.bind(h),0);else if(me(h,"readystatechange"),Ti(h)==4){h.h=!1;try{const K=h.ca();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var w;if(!(w=v)){var C;if(C=K===0){let vt=String(h.D).match(Bu)[1]||null;!vt&&c.self&&c.self.location&&(vt=c.self.location.protocol.slice(0,-1)),C=!Gi.test(vt?vt.toLowerCase():"")}w=C}if(w)me(h,"complete"),me(h,"success");else{h.o=6;try{var q=Ti(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",tl(h)}}finally{hs(h)}}}}function hs(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||me(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ti(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),ne(v)}};function mn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(h){const v={};h=(h.g&&Ti(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(I(h[C]))continue;var w=Lu(h[C]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=v[q]||[];v[q]=K,K.push(w)}St(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Bs(h){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ki("baseRetryDelayMs",5e3,h),this.Za=Ki("retryDelaySeedMs",1e4,h),this.Ta=Ki("forwardChannelMaxRetries",2,h),this.va=Ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new qo(h&&h.concurrentRequestLimit),this.Ba=new js,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Bs.prototype,s.ka=8,s.I=1,s.connect=function(h,v,w,C){Ge(0),this.W=h,this.H=v||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=Ju(this,null,this.W),$i(this)};function el(h){if(Na(h),h.I==3){var v=h.V++,w=Xe(h.J);if(ge(w,"SID",h.M),ge(w,"RID",v),ge(w,"TYPE","terminate"),Lr(h,w),v=new _i(h,h.j,v),v.M=2,v.A=Or(Xe(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=v.A,w=!0),w||(v.g=Zu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ui(v)}Wu(h)}function Fs(h){h.g&&(il(h),h.g.cancel(),h.g=null)}function Na(h){Fs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Oa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function $i(h){if(!Yo(h.h)&&!h.m){h.m=!0;var v=h.Ea;yt||M(),xt||(yt(),xt=!0),N.add(v,h),h.D=0}}function Da(h,v){return qi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=zi(g(h.Ea,h,v),Xu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new _i(this,this.j,h);let K=this.o;if(this.U&&(K?(K=V(K),mt(K,this.U)):K=this.U),this.u!==null||this.R||(q.J=K,K=null),this.S)t:{for(var v=0,w=0;w<this.i.length;w++){e:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=w;break t}if(v===4096||w===this.i.length-1){v=w+1;break t}}v=1e3}else v=1e3;v=Qu(this,q,v),w=Xe(this.J),ge(w,"RID",h),ge(w,"CVER",22),this.G&&ge(w,"X-HTTP-Session-Id",this.G),Lr(this,w),K&&(this.R?v="headers="+cs(ai(K))+"&"+v:this.u&&Pr(w,this.u,K)),Ho(this.h,q),this.Ra&&ge(w,"TYPE","init"),this.S?(ge(w,"$req",v),ge(w,"SID","null"),q.U=!0,ji(q,w,null)):ji(q,w,v),this.I=2}}else this.I==3&&(h?nl(this,h):this.i.length==0||Yo(this.h)||nl(this))};function nl(h,v){var w;v?w=v.l:w=h.V++;const C=Xe(h.J);ge(C,"SID",h.M),ge(C,"RID",w),ge(C,"AID",h.K),Lr(h,C),h.u&&h.o&&Pr(C,h.u,h.o),w=new _i(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Qu(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ho(h.h,w),ji(w,C,v)}function Lr(h,v){h.H&&ut(h.H,function(w,C){ge(v,C,w)}),h.l&&ut({},function(w,C){ge(v,C,w)})}function Qu(h,v,w){w=Math.min(h.i.length,w);const C=h.l?g(h.l.Ka,h.l,h):null;t:{var q=h.i;let Ft=-1;for(;;){const Ue=["count="+w];Ft==-1?w>0?(Ft=q[0].g,Ue.push("ofs="+Ft)):Ft=0:Ue.push("ofs="+Ft);let ue=!0;for(let Oe=0;Oe<w;Oe++){var K=q[Oe].g;const oi=q[Oe].map;if(K-=Ft,K<0)Ft=Math.max(0,q[Oe].g-100),ue=!1;else try{K="req"+K+"_"||"";try{var vt=oi instanceof Map?oi:Object.entries(oi);for(const[Wi,xi]of vt){let Ai=xi;f(xi)&&(Ai=Gt(xi)),Ue.push(K+Wi+"="+encodeURIComponent(Ai))}}catch(Wi){throw Ue.push(K+"type="+encodeURIComponent("_badmap")),Wi}}catch{C&&C(oi)}}if(ue){vt=Ue.join("&");break t}}vt=void 0}return h=h.i.splice(0,w),v.G=h,vt}function Gu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;yt||M(),xt||(yt(),xt=!0),N.add(v,h),h.A=0}}function jr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=zi(g(h.Da,h),Xu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=zi(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),Fs(this),Ku(this))};function il(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ku(h){h.g=new _i(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Xe(h.na);ge(v,"RID","rpc"),ge(v,"SID",h.M),ge(v,"AID",h.K),ge(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&ge(v,"TO",h.ia),ge(v,"TYPE","xmlhttp"),Lr(h,v),h.u&&h.o&&Pr(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Or(Xe(v)),w.u=null,w.R=!0,Sa(w,h)}s.Va=function(){this.C!=null&&(this.C=null,Fs(this),jr(this),Ge(19))};function Oa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function $u(h,v){var w=null;if(h.g==v){Oa(h),il(h),h.g=null;var C=2}else if(Yi(h.h,v))w=v.G,Qo(h.h,v),C=1;else return;if(h.I!=0){if(v.o)if(C==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var q=h.D;C=Ea(),me(C,new ki(C,w)),$i(h)}else Gu(h);else if(q=v.m,q==3||q==0&&v.X>0||!(C==1&&Da(h,v)||C==2&&jr(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),q){case 1:Xi(h,5);break;case 4:Xi(h,10);break;case 3:Xi(h,6);break;default:Xi(h,2)}}}function Xu(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function Xi(h,v){if(h.j.info("Error code "+v),v==2){var w=g(h.bb,h),C=h.Ua;const q=!C;C=new Gn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||un(C,"https"),Or(C),q?Ei(C.toString(),w):Jo(C.toString(),w)}else Ge(2);h.I=0,h.l&&h.l.pa(v),Wu(h),Na(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Wu(h){if(h.I=0,h.ja=[],h.l){const v=Go(h.h);(v.length!=0||h.i.length!=0)&&(x(h.ja,v),x(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Ju(h,v,w){var C=w instanceof Gn?Xe(w):new Gn(w);if(C.g!="")v&&(C.g=v+"."+C.g),Ps(C,C.u);else{var q=c.location;C=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const K=new Gn(null);C&&un(K,C),v&&(K.g=v),q&&Ps(K,q),w&&(K.h=w),C=K}return w=h.G,v=h.wa,w&&v&&ge(C,w,v),ge(C,"VER",h.ka),Lr(h,C),C}function Zu(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new be(new Qi({ab:w})):new be(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}s=tc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qs(){}qs.prototype.g=function(h,v){return new Nn(h,v)};function Nn(h,v){ee.call(this),this.g=new Bs(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ds(this)}b(Nn,ee),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){el(this.g)},Nn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Gt(h),h=w);v.i.push(new $e(v.Ya++,h)),v.I==3&&$i(v)},Nn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,Nn.Z.N.call(this)};function ec(h){De.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){t:{for(const w in v){h=w;break t}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(ec,De);function nc(){ii.call(this),this.status=1}b(nc,ii);function ds(h){this.g=h}b(ds,tc),ds.prototype.ra=function(){me(this.g,"a")},ds.prototype.qa=function(h){me(this.g,new ec(h))},ds.prototype.pa=function(h){me(this.g,new nc)},ds.prototype.oa=function(){me(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,oE=function(){return new qs},aE=function(){return Ea()},rE=je,wg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,xh=Nr,Bo.COMPLETE="complete",sE=Bo,Vn.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",ee.prototype.listen=ee.prototype.J,Kl=Vn,be.prototype.listenOnce=be.prototype.K,be.prototype.getLastError=be.prototype.Ha,be.prototype.getLastErrorCode=be.prototype.ya,be.prototype.getStatus=be.prototype.ca,be.prototype.getResponseJson=be.prototype.La,be.prototype.getResponseText=be.prototype.la,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Fa,iE=be}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});class Cn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");let zo="12.8.0";function tN(s){zo=s}const ha=new Xw("@firebase/firestore");function ho(){return ha.logLevel}function At(s,...t){if(ha.logLevel<=ae.DEBUG){const e=t.map(Jg);ha.debug(`Firestore (${zo}): ${s}`,...e)}}function Is(s,...t){if(ha.logLevel<=ae.ERROR){const e=t.map(Jg);ha.error(`Firestore (${zo}): ${s}`,...e)}}function xo(s,...t){if(ha.logLevel<=ae.WARN){const e=t.map(Jg);ha.warn(`Firestore (${zo}): ${s}`,...e)}}function Jg(s){if(typeof s=="string")return s;try{return(function(e){return JSON.stringify(e)})(s)}catch{return s}}function Pt(s,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,lE(s,n,e)}function lE(s,t,e){let n=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw Is(n),new Error(n)}function de(s,t,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,s||lE(t,a,n)}function Ut(s,t){return s}const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dt extends ko{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class uE{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class eN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Cn.UNAUTHENTICATED)))}shutdown(){}}class nN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class iN{constructor(t){this.t=t,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){de(this.o===void 0,42304);let n=this.i;const a=m=>this.i!==n?(n=this.i,e(m)):Promise.resolve();let l=new br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new br,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;t.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new br)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(de(typeof n.accessToken=="string",31837,{l:n}),new uE(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return de(t===null||typeof t=="string",2055,{h:t}),new Cn(t)}}class sN{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const t=this.A();return t&&this.R.set("Authorization",t),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class rN{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new sN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aN{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zM(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){de(this.o===void 0,3512);const n=l=>{l.error!=null&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,At("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>n(l)))};const a=l=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(de(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Zb(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function oN(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<s;n++)e[n]=Math.floor(256*Math.random());return e}class Zg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=oN(40);for(let l=0;l<a.length;++l)n.length<20&&a[l]<e&&(n+=t.charAt(a[l]%62))}return n}}function Zt(s,t){return s<t?-1:s>t?1:0}function Eg(s,t){const e=Math.min(s.length,t.length);for(let n=0;n<e;n++){const a=s.charAt(n),l=t.charAt(n);if(a!==l)return jm(a)===jm(l)?Zt(a,l):jm(a)?1:-1}return Zt(s.length,t.length)}const lN=55296,uN=57343;function jm(s){const t=s.charCodeAt(0);return t>=lN&&t<=uN}function Ao(s,t,e){return s.length===t.length&&s.every(((n,a)=>e(n,t[a])))}const t_="__name__";class ss{constructor(t,e,n){e===void 0?e=0:e>t.length&&Pt(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&Pt(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return ss.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ss?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let a=0;a<n;a++){const l=ss.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return Zt(t.length,e.length)}static compareSegments(t,e){const n=ss.isNumericId(t),a=ss.isNumericId(e);return n&&!a?-1:!n&&a?1:n&&a?ss.extractNumericId(t).compare(ss.extractNumericId(e)):Eg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vr.fromString(t.substring(4,t.length-2))}}class Pe extends ss{construct(t,e,n){return new Pe(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Dt(lt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((a=>a.length>0)))}return new Pe(e)}static emptyPath(){return new Pe([])}}const cN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends ss{construct(t,e,n){return new En(t,e,n)}static isValidIdentifier(t){return cN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new En([t_])}static fromServerFormat(t){const e=[];let n="",a=0;const l=()=>{if(n.length===0)throw new Dt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let c=!1;for(;a<t.length;){const f=t[a];if(f==="\\"){if(a+1===t.length)throw new Dt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Dt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(n+=f,a++):(l(),a++)}if(l(),c)throw new Dt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new En(e)}static emptyPath(){return new En([])}}class It{constructor(t){this.path=t}static fromPath(t){return new It(Pe.fromString(t))}static fromName(t){return new It(Pe.fromString(t).popFirst(5))}static empty(){return new It(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new It(new Pe(t.slice()))}}function hN(s,t,e){if(!e)throw new Dt(lt.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function fN(s,t,e,n){if(t===!0&&n===!0)throw new Dt(lt.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function e_(s){if(!It.isDocumentKey(s))throw new Dt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function cE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function tp(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":Pt(12329,{type:typeof s})}function fu(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Dt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=tp(s);throw new Dt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function sn(s,t){const e={typeString:s};return t&&(e.value=t),e}function Mu(s,t){if(!cE(s))throw new Dt(lt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const a=t[n].typeString,l="value"in t[n]?{value:t[n].value}:void 0;if(!(n in s)){e=`JSON missing required field: '${n}'`;break}const c=s[n];if(a&&typeof c!==a){e=`JSON field '${n}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){e=`Expected '${n}' field to equal '${l.value}'`;break}}if(e)throw new Dt(lt.INVALID_ARGUMENT,e);return!0}const n_=-62135596800,i_=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(t){return Ce.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*i_);return new Ce(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<n_)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Dt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i_}_compareTo(t){return this.seconds===t.seconds?Zt(this.nanoseconds,t.nanoseconds):Zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Mu(t,Ce._jsonSchema))return new Ce(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-n_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:sn("string",Ce._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};class Lt{static fromTimestamp(t){return new Lt(t)}static min(){return new Lt(new Ce(0,0))}static max(){return new Lt(new Ce(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const du=-1;function dN(s,t){const e=s.toTimestamp().seconds,n=s.toTimestamp().nanoseconds+1,a=Lt.fromTimestamp(n===1e9?new Ce(e+1,0):new Ce(e,n));return new _r(a,It.empty(),t)}function mN(s){return new _r(s.readTime,s.key,du)}class _r{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new _r(Lt.min(),It.empty(),du)}static max(){return new _r(Lt.max(),It.empty(),du)}}function gN(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=It.comparator(s.documentKey,t.documentKey),e!==0?e:Zt(s.largestBatchId,t.largestBatchId))}const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Lo(s){if(s.code!==lt.FAILED_PRECONDITION||s.message!==pN)throw s;At("LocalStore","Unexpectedly lost primary lease")}class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new at(((n,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(n,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(n,a)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof at?e:at.resolve(e)}catch(e){return at.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):at.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):at.reject(e)}static resolve(t){return new at(((e,n)=>{e(t)}))}static reject(t){return new at(((e,n)=>{n(t)}))}static waitFor(t){return new at(((e,n)=>{let a=0,l=0,c=!1;t.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&e()}),(m=>n(m)))})),c=!0,l===a&&e()}))}static or(t){let e=at.resolve(!1);for(const n of t)e=e.next((a=>a?at.resolve(a):n()));return e}static forEach(t,e){const n=[];return t.forEach(((a,l)=>{n.push(e.call(this,a,l))})),this.waitFor(n)}static mapArray(t,e){return new at(((n,a)=>{const l=t.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;e(t[g]).next((y=>{c[g]=y,++f,f===l&&n(c)}),(y=>a(y)))}}))}static doWhile(t,e){return new at(((n,a)=>{const l=()=>{t()===!0?e().next((()=>{l()}),a):n()};l()}))}}function vN(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function jo(s){return s.name==="IndexedDbTransactionError"}class cf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}cf.ce=-1;const ep=-1;function hf(s){return s==null}function Uh(s){return s===0&&1/s==-1/0}function bN(s){return typeof s=="number"&&Number.isInteger(s)&&!Uh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const hE="";function _N(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=s_(t)),t=wN(s.get(e),t);return s_(t)}function wN(s,t){let e=t;const n=s.length;for(let a=0;a<n;a++){const l=s.charAt(a);switch(l){case"\0":e+="";break;case hE:e+="";break;default:e+=l}}return e}function s_(s){return s+hE+""}function r_(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function va(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function fE(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class ke{constructor(t,e){this.comparator=t,this.root=e||_n.EMPTY}insert(t,e){return new ke(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(t){return new ke(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_n.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return e+n.left.size;a<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ch(this.root,t,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ch(this.root,t,this.comparator,!0)}}class ch{constructor(t,e,n,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?n(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _n{constructor(t,e,n,a,l){this.key=t,this.value=e,this.color=n??_n.RED,this.left=a??_n.EMPTY,this.right=l??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,a,l){return new _n(t??this.key,e??this.value,n??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let a=this;const l=n(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,n),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return _n.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Pt(27949);return t+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt(57766)}get value(){throw Pt(16141)}get color(){throw Pt(16727)}get left(){throw Pt(29726)}get right(){throw Pt(36894)}copy(t,e,n,a,l){return this}insert(t,e,n){return new _n(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class on{constructor(t){this.comparator=t,this.data=new ke(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(t){return new a_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof on)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=n.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new on(this.comparator);return e.data=t,e}}class a_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Di{constructor(t){this.fields=t,t.sort(En.comparator)}static empty(){return new Di([])}unionWith(t){let e=new on(En.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Di(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ao(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new dE("Invalid base64 string: "+l):l}})(t);return new Sn(e)}static fromUint8Array(t){const e=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(t);return new Sn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const EN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(s){if(de(!!s,39018),typeof s=="string"){let t=0;const e=EN.exec(s);if(de(!!e,46558,{timestamp:s}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(s);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:qe(s.seconds),nanos:qe(s.nanos)}}function qe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Er(s){return typeof s=="string"?Sn.fromBase64String(s):Sn.fromUint8Array(s)}const mE="server_timestamp",gE="__type__",pE="__previous_value__",yE="__local_write_time__";function np(s){return(s?.mapValue?.fields||{})[gE]?.stringValue===mE}function ff(s){const t=s.mapValue.fields[pE];return np(t)?ff(t):t}function mu(s){const t=wr(s.mapValue.fields[yE].timestampValue);return new Ce(t.seconds,t.nanos)}class SN{constructor(t,e,n,a,l,c,f,m,g,y,b){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=b}}const Bh="(default)";class gu{constructor(t,e){this.projectId=t,this.database=e||Bh}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(t){return t instanceof gu&&t.projectId===this.projectId&&t.database===this.database}}function TN(s,t){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Dt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(s.options.projectId,t)}const vE="__type__",xN="__max__",hh={mapValue:{}},bE="__vector__",Fh="value";function Sr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?np(s)?4:CN(s)?9007199254740991:AN(s)?10:11:Pt(28295,{value:s})}function ls(s,t){if(s===t)return!0;const e=Sr(s);if(e!==Sr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return mu(s).isEqual(mu(t));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=wr(a.timestampValue),f=wr(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(a,l){return Er(a.bytesValue).isEqual(Er(l.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(a,l){return qe(a.geoPointValue.latitude)===qe(l.geoPointValue.latitude)&&qe(a.geoPointValue.longitude)===qe(l.geoPointValue.longitude)})(s,t);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return qe(a.integerValue)===qe(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=qe(a.doubleValue),f=qe(l.doubleValue);return c===f?Uh(c)===Uh(f):isNaN(c)&&isNaN(f)}return!1})(s,t);case 9:return Ao(s.arrayValue.values||[],t.arrayValue.values||[],ls);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(r_(c)!==r_(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!ls(c[m],f[m])))return!1;return!0})(s,t);default:return Pt(52216,{left:s})}}function pu(s,t){return(s.values||[]).find((e=>ls(e,t)))!==void 0}function Co(s,t){if(s===t)return 0;const e=Sr(s),n=Sr(t);if(e!==n)return Zt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Zt(s.booleanValue,t.booleanValue);case 2:return(function(l,c){const f=qe(l.integerValue||l.doubleValue),m=qe(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(s,t);case 3:return o_(s.timestampValue,t.timestampValue);case 4:return o_(mu(s),mu(t));case 5:return Eg(s.stringValue,t.stringValue);case 6:return(function(l,c){const f=Er(l),m=Er(c);return f.compareTo(m)})(s.bytesValue,t.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const y=Zt(f[g],m[g]);if(y!==0)return y}return Zt(f.length,m.length)})(s.referenceValue,t.referenceValue);case 8:return(function(l,c){const f=Zt(qe(l.latitude),qe(c.latitude));return f!==0?f:Zt(qe(l.longitude),qe(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return l_(s.arrayValue,t.arrayValue);case 10:return(function(l,c){const f=l.fields||{},m=c.fields||{},g=f[Fh]?.arrayValue,y=m[Fh]?.arrayValue,b=Zt(g?.values?.length||0,y?.values?.length||0);return b!==0?b:l_(g,y)})(s.mapValue,t.mapValue);case 11:return(function(l,c){if(l===hh.mapValue&&c===hh.mapValue)return 0;if(l===hh.mapValue)return 1;if(c===hh.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let b=0;b<m.length&&b<y.length;++b){const E=Eg(m[b],y[b]);if(E!==0)return E;const A=Co(f[m[b]],g[y[b]]);if(A!==0)return A}return Zt(m.length,y.length)})(s.mapValue,t.mapValue);default:throw Pt(23264,{he:e})}}function o_(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Zt(s,t);const e=wr(s),n=wr(t),a=Zt(e.seconds,n.seconds);return a!==0?a:Zt(e.nanos,n.nanos)}function l_(s,t){const e=s.values||[],n=t.values||[];for(let a=0;a<e.length&&a<n.length;++a){const l=Co(e[a],n[a]);if(l)return l}return Zt(e.length,n.length)}function Ro(s){return Sg(s)}function Sg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const n=wr(e);return`time(${n.seconds},${n.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return Er(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return It.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let n="[",a=!0;for(const l of e.values||[])a?a=!1:n+=",",n+=Sg(l);return n+"]"})(s.arrayValue):"mapValue"in s?(function(e){const n=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const c of n)l?l=!1:a+=",",a+=`${c}:${Sg(e.fields[c])}`;return a+"}"})(s.mapValue):Pt(61005,{value:s})}function Ah(s){switch(Sr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ff(s);return t?16+Ah(t):16;case 5:return 2*s.stringValue.length;case 6:return Er(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((a,l)=>a+Ah(l)),0)})(s.arrayValue);case 10:case 11:return(function(n){let a=0;return va(n.fields,((l,c)=>{a+=l.length+Ah(c)})),a})(s.mapValue);default:throw Pt(13486,{value:s})}}function Tg(s){return!!s&&"integerValue"in s}function ip(s){return!!s&&"arrayValue"in s}function u_(s){return!!s&&"nullValue"in s}function c_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ch(s){return!!s&&"mapValue"in s}function AN(s){return(s?.mapValue?.fields||{})[vE]?.stringValue===bE}function Zl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return va(s.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Zl(n))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Zl(s.arrayValue.values[e]);return t}return{...s}}function CN(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===xN}class yi{constructor(t){this.value=t}static empty(){return new yi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ch(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zl(e)}setAll(t){let e=En.emptyPath(),n={},a=[];t.forEach(((c,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,n,a),n={},a=[],e=f.popLast()}c?n[f.lastSegment()]=Zl(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,n,a)}delete(t){const e=this.field(t.popLast());Ch(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ls(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=e.mapValue.fields[t.get(n)];Ch(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,n){va(e,((a,l)=>t[a]=l));for(const a of n)delete t[a]}clone(){return new yi(Zl(this.value))}}function _E(s){const t=[];return va(s.fields,((e,n)=>{const a=new En([e]);if(Ch(n)){const l=_E(n.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)})),new Di(t)}class Rn{constructor(t,e,n,a,l,c,f){this.key=t,this.documentType=e,this.version=n,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new Rn(t,0,Lt.min(),Lt.min(),Lt.min(),yi.empty(),0)}static newFoundDocument(t,e,n,a){return new Rn(t,1,e,Lt.min(),n,a,0)}static newNoDocument(t,e){return new Rn(t,2,e,Lt.min(),Lt.min(),yi.empty(),0)}static newUnknownDocument(t,e){return new Rn(t,3,e,Lt.min(),Lt.min(),yi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Rn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qh{constructor(t,e){this.position=t,this.inclusive=e}}function h_(s,t,e){let n=0;for(let a=0;a<s.position.length;a++){const l=t[a],c=s.position[a];if(l.field.isKeyField()?n=It.comparator(It.fromName(c.referenceValue),e.key):n=Co(c,e.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function f_(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!ls(s.position[e],t.position[e]))return!1;return!0}class Yh{constructor(t,e="asc"){this.field=t,this.dir=e}}function RN(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class wE{}class an extends wE{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new NN(t,e,n):e==="array-contains"?new IN(t,n):e==="in"?new VN(t,n):e==="not-in"?new PN(t,n):e==="array-contains-any"?new kN(t,n):new an(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new DN(t,n):new ON(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Co(e,this.value)):e!==null&&Sr(this.value)===Sr(e)&&this.matchesComparison(Co(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends wE{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new us(t,e)}matches(t){return EE(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(s){return s.op==="and"}function SE(s){return MN(s)&&EE(s)}function MN(s){for(const t of s.filters)if(t instanceof us)return!1;return!0}function xg(s){if(s instanceof an)return s.field.canonicalString()+s.op.toString()+Ro(s.value);if(SE(s))return s.filters.map((t=>xg(t))).join(",");{const t=s.filters.map((e=>xg(e))).join(",");return`${s.op}(${t})`}}function TE(s,t){return s instanceof an?(function(n,a){return a instanceof an&&n.op===a.op&&n.field.isEqual(a.field)&&ls(n.value,a.value)})(s,t):s instanceof us?(function(n,a){return a instanceof us&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((l,c,f)=>l&&TE(c,a.filters[f])),!0):!1})(s,t):void Pt(19439)}function xE(s){return s instanceof an?(function(e){return`${e.field.canonicalString()} ${e.op} ${Ro(e.value)}`})(s):s instanceof us?(function(e){return e.op.toString()+" {"+e.getFilters().map(xE).join(" ,")+"}"})(s):"Filter"}class NN extends an{constructor(t,e,n){super(t,e,n),this.key=It.fromName(n.referenceValue)}matches(t){const e=It.comparator(t.key,this.key);return this.matchesComparison(e)}}class DN extends an{constructor(t,e){super(t,"in",e),this.keys=AE("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class ON extends an{constructor(t,e){super(t,"not-in",e),this.keys=AE("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function AE(s,t){return(t.arrayValue?.values||[]).map((e=>It.fromName(e.referenceValue)))}class IN extends an{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ip(e)&&pu(e.arrayValue,this.value)}}class VN extends an{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&pu(this.value.arrayValue,e)}}class PN extends an{constructor(t,e){super(t,"not-in",e)}matches(t){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!pu(this.value.arrayValue,e)}}class kN extends an{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ip(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>pu(this.value.arrayValue,n)))}}class zN{constructor(t,e=null,n=[],a=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function d_(s,t=null,e=[],n=[],a=null,l=null,c=null){return new zN(s,t,e,n,a,l,c)}function sp(s){const t=Ut(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>xg(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(l){return l.field.canonicalString()+l.dir})(n))).join(","),hf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>Ro(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>Ro(n))).join(",")),t.Te=e}return t.Te}function rp(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!RN(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!TE(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!f_(s.startAt,t.startAt)&&f_(s.endAt,t.endAt)}function Ag(s){return It.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class df{constructor(t,e=null,n=[],a=[],l=null,c="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function LN(s,t,e,n,a,l,c,f){return new df(s,t,e,n,a,l,c,f)}function ap(s){return new df(s)}function m_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function jN(s){return It.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function UN(s){return s.collectionGroup!==null}function tu(s){const t=Ut(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ie.push(l),e.add(l.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new on(En.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ie.push(new Yh(l,n))})),e.has(En.keyField().canonicalString())||t.Ie.push(new Yh(En.keyField(),n))}return t.Ie}function rs(s){const t=Ut(s);return t.Ee||(t.Ee=BN(t,tu(s))),t.Ee}function BN(s,t){if(s.limitType==="F")return d_(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Yh(a.field,l)}));const e=s.endAt?new qh(s.endAt.position,s.endAt.inclusive):null,n=s.startAt?new qh(s.startAt.position,s.startAt.inclusive):null;return d_(s.path,s.collectionGroup,t,s.filters,s.limit,e,n)}}function Cg(s,t,e){return new df(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function mf(s,t){return rp(rs(s),rs(t))&&s.limitType===t.limitType}function CE(s){return`${sp(rs(s))}|lt:${s.limitType}`}function fo(s){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((a=>xE(a))).join(", ")}]`),hf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Ro(a))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Ro(a))).join(",")),`Target(${n})`})(rs(s))}; limitType=${s.limitType})`}function gf(s,t){return t.isFoundDocument()&&(function(n,a){const l=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):It.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)})(s,t)&&(function(n,a){for(const l of tu(n))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,t)&&(function(n,a){for(const l of n.filters)if(!l.matches(a))return!1;return!0})(s,t)&&(function(n,a){return!(n.startAt&&!(function(c,f,m){const g=h_(c,f,m);return c.inclusive?g<=0:g<0})(n.startAt,tu(n),a)||n.endAt&&!(function(c,f,m){const g=h_(c,f,m);return c.inclusive?g>=0:g>0})(n.endAt,tu(n),a))})(s,t)}function FN(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function RE(s){return(t,e)=>{let n=!1;for(const a of tu(s)){const l=qN(a,t,e);if(l!==0)return l;n=n||a.field.isKeyField()}return 0}}function qN(s,t,e){const n=s.field.isKeyField()?It.comparator(t.key,e.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?Co(m,g):Pt(42886)})(s.field,t,e);switch(s.dir){case"asc":return n;case"desc":return-1*n;default:return Pt(19790,{direction:s.dir})}}class ba{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[a,l]of n)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[e]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){va(this.inner,((e,n)=>{for(const[a,l]of n)t(a,l)}))}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}const YN=new ke(It.comparator);function Vs(){return YN}const ME=new ke(It.comparator);function $l(...s){let t=ME;for(const e of s)t=t.insert(e.key,e);return t}function NE(s){let t=ME;return s.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function aa(){return eu()}function DE(){return eu()}function eu(){return new ba((s=>s.toString()),((s,t)=>s.isEqual(t)))}const HN=new ke(It.comparator),QN=new on(It.comparator);function te(...s){let t=QN;for(const e of s)t=t.add(e);return t}const GN=new on(Zt);function KN(){return GN}function op(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(t)?"-0":t}}function OE(s){return{integerValue:""+s}}function $N(s,t){return bN(t)?OE(t):op(s,t)}class pf{constructor(){this._=void 0}}function XN(s,t,e){return s instanceof Hh?(function(a,l){const c={fields:{[gE]:{stringValue:mE},[yE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&np(l)&&(l=ff(l)),l&&(c.fields[pE]=l),{mapValue:c}})(e,t):s instanceof yu?VE(s,t):s instanceof vu?PE(s,t):(function(a,l){const c=IE(a,l),f=g_(c)+g_(a.Ae);return Tg(c)&&Tg(a.Ae)?OE(f):op(a.serializer,f)})(s,t)}function WN(s,t,e){return s instanceof yu?VE(s,t):s instanceof vu?PE(s,t):e}function IE(s,t){return s instanceof Qh?(function(n){return Tg(n)||(function(l){return!!l&&"doubleValue"in l})(n)})(t)?t:{integerValue:0}:null}class Hh extends pf{}class yu extends pf{constructor(t){super(),this.elements=t}}function VE(s,t){const e=kE(t);for(const n of s.elements)e.some((a=>ls(a,n)))||e.push(n);return{arrayValue:{values:e}}}class vu extends pf{constructor(t){super(),this.elements=t}}function PE(s,t){let e=kE(t);for(const n of s.elements)e=e.filter((a=>!ls(a,n)));return{arrayValue:{values:e}}}class Qh extends pf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function g_(s){return qe(s.integerValue||s.doubleValue)}function kE(s){return ip(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function JN(s,t){return s.field.isEqual(t.field)&&(function(n,a){return n instanceof yu&&a instanceof yu||n instanceof vu&&a instanceof vu?Ao(n.elements,a.elements,ls):n instanceof Qh&&a instanceof Qh?ls(n.Ae,a.Ae):n instanceof Hh&&a instanceof Hh})(s.transform,t.transform)}class ZN{constructor(t,e){this.version=t,this.transformResults=e}}class Ds{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ds}static exists(t){return new Ds(void 0,t)}static updateTime(t){return new Ds(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class yf{}function zE(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new jE(s.key,Ds.none()):new Nu(s.key,s.data,Ds.none());{const e=s.data,n=yi.empty();let a=new on(En.comparator);for(let l of t.fields)if(!a.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?n.delete(l):n.set(l,c),a=a.add(l)}return new _a(s.key,n,new Di(a.toArray()),Ds.none())}}function tD(s,t,e){s instanceof Nu?(function(a,l,c){const f=a.value.clone(),m=y_(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(s,t,e):s instanceof _a?(function(a,l,c){if(!Rh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=y_(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(LE(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function nu(s,t,e,n){return s instanceof Nu?(function(l,c,f,m){if(!Rh(l.precondition,c))return f;const g=l.value.clone(),y=v_(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(s,t,e,n):s instanceof _a?(function(l,c,f,m){if(!Rh(l.precondition,c))return f;const g=v_(l.fieldTransforms,m,c),y=c.data;return y.setAll(LE(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(s,t,e,n):(function(l,c,f){return Rh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(s,t,e)}function eD(s,t){let e=null;for(const n of s.fieldTransforms){const a=t.data.field(n.field),l=IE(n.transform,a||null);l!=null&&(e===null&&(e=yi.empty()),e.set(n.field,l))}return e||null}function p_(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Ao(n,a,((l,c)=>JN(l,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Nu extends yf{constructor(t,e,n,a=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _a extends yf{constructor(t,e,n,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function LE(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=s.data.field(e);t.set(e,n)}})),t}function y_(s,t,e){const n=new Map;de(s.length===e.length,32656,{Ve:e.length,de:s.length});for(let a=0;a<e.length;a++){const l=s[a],c=l.transform,f=t.data.field(l.field);n.set(l.field,WN(c,f,e[a]))}return n}function v_(s,t,e){const n=new Map;for(const a of s){const l=a.transform,c=e.data.field(a.field);n.set(a.field,XN(l,c,t))}return n}class jE extends yf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nD extends yf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iD{constructor(t,e,n,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&tD(l,t,n[a])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=nu(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=nu(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=DE();return this.mutations.forEach((a=>{const l=t.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=e.has(a.key)?null:f;const m=zE(c,f);m!==null&&n.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Lt.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),te())}isEqual(t){return this.batchId===t.batchId&&Ao(this.mutations,t.mutations,((e,n)=>p_(e,n)))&&Ao(this.baseMutations,t.baseMutations,((e,n)=>p_(e,n)))}}class lp{constructor(t,e,n,a){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=a}static from(t,e,n){de(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=(function(){return HN})();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,n[c].version);return new lp(t,e,n,a)}}class sD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class rD{constructor(t,e){this.count=t,this.unchangedNames=e}}var en,re;function aD(s){switch(s){case lt.OK:return Pt(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return Pt(15467,{code:s})}}function UE(s){if(s===void 0)return Is("GRPC error has no .code"),lt.UNKNOWN;switch(s){case en.OK:return lt.OK;case en.CANCELLED:return lt.CANCELLED;case en.UNKNOWN:return lt.UNKNOWN;case en.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case en.INTERNAL:return lt.INTERNAL;case en.UNAVAILABLE:return lt.UNAVAILABLE;case en.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case en.NOT_FOUND:return lt.NOT_FOUND;case en.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case en.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case en.ABORTED:return lt.ABORTED;case en.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case en.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case en.DATA_LOSS:return lt.DATA_LOSS;default:return Pt(39323,{code:s})}}(re=en||(en={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";function oD(){return new TextEncoder}const lD=new vr([4294967295,4294967295],0);function b_(s){const t=oD().encode(s),e=new nE;return e.update(t),new Uint8Array(e.digest())}function __(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new vr([e,n],0),new vr([a,l],0)]}class up{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Xl(`Invalid padding: ${e}`);if(n<0)throw new Xl(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=vr.fromNumber(this.ge)}ye(t,e,n){let a=t.add(e.multiply(vr.fromNumber(n)));return a.compare(lD)===1&&(a=new vr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=b_(t),[n,a]=__(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);if(!this.we(c))return!1}return!0}static create(t,e,n){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new up(l,a,e);return n.forEach((f=>c.insert(f))),c}insert(t){if(this.ge===0)return;const e=b_(t),[n,a]=__(e);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);this.be(c)}}be(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(t,e,n,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const a=new Map;return a.set(t,Du.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new vf(Lt.min(),a,new ke(Zt),Vs(),te())}}class Du{constructor(t,e,n,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Du(n,e,te(),te(),te())}}class Mh{constructor(t,e,n,a){this.Se=t,this.removedTargetIds=e,this.key=n,this.De=a}}class BE{constructor(t,e){this.targetId=t,this.Ce=e}}class FE{constructor(t,e,n=Sn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=a}}class w_{constructor(){this.ve=0,this.Fe=E_(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=te(),e=te(),n=te();return this.Fe.forEach(((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:n=n.add(a);break;default:Pt(38017,{changeType:l})}})),new Du(this.Me,this.xe,t,e,n)}Ke(){this.Oe=!1,this.Fe=E_()}qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}Ue(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}$e(){this.ve+=1}We(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uD{constructor(t){this.Ge=t,this.ze=new Map,this.je=Vs(),this.He=fh(),this.Je=fh(),this.Ze=new ke(Zt)}Xe(t){for(const e of t.Se)t.De&&t.De.isFoundDocument()?this.Ye(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(t.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.Qe(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:Pt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,a)=>{this.rt(a)&&e(a)}))}st(t){const e=t.targetId,n=t.Ce.count,a=this.ot(e);if(a){const l=a.target;if(Ag(l))if(n===0){const c=new It(l.path);this.et(e,c,Rn.newNoDocument(c,Lt.min()))}else de(n===1,20013,{expectedCount:n});else{const c=this._t(e);if(c!==n){const f=this.ut(t),m=f?this.ct(f,t,c):1;if(m!==0){this.it(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:l=0}=e;let c,f;try{c=Er(n).toUint8Array()}catch(m){if(m instanceof dE)return xo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new up(c,a,l)}catch(m){return xo(m instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let a=0;return n.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.et(e,l,null),a++)})),a}Tt(t){const e=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Ag(f.target)){const m=new It(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Rn.newNoDocument(m,t))}l.Be&&(e.set(c,l.ke()),l.Ke())}}));let n=te();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(n=n.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(t)));const a=new vf(t,e,this.Ze,this.je,n);return this.je=Vs(),this.He=fh(),this.Je=fh(),this.Ze=new ke(Zt),a}Ye(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).qe(e.key,n),this.je=this.je.insert(e.key,e),this.He=this.He.insert(e.key,this.It(e.key).add(t)),this.Je=this.Je.insert(e.key,this.Rt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.qe(e,1):a.Ue(e),this.Je=this.Je.insert(e,this.Rt(e).delete(t)),this.Je=this.Je.insert(e,this.Rt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}$e(t){this.nt(t).$e()}nt(t){let e=this.ze.get(t);return e||(e=new w_,this.ze.set(t,e)),e}Rt(t){let e=this.Je.get(t);return e||(e=new on(Zt),this.Je=this.Je.insert(t,e)),e}It(t){let e=this.He.get(t);return e||(e=new on(Zt),this.He=this.He.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||At("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new w_),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function fh(){return new ke(It.comparator)}function E_(){return new ke(It.comparator)}const cD={asc:"ASCENDING",desc:"DESCENDING"},hD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fD={and:"AND",or:"OR"};class dD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Rg(s,t){return s.useProto3Json||hf(t)?t:{value:t}}function Gh(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qE(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function mD(s,t){return Gh(s,t.toTimestamp())}function as(s){return de(!!s,49232),Lt.fromTimestamp((function(e){const n=wr(e);return new Ce(n.seconds,n.nanos)})(s))}function cp(s,t){return Mg(s,t).canonicalString()}function Mg(s,t){const e=(function(a){return new Pe(["projects",a.projectId,"databases",a.database])})(s).child("documents");return t===void 0?e:e.child(t)}function YE(s){const t=Pe.fromString(s);return de($E(t),10190,{key:t.toString()}),t}function Ng(s,t){return cp(s.databaseId,t.path)}function Um(s,t){const e=YE(t);if(e.get(1)!==s.databaseId.projectId)throw new Dt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Dt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new It(QE(e))}function HE(s,t){return cp(s.databaseId,t)}function gD(s){const t=YE(s);return t.length===4?Pe.emptyPath():QE(t)}function Dg(s){return new Pe(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function QE(s){return de(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function S_(s,t,e){return{name:Ng(s,t),fields:e.value.mapValue.fields}}function pD(s,t){let e;if("targetChange"in t){t.targetChange;const n=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Pt(39313,{state:g})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(de(y===void 0||typeof y=="string",58123),Sn.fromBase64String(y||"")):(de(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Sn.fromUint8Array(y||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(g){const y=g.code===void 0?lt.UNKNOWN:UE(g.code);return new Dt(y,g.message||"")})(c);e=new FE(n,a,l,f||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=Um(s,n.document.name),l=as(n.document.updateTime),c=n.document.createTime?as(n.document.createTime):Lt.min(),f=new yi({mapValue:{fields:n.document.fields}}),m=Rn.newFoundDocument(a,l,c,f),g=n.targetIds||[],y=n.removedTargetIds||[];e=new Mh(g,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=Um(s,n.document),l=n.readTime?as(n.readTime):Lt.min(),c=Rn.newNoDocument(a,l),f=n.removedTargetIds||[];e=new Mh([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=Um(s,n.document),l=n.removedTargetIds||[];e=new Mh([],l,a,null)}else{if(!("filter"in t))return Pt(11601,{Vt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:l}=n,c=new rD(a,l),f=n.targetId;e=new BE(f,c)}}return e}function yD(s,t){let e;if(t instanceof Nu)e={update:S_(s,t.key,t.value)};else if(t instanceof jE)e={delete:Ng(s,t.key)};else if(t instanceof _a)e={update:S_(s,t.key,t.data),updateMask:AD(t.fieldMask)};else{if(!(t instanceof nD))return Pt(16599,{dt:t.type});e={verify:Ng(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(l,c){const f=c.transform;if(f instanceof Hh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof yu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof vu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qh)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Pt(20930,{transform:c.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:mD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pt(27497)})(s,t.precondition)),e}function vD(s,t){return s&&s.length>0?(de(t!==void 0,14353),s.map((e=>(function(a,l){let c=a.updateTime?as(a.updateTime):as(l);return c.isEqual(Lt.min())&&(c=as(l)),new ZN(c,a.transformResults||[])})(e,t)))):[]}function bD(s,t){return{documents:[HE(s,t.path)]}}function _D(s,t){const e={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=HE(s,a);const l=(function(g){if(g.length!==0)return KE(us.create(g,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(E){return{field:mo(E.field),direction:SD(E.dir)}})(y)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const f=Rg(s,t.limit);return f!==null&&(e.structuredQuery.limit=f),t.startAt&&(e.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(t.endAt)),{ft:e,parent:a}}function wD(s){let t=gD(s.parent);const e=s.structuredQuery,n=e.from?e.from.length:0;let a=null;if(n>0){de(n===1,65062);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];e.where&&(l=(function(b){const E=GE(b);return E instanceof us&&SE(E)?E.getFilters():[E]})(e.where));let c=[];e.orderBy&&(c=(function(b){return b.map((E=>(function(x){return new Yh(go(x.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(E)))})(e.orderBy));let f=null;e.limit&&(f=(function(b){let E;return E=typeof b=="object"?b.value:b,hf(E)?null:E})(e.limit));let m=null;e.startAt&&(m=(function(b){const E=!!b.before,A=b.values||[];return new qh(A,E)})(e.startAt));let g=null;return e.endAt&&(g=(function(b){const E=!b.before,A=b.values||[];return new qh(A,E)})(e.endAt)),LN(t,a,c,l,f,"F",m,g)}function ED(s,t){const e=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt(28987,{purpose:a})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function GE(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=go(e.unaryFilter.field);return an.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=go(e.unaryFilter.field);return an.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(e.unaryFilter.field);return an.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=go(e.unaryFilter.field);return an.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pt(61313);default:return Pt(60726)}})(s):s.fieldFilter!==void 0?(function(e){return an.create(go(e.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pt(58110);default:return Pt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return us.create(e.compositeFilter.filters.map((n=>GE(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Pt(1026)}})(e.compositeFilter.op))})(s):Pt(30097,{filter:s})}function SD(s){return cD[s]}function TD(s){return hD[s]}function xD(s){return fD[s]}function mo(s){return{fieldPath:s.canonicalString()}}function go(s){return En.fromServerFormat(s.fieldPath)}function KE(s){return s instanceof an?(function(e){if(e.op==="=="){if(c_(e.value))return{unaryFilter:{field:mo(e.field),op:"IS_NAN"}};if(u_(e.value))return{unaryFilter:{field:mo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(c_(e.value))return{unaryFilter:{field:mo(e.field),op:"IS_NOT_NAN"}};if(u_(e.value))return{unaryFilter:{field:mo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(e.field),op:TD(e.op),value:e.value}}})(s):s instanceof us?(function(e){const n=e.getFilters().map((a=>KE(a)));return n.length===1?n[0]:{compositeFilter:{op:xD(e.op),filters:n}}})(s):Pt(54877,{filter:s})}function AD(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $E(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function XE(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class mr{constructor(t,e,n,a,l=Lt.min(),c=Lt.min(),f=Sn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(t){return new mr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class CD{constructor(t){this.yt=t}}function RD(s){const t=wD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Cg(t,t.limit,"L"):t}class MD{constructor(){this.Sn=new ND}addToCollectionParentIndex(t,e){return this.Sn.add(e),at.resolve()}getCollectionParents(t,e){return at.resolve(this.Sn.getEntries(e))}addFieldIndex(t,e){return at.resolve()}deleteFieldIndex(t,e){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,e){return at.resolve()}getDocumentsMatchingTarget(t,e){return at.resolve(null)}getIndexType(t,e){return at.resolve(0)}getFieldIndexes(t,e){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,e){return at.resolve(_r.min())}getMinOffsetFromCollectionGroup(t,e){return at.resolve(_r.min())}updateCollectionGroup(t,e,n){return at.resolve()}updateIndexEntries(t,e){return at.resolve()}}class ND{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),a=this.index[e]||new on(Pe.comparator),l=!a.has(n);return this.index[e]=a.add(n),l}has(t){const e=t.lastSegment(),n=t.popLast(),a=this.index[e];return a&&a.has(n)}getEntries(t){return(this.index[t]||new on(Pe.comparator)).toArray()}}const T_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class Fn{static withCacheSize(t){return new Fn(t,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(WE,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class Mo{constructor(t){this.sr=t}next(){return this.sr+=2,this.sr}static _r(){return new Mo(0)}static ar(){return new Mo(-1)}}const x_="LruGarbageCollector",DD=1048576;function A_([s,t],[e,n]){const a=Zt(s,e);return a===0?Zt(t,n):a}class OD{constructor(t){this.Pr=t,this.buffer=new on(A_),this.Tr=0}Ir(){return++this.Tr}Er(t){const e=[t,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();A_(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ID{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(t){At(x_,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){jo(e)?At(x_,"Ignoring IndexedDB error during garbage collection: ",e):await Lo(e)}await this.Ar(3e5)}))}}class VD{constructor(t,e){this.Vr=t,this.params=e}calculateTargetCount(t,e){return this.Vr.dr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return at.resolve(cf.ce);const n=new OD(e);return this.Vr.forEachTarget(t,(a=>n.Er(a.sequenceNumber))).next((()=>this.Vr.mr(t,(a=>n.Er(a))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.Vr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Vr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(At("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(T_)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T_):this.gr(t,e)))}getCacheSize(t){return this.Vr.getCacheSize(t)}gr(t,e){let n,a,l,c,f,m,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(t,a)))).next((b=>(n=b,f=Date.now(),this.removeTargets(t,n,e)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(t,n)))).next((b=>(g=Date.now(),ho()<=ae.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${b} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function PD(s,t){return new VD(s,t)}class kD{constructor(){this.changes=new ba((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Rn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?at.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class zD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class LD{constructor(t,e,n,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((a=>(n=a,this.remoteDocumentCache.getEntry(t,e)))).next((a=>(n!==null&&nu(n.mutation,a,Di.empty(),Ce.now()),a)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,te()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=te()){const a=aa();return this.populateOverlays(t,a,e).next((()=>this.computeViews(t,e,a,n).next((l=>{let c=$l();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const n=aa();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,te())))}populateOverlays(t,e,n){const a=[];return n.forEach((l=>{e.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(t,a).next((l=>{l.forEach(((c,f)=>{e.set(c,f)}))}))}computeViews(t,e,n,a){let l=Vs();const c=eu(),f=(function(){return eu()})();return e.forEach(((m,g)=>{const y=n.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof _a)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),nu(y.mutation,g,y.mutation.getFieldMask(),Ce.now())):c.set(g.key,Di.empty())})),this.recalculateAndSaveOverlays(t,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),e.forEach(((g,y)=>f.set(g,new zD(y,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(t,e){const n=eu();let a=new ke(((c,f)=>c-f)),l=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=e.get(m);if(g===null)return;let y=n.get(m)||Di.empty();y=f.applyToLocalView(g,y),n.set(m,y);const b=(a.get(f.batchId)||te()).add(m);a=a.insert(f.batchId,b)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,y=m.value,b=DE();y.forEach((E=>{if(!l.has(E)){const A=zE(e.get(E),n.get(E));A!==null&&b.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(t,g,b))}return at.waitFor(c)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,a){return jN(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):UN(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,a):this.getDocumentsMatchingCollectionQuery(t,e,n,a)}getNextDocuments(t,e,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,a-l.size):at.resolve(aa());let f=du,m=l;return c.next((g=>at.forEach(g,((y,b)=>(f<b.largestBatchId&&(f=b.largestBatchId),l.get(y)?at.resolve():this.remoteDocumentCache.getEntry(t,y).next((E=>{m=m.insert(y,E)}))))).next((()=>this.populateOverlays(t,g,l))).next((()=>this.computeViews(t,m,g,te()))).next((y=>({batchId:f,changes:NE(y)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new It(e)).next((n=>{let a=$l();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,a){const l=e.collectionGroup;let c=$l();return this.indexManager.getCollectionParents(t,l).next((f=>at.forEach(f,(m=>{const g=(function(b,E){return new df(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,n,a).next((y=>{y.forEach(((b,E)=>{c=c.insert(b,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,n,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Rn.newInvalidDocument(y)))}));let f=$l();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&nu(y.mutation,g,Di.empty(),Ce.now()),gf(e,g)&&(f=f.insert(m,g))})),f}))}}class jD{constructor(t){this.serializer=t,this.Nr=new Map,this.Br=new Map}getBundleMetadata(t,e){return at.resolve(this.Nr.get(e))}saveBundleMetadata(t,e){return this.Nr.set(e.id,(function(a){return{id:a.id,version:a.version,createTime:as(a.createTime)}})(e)),at.resolve()}getNamedQuery(t,e){return at.resolve(this.Br.get(e))}saveNamedQuery(t,e){return this.Br.set(e.name,(function(a){return{name:a.name,query:RD(a.bundledQuery),readTime:as(a.readTime)}})(e)),at.resolve()}}class UD{constructor(){this.overlays=new ke(It.comparator),this.Lr=new Map}getOverlay(t,e){return at.resolve(this.overlays.get(e))}getOverlays(t,e){const n=aa();return at.forEach(e,(a=>this.getOverlay(t,a).next((l=>{l!==null&&n.set(a,l)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((a,l)=>{this.bt(t,e,l)})),at.resolve()}removeOverlaysForBatchId(t,e,n){const a=this.Lr.get(n);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(n)),at.resolve()}getOverlaysForCollection(t,e,n){const a=aa(),l=e.length+1,c=new It(e.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>n&&a.set(m.getKey(),m)}return at.resolve(a)}getOverlaysForCollectionGroup(t,e,n,a){let l=new ke(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>n){let y=l.get(g.largestBatchId);y===null&&(y=aa(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=aa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>f.set(g,y))),!(f.size()>=a)););return at.resolve(f)}bt(t,e,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.Lr.get(a.largestBatchId).delete(n.key);this.Lr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new sD(e,n));let l=this.Lr.get(e);l===void 0&&(l=te(),this.Lr.set(e,l)),this.Lr.set(e,l.add(n.key))}}class BD{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,at.resolve()}}class hp{constructor(){this.kr=new on(hn.Kr),this.qr=new on(hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(t,e){const n=new hn(t,e);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Wr(new hn(t,e))}Qr(t,e){t.forEach((n=>this.removeReference(n,e)))}Gr(t){const e=new It(new Pe([])),n=new hn(e,t),a=new hn(e,t+1),l=[];return this.qr.forEachInRange([n,a],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((t=>this.Wr(t)))}Wr(t){this.kr=this.kr.delete(t),this.qr=this.qr.delete(t)}jr(t){const e=new It(new Pe([])),n=new hn(e,t),a=new hn(e,t+1);let l=te();return this.qr.forEachInRange([n,a],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new hn(t,0),n=this.kr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class hn{constructor(t,e){this.key=t,this.Hr=e}static Kr(t,e){return It.comparator(t.key,e.key)||Zt(t.Hr,e.Hr)}static Ur(t,e){return Zt(t.Hr,e.Hr)||It.comparator(t.key,e.key)}}class FD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Yn=1,this.Jr=new on(hn.Kr)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new iD(l,e,n,a);this.mutationQueue.push(c);for(const f of a)this.Jr=this.Jr.add(new hn(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return at.resolve(c)}lookupMutationBatch(t,e){return at.resolve(this.Zr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,a=this.Xr(n),l=a<0?0:a;return at.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?ep:this.Yn-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new hn(e,0),a=new hn(e,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([n,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),at.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new on(Zt);return e.forEach((a=>{const l=new hn(a,0),c=new hn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{n=n.add(f.Hr)}))})),at.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,a=n.length+1;let l=n;It.isDocumentKey(l)||(l=l.child(""));const c=new hn(new It(l),0);let f=new on(Zt);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!n.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Hr)),!0)}),c),at.resolve(this.Yr(f))}Yr(t){const e=[];return t.forEach((n=>{const a=this.Zr(n);a!==null&&e.push(a)})),e}removeMutationBatch(t,e){de(this.ei(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return at.forEach(e.mutations,(a=>{const l=new hn(a.key,e.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Jr=n}))}nr(t){}containsKey(t,e){const n=new hn(e,0),a=this.Jr.firstAfterOrEqual(n);return at.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ei(t,e){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const e=this.Xr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class qD{constructor(t){this.ti=t,this.docs=(function(){return new ke(It.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,a=this.docs.get(n),l=a?a.size:0,c=this.ti(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return at.resolve(n?n.document.mutableCopy():Rn.newInvalidDocument(e))}getEntries(t,e){let n=Vs();return e.forEach((a=>{const l=this.docs.get(a);n=n.insert(a,l?l.document.mutableCopy():Rn.newInvalidDocument(a))})),at.resolve(n)}getDocumentsMatchingQuery(t,e,n,a){let l=Vs();const c=e.path,f=new It(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||gN(mN(y),n)<=0||(a.has(y.key)||gf(e,y))&&(l=l.insert(y.key,y.mutableCopy()))}return at.resolve(l)}getAllFromCollectionGroup(t,e,n,a){Pt(9500)}ni(t,e){return at.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new YD(this)}getSize(t){return at.resolve(this.size)}}class YD extends kD{constructor(t){super(),this.Mr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?e.push(this.Mr.addEntry(t,a)):this.Mr.removeEntry(n)})),at.waitFor(e)}getFromCache(t,e){return this.Mr.getEntry(t,e)}getAllFromCache(t,e){return this.Mr.getEntries(t,e)}}class HD{constructor(t){this.persistence=t,this.ri=new ba((e=>sp(e)),rp),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.ii=0,this.si=new hp,this.targetCount=0,this.oi=Mo._r()}forEachTarget(t,e){return this.ri.forEach(((n,a)=>e(a))),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.ii)}allocateTargetId(t){return this.highestTargetId=this.oi.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ii&&(this.ii=e),at.resolve()}lr(t){this.ri.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.oi=new Mo(e),this.highestTargetId=e),t.sequenceNumber>this.ii&&(this.ii=t.sequenceNumber)}addTargetData(t,e){return this.lr(e),this.targetCount+=1,at.resolve()}updateTargetData(t,e){return this.lr(e),at.resolve()}removeTargetData(t,e){return this.ri.delete(e.target),this.si.Gr(e.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,e,n){let a=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=e&&n.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),a++)})),at.waitFor(l).next((()=>a))}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,e){const n=this.ri.get(e)||null;return at.resolve(n)}addMatchingKeys(t,e,n){return this.si.$r(e,n),at.resolve()}removeMatchingKeys(t,e,n){this.si.Qr(e,n);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach((c=>{l.push(a.markPotentiallyOrphaned(t,c))})),at.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.si.Gr(e),at.resolve()}getMatchingKeysForTargetId(t,e){const n=this.si.jr(e);return at.resolve(n)}containsKey(t,e){return at.resolve(this.si.containsKey(e))}}class JE{constructor(t,e){this._i={},this.overlays={},this.ai=new cf(0),this.ui=!1,this.ui=!0,this.ci=new BD,this.referenceDelegate=t(this),this.li=new HD(this),this.indexManager=new MD,this.remoteDocumentCache=(function(a){return new qD(a)})((n=>this.referenceDelegate.hi(n))),this.serializer=new CD(e),this.Pi=new jD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new UD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this._i[t.toKey()];return n||(n=new FD(e,this.referenceDelegate),this._i[t.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(t,e,n){At("MemoryPersistence","Starting transaction:",t);const a=new QD(this.ai.next());return this.referenceDelegate.Ti(),n(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(t,e){return at.or(Object.values(this._i).map((n=>()=>n.containsKey(t,e))))}}class QD extends yN{constructor(t){super(),this.currentSequenceNumber=t}}class fp{constructor(t){this.persistence=t,this.Ri=new hp,this.Ai=null}static Vi(t){return new fp(t)}get di(){if(this.Ai)return this.Ai;throw Pt(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.di.delete(n.toString()),at.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.di.add(n.toString()),at.resolve()}markPotentiallyOrphaned(t,e){return this.di.add(e.toString()),at.resolve()}removeTarget(t,e){this.Ri.Gr(e.targetId).forEach((a=>this.di.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>n.removeTargetData(t,e)))}Ti(){this.Ai=new Set}Ii(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.di,(n=>{const a=It.fromPath(n);return this.mi(t,a).next((l=>{l||e.removeEntry(a,Lt.min())}))})).next((()=>(this.Ai=null,e.apply(t))))}updateLimboDocument(t,e){return this.mi(t,e).next((n=>{n?this.di.delete(e.toString()):this.di.add(e.toString())}))}hi(t){return 0}mi(t,e){return at.or([()=>at.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ei(t,e)])}}class Kh{constructor(t,e){this.persistence=t,this.fi=new ba((n=>_N(n.path)),((n,a)=>n.isEqual(a))),this.garbageCollector=PD(this,e)}static Vi(t,e){return new Kh(t,e)}Ti(){}Ii(t){return at.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}dr(t){const e=this.pr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((a=>n+a))))}pr(t){let e=0;return this.mr(t,(n=>{e++})).next((()=>e))}mr(t,e){return at.forEach(this.fi,((n,a)=>this.wr(t,n,a).next((l=>l?at.resolve():e(a)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(t,(c=>this.wr(t,c,e).next((f=>{f||(n++,l.removeEntry(c,Lt.min()))})))).next((()=>l.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.fi.set(e,t.currentSequenceNumber),at.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.fi.set(n,t.currentSequenceNumber),at.resolve()}removeReference(t,e,n){return this.fi.set(n,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,e){return this.fi.set(e,t.currentSequenceNumber),at.resolve()}hi(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ah(t.data.value)),e}wr(t,e,n){return at.or([()=>this.persistence.Ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.fi.get(e);return at.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class dp{constructor(t,e,n,a){this.targetId=t,this.fromCache=e,this.Ts=n,this.Is=a}static Es(t,e){let n=te(),a=te();for(const l of e.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new dp(t,e.fromCache,n,a)}}class GD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class KD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return VR()?8:vN(OR())>0?6:4})()}initialize(t,e){this.fs=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,a){const l={result:null};return this.gs(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(t,e,a,n).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new GD;return this.ys(t,e,c).next((f=>{if(l.result=f,this.As)return this.ws(t,e,c,f.size)}))})).next((()=>l.result))}ws(t,e,n,a){return n.documentReadCount<this.Vs?(ho()<=ae.DEBUG&&At("QueryEngine","SDK will not create cache indexes for query:",fo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),at.resolve()):(ho()<=ae.DEBUG&&At("QueryEngine","Query:",fo(e),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.ds*a?(ho()<=ae.DEBUG&&At("QueryEngine","The SDK decides to create cache indexes for query:",fo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,rs(e))):at.resolve())}gs(t,e){if(m_(e))return at.resolve(null);let n=rs(e);return this.indexManager.getIndexType(t,n).next((a=>a===0?null:(e.limit!==null&&a===1&&(e=Cg(e,null,"F"),n=rs(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((l=>{const c=te(...l);return this.fs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,n).next((m=>{const g=this.bs(e,f);return this.Ss(e,g,c,m.readTime)?this.gs(t,Cg(e,null,"F")):this.Ds(t,g,e,m)}))))})))))}ps(t,e,n,a){return m_(e)||a.isEqual(Lt.min())?at.resolve(null):this.fs.getDocuments(t,n).next((l=>{const c=this.bs(e,l);return this.Ss(e,c,n,a)?at.resolve(null):(ho()<=ae.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fo(e)),this.Ds(t,c,e,dN(a,du)).next((f=>f)))}))}bs(t,e){let n=new on(RE(t));return e.forEach(((a,l)=>{gf(t,l)&&(n=n.add(l))})),n}Ss(t,e,n,a){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(t,e,n){return ho()<=ae.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",fo(e)),this.fs.getDocumentsMatchingQuery(t,e,_r.min(),n)}Ds(t,e,n,a){return this.fs.getDocumentsMatchingQuery(t,n,a).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const mp="LocalStore",$D=3e8;class XD{constructor(t,e,n,a){this.persistence=t,this.Cs=e,this.serializer=a,this.vs=new ke(Zt),this.Fs=new ba((l=>sp(l)),rp),this.Ms=new Map,this.xs=t.getRemoteDocumentCache(),this.li=t.getTargetCache(),this.Pi=t.getBundleCache(),this.Os(n)}Os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new LD(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.vs)))}}function WD(s,t,e,n){return new XD(s,t,e,n)}async function ZE(s,t){const e=Ut(s);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return e.mutationQueue.getAllMutationBatches(n).next((l=>(a=l,e.Os(t),e.mutationQueue.getAllMutationBatches(n)))).next((l=>{const c=[],f=[];let m=te();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){f.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return e.localDocuments.getDocuments(n,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function JD(s,t){const e=Ut(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=t.batch.keys(),l=e.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,y){const b=g.batch,E=b.keys();let A=at.resolve();return E.forEach((x=>{A=A.next((()=>y.getEntry(m,x))).next((R=>{const D=g.docVersions.get(x);de(D!==null,48541),R.version.compareTo(D)<0&&(b.applyToRemoteDocument(R,g),R.isValidDocument()&&(R.setReadTime(g.commitVersion),y.addEntry(R)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,b)))})(e,n,t,l).next((()=>l.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(f){let m=te();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(t)))).next((()=>e.localDocuments.getDocuments(n,a)))}))}function tS(s){const t=Ut(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.li.getLastRemoteSnapshotVersion(e)))}function ZD(s,t){const e=Ut(s),n=t.snapshotVersion;let a=e.vs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.xs.newChangeBuffer({trackRemovals:!0});a=e.vs;const f=[];t.targetChanges.forEach(((y,b)=>{const E=a.get(b);if(!E)return;f.push(e.li.removeMatchingKeys(l,y.removedDocuments,b).next((()=>e.li.addMatchingKeys(l,y.addedDocuments,b))));let A=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(b)!==null?A=A.withResumeToken(Sn.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,n)),a=a.insert(b,A),(function(R,D,B){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=$D?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,A,y)&&f.push(e.li.updateTargetData(l,A))}));let m=Vs(),g=te();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(tO(l,c,t.documentUpdates).next((y=>{m=y.Bs,g=y.Ls}))),!n.isEqual(Lt.min())){const y=e.li.getLastRemoteSnapshotVersion(l).next((b=>e.li.setTargetsMetadata(l,l.currentSequenceNumber,n)));f.push(y)}return at.waitFor(f).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(e.vs=a,l)))}function tO(s,t,e){let n=te(),a=te();return e.forEach((l=>n=n.add(l))),t.getEntries(s,n).next((l=>{let c=Vs();return e.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Lt.min())?(t.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(f,m)):At(mp,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:a}}))}function eO(s,t){const e=Ut(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=ep),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function nO(s,t){const e=Ut(s);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return e.li.getTargetData(n,t).next((l=>l?(a=l,at.resolve(a)):e.li.allocateTargetId(n).next((c=>(a=new mr(t,c,"TargetPurposeListen",n.currentSequenceNumber),e.li.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=e.vs.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.vs=e.vs.insert(n.targetId,n),e.Fs.set(t,n.targetId)),n}))}async function Og(s,t,e){const n=Ut(s),a=n.vs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",l,(c=>n.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!jo(c))throw c;At(mp,`Failed to update sequence numbers for target ${t}: ${c}`)}n.vs=n.vs.remove(t),n.Fs.delete(a.target)}function C_(s,t,e){const n=Ut(s);let a=Lt.min(),l=te();return n.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const b=Ut(m),E=b.Fs.get(y);return E!==void 0?at.resolve(b.vs.get(E)):b.li.getTargetData(g,y)})(n,c,rs(t)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>n.Cs.getDocumentsMatchingQuery(c,t,e?a:Lt.min(),e?l:te()))).next((f=>(iO(n,FN(t),f),{documents:f,ks:l})))))}function iO(s,t,e){let n=s.Ms.get(t)||Lt.min();e.forEach(((a,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)})),s.Ms.set(t,n)}class R_{constructor(){this.activeTargetIds=KN()}Qs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sO{constructor(){this.vo=new R_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.vo.Qs(t),this.Fo[t]||"not-current"}updateQueryState(t,e,n){this.Fo[t]=e}removeLocalQueryTarget(t){this.vo.Gs(t)}isLocalQueryTarget(t){return this.vo.activeTargetIds.has(t)}clearQueryState(t){delete this.Fo[t]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(t){return this.vo.activeTargetIds.has(t)}start(){return this.vo=new R_,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class rO{Mo(t){}shutdown(){}}const M_="ConnectivityMonitor";class N_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(t){this.Lo.push(t)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){At(M_,"Network connectivity changed: AVAILABLE");for(const t of this.Lo)t(0)}Bo(){At(M_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Lo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dh=null;function Ig(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}const Bm="RestConnection",aO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class oO{get Ko(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=e+"://"+t.host,this.Uo=`projects/${n}/databases/${a}`,this.$o=this.databaseId.database===Bh?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Wo(t,e,n,a,l){const c=Ig(),f=this.Qo(t,e.toUriEncodedString());At(Bm,`Sending RPC '${t}' ${c}:`,f,n);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:g}=new URL(f),y=Xg(g);return this.zo(t,f,m,n,y).then((b=>(At(Bm,`Received RPC '${t}' ${c}: `,b),b)),(b=>{throw xo(Bm,`RPC '${t}' ${c} failed with error: `,b,"url: ",f,"request:",n),b}))}jo(t,e,n,a,l,c){return this.Wo(t,e,n,a,l)}Go(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((a,l)=>t[l]=a)),n&&n.headers.forEach(((a,l)=>t[l]=a))}Qo(t,e){const n=aO[t];let a=`${this.qo}/v1/${e}:${n}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class lO{constructor(t){this.Ho=t.Ho,this.Jo=t.Jo}Zo(t){this.Xo=t}Yo(t){this.e_=t}t_(t){this.n_=t}onMessage(t){this.r_=t}close(){this.Jo()}send(t){this.Ho(t)}i_(){this.Xo()}s_(){this.e_()}o_(t){this.n_(t)}__(t){this.r_(t)}}const An="WebChannelConnection",ql=(s,t,e)=>{s.listen(t,(n=>{try{e(n)}catch(a){setTimeout((()=>{throw a}),0)}}))};class bo extends oO{constructor(t){super(t),this.a_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}static u_(){if(!bo.c_){const t=aE();ql(t,rE.STAT_EVENT,(e=>{e.stat===wg.PROXY?At(An,"STAT_EVENT: detected buffering proxy"):e.stat===wg.NOPROXY&&At(An,"STAT_EVENT: detected no buffering proxy")})),bo.c_=!0}}zo(t,e,n,a,l){const c=Ig();return new Promise(((f,m)=>{const g=new iE;g.setWithCredentials(!0),g.listenOnce(sE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case xh.NO_ERROR:const b=g.getResponseJson();At(An,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(b)),f(b);break;case xh.TIMEOUT:At(An,`RPC '${t}' ${c} timed out`),m(new Dt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const E=g.getStatus();if(At(An,`RPC '${t}' ${c} failed with status:`,E,"response text:",g.getResponseText()),E>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const x=A?.error;if(x&&x.status&&x.message){const R=(function(B){const Z=B.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(Z)>=0?Z:lt.UNKNOWN})(x.status);m(new Dt(R,x.message))}else m(new Dt(lt.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Dt(lt.UNAVAILABLE,"Connection failed."));break;default:Pt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{At(An,`RPC '${t}' ${c} completed.`)}}));const y=JSON.stringify(a);At(An,`RPC '${t}' ${c} sending request:`,a),g.send(e,"POST",y,n,15)}))}T_(t,e,n){const a=Ig(),l=[this.qo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,e,n),f.encodeInitMessageHeaders=!0;const g=l.join("");At(An,`Creating RPC '${t}' stream ${a}: ${g}`,f);const y=c.createWebChannel(g,f);this.I_(y);let b=!1,E=!1;const A=new lO({Ho:x=>{E?At(An,`Not sending because RPC '${t}' stream ${a} is closed:`,x):(b||(At(An,`Opening RPC '${t}' stream ${a} transport.`),y.open(),b=!0),At(An,`RPC '${t}' stream ${a} sending:`,x),y.send(x))},Jo:()=>y.close()});return ql(y,Kl.EventType.OPEN,(()=>{E||(At(An,`RPC '${t}' stream ${a} transport opened.`),A.i_())})),ql(y,Kl.EventType.CLOSE,(()=>{E||(E=!0,At(An,`RPC '${t}' stream ${a} transport closed`),A.o_(),this.E_(y))})),ql(y,Kl.EventType.ERROR,(x=>{E||(E=!0,xo(An,`RPC '${t}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),A.o_(new Dt(lt.UNAVAILABLE,"The operation could not be completed")))})),ql(y,Kl.EventType.MESSAGE,(x=>{if(!E){const R=x.data[0];de(!!R,16349);const D=R,B=D?.error||D[0]?.error;if(B){At(An,`RPC '${t}' stream ${a} received error:`,B);const Z=B.status;let rt=(function(xt){const N=en[xt];if(N!==void 0)return UE(N)})(Z),gt=B.message;rt===void 0&&(rt=lt.INTERNAL,gt="Unknown error status: "+Z+" with message "+B.message),E=!0,A.o_(new Dt(rt,gt)),y.close()}else At(An,`RPC '${t}' stream ${a} received:`,R),A.__(R)}})),bo.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((t=>t.close())),this.a_=[]}I_(t){this.a_.push(t)}E_(t){this.a_=this.a_.filter((e=>e===t))}Go(t,e,n){super.Go(t,e,n),this.databaseInfo.apiKey&&(t["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return oE()}}function uO(s){return new bo(s)}function Fm(){return typeof document<"u"?document:null}function bf(s){return new dD(s,!0)}bo.c_=!1;class eS{constructor(t,e,n=1e3,a=1.5,l=6e4){this.Ci=t,this.timerId=e,this.R_=n,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(t){this.cancel();const e=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-n);a>0&&At("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const D_="PersistentStream";class nS{constructor(t,e,n,a,l,c,f,m){this.Ci=t,this.b_=n,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eS(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(t){this.q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===lt.RESOURCE_EXHAUSTED?(Is(e.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.t_(e)}W_(){}auth(){this.state=1;const t=this.Q_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.D_===e&&this.G_(n,a)}),(n=>{t((()=>{const a=new Dt(lt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)}))}))}G_(t,e){const n=this.Q_(this.D_);this.stream=this.j_(t,e),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{n((()=>this.z_(a)))})),this.stream.onMessage((a=>{n((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return At(D_,`close with error: ${t}`),this.stream=null,this.close(4,t)}Q_(t){return e=>{this.Ci.enqueueAndForget((()=>this.D_===t?e():(At(D_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cO extends nS{constructor(t,e,n,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,a,c),this.serializer=l}j_(t,e){return this.connection.T_("Listen",t,e)}H_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=pD(this.serializer,t),n=(function(l){if(!("targetChange"in l))return Lt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Lt.min():c.readTime?as(c.readTime):Lt.min()})(t);return this.listener.J_(e,n)}Z_(t){const e={};e.database=Dg(this.serializer),e.addTarget=(function(l,c){let f;const m=c.target;if(f=Ag(m)?{documents:bD(l,m)}:{query:_D(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=qE(l,c.resumeToken);const g=Rg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Lt.min())>0){f.readTime=Gh(l,c.snapshotVersion.toTimestamp());const g=Rg(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,t);const n=ED(this.serializer,t);n&&(e.labels=n),this.K_(e)}X_(t){const e={};e.database=Dg(this.serializer),e.removeTarget=t,this.K_(e)}}class hO extends nS{constructor(t,e,n,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,a,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}H_(t){return de(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,de(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){de(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=vD(t.writeResults,t.commitTime),n=as(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=Dg(this.serializer),this.K_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>yD(this.serializer,n)))};this.K_(e)}}class fO{}class dO extends fO{constructor(t,e,n,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Dt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,e,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,Mg(e,n),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Dt(lt.UNKNOWN,l.toString())}))}jo(t,e,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(t,Mg(e,n),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Dt(lt.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function mO(s,t,e,n){return new dO(s,t,e,n)}class gO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Is(e),this.aa=!1):At("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fa="RemoteStore";class pO{constructor(t,e,n,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{n.enqueueAndForget((async()=>{wa(this)&&(At(fa,"Restarting streams for network reachability change."),await(async function(m){const g=Ut(m);g.Ea.add(4),await Ou(g),g.Va.set("Unknown"),g.Ea.delete(4),await _f(g)})(this))}))})),this.Va=new gO(n,a)}}async function _f(s){if(wa(s))for(const t of s.Ra)await t(!0)}async function Ou(s){for(const t of s.Ra)await t(!1)}function iS(s,t){const e=Ut(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),vp(e)?yp(e):Uo(e).O_()&&pp(e,t))}function gp(s,t){const e=Ut(s),n=Uo(e);e.Ia.delete(t),n.O_()&&sS(e,t),e.Ia.size===0&&(n.O_()?n.L_():wa(e)&&e.Va.set("Unknown"))}function pp(s,t){if(s.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Uo(s).Z_(t)}function sS(s,t){s.da.$e(t),Uo(s).X_(t)}function yp(s){s.da=new uD({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Uo(s).start(),s.Va.ua()}function vp(s){return wa(s)&&!Uo(s).x_()&&s.Ia.size>0}function wa(s){return Ut(s).Ea.size===0}function rS(s){s.da=void 0}async function yO(s){s.Va.set("Online")}async function vO(s){s.Ia.forEach(((t,e)=>{pp(s,t)}))}async function bO(s,t){rS(s),vp(s)?(s.Va.ha(t),yp(s)):s.Va.set("Unknown")}async function _O(s,t,e){if(s.Va.set("Online"),t instanceof FE&&t.state===2&&t.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.da.removeTarget(f))})(s,t)}catch(n){At(fa,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await $h(s,n)}else if(t instanceof Mh?s.da.Xe(t):t instanceof BE?s.da.st(t):s.da.tt(t),!e.isEqual(Lt.min()))try{const n=await tS(s.localStore);e.compareTo(n)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Sn.EMPTY_BYTE_STRING,y.snapshotVersion)),sS(l,m);const b=new mr(y.target,m,g,y.sequenceNumber);pp(l,b)})),l.remoteSyncer.applyRemoteEvent(f)})(s,e)}catch(n){At(fa,"Failed to raise snapshot:",n),await $h(s,n)}}async function $h(s,t,e){if(!jo(t))throw t;s.Ea.add(1),await Ou(s),s.Va.set("Offline"),e||(e=()=>tS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{At(fa,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await _f(s)}))}function aS(s,t){return t().catch((e=>$h(s,e,t)))}async function wf(s){const t=Ut(s),e=Tr(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ep;for(;wO(t);)try{const a=await eO(t.localStore,n);if(a===null){t.Ta.length===0&&e.L_();break}n=a.batchId,EO(t,a)}catch(a){await $h(t,a)}oS(t)&&lS(t)}function wO(s){return wa(s)&&s.Ta.length<10}function EO(s,t){s.Ta.push(t);const e=Tr(s);e.O_()&&e.Y_&&e.ea(t.mutations)}function oS(s){return wa(s)&&!Tr(s).x_()&&s.Ta.length>0}function lS(s){Tr(s).start()}async function SO(s){Tr(s).ra()}async function TO(s){const t=Tr(s);for(const e of s.Ta)t.ea(e.mutations)}async function xO(s,t,e){const n=s.Ta.shift(),a=lp.from(n,t,e);await aS(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await wf(s)}async function AO(s,t){t&&Tr(s).Y_&&await(async function(n,a){if((function(c){return aD(c)&&c!==lt.ABORTED})(a.code)){const l=n.Ta.shift();Tr(n).B_(),await aS(n,(()=>n.remoteSyncer.rejectFailedWrite(l.batchId,a))),await wf(n)}})(s,t),oS(s)&&lS(s)}async function O_(s,t){const e=Ut(s);e.asyncQueue.verifyOperationInProgress(),At(fa,"RemoteStore received new credentials");const n=wa(e);e.Ea.add(3),await Ou(e),n&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await _f(e)}async function CO(s,t){const e=Ut(s);t?(e.Ea.delete(2),await _f(e)):t||(e.Ea.add(2),await Ou(e),e.Va.set("Unknown"))}function Uo(s){return s.ma||(s.ma=(function(e,n,a){const l=Ut(e);return l.sa(),new cO(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:yO.bind(null,s),Yo:vO.bind(null,s),t_:bO.bind(null,s),J_:_O.bind(null,s)}),s.Ra.push((async t=>{t?(s.ma.B_(),vp(s)?yp(s):s.Va.set("Unknown")):(await s.ma.stop(),rS(s))}))),s.ma}function Tr(s){return s.fa||(s.fa=(function(e,n,a){const l=Ut(e);return l.sa(),new hO(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:SO.bind(null,s),t_:AO.bind(null,s),ta:TO.bind(null,s),na:xO.bind(null,s)}),s.Ra.push((async t=>{t?(s.fa.B_(),await wf(s)):(await s.fa.stop(),s.Ta.length>0&&(At(fa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class bp{constructor(t,e,n,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=a,this.removalCallback=l,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,a,l){const c=Date.now()+n,f=new bp(t,e,c,a,l);return f.start(n),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Dt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(s,t){if(Is("AsyncQueue",`${t}: ${s}`),jo(s))return new Dt(lt.UNAVAILABLE,`${t}: ${s}`);throw s}class _o{static emptySet(t){return new _o(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||It.comparator(e.key,n.key):(e,n)=>It.comparator(e.key,n.key),this.keyedMap=$l(),this.sortedSet=new ke(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _o)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=n.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new _o;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class I_{constructor(){this.ga=new ke(It.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Pt(63341,{Vt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class No{constructor(t,e,n,a,l,c,f,m,g){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,n,a,l){const c=[];return e.forEach((f=>{c.push({type:0,doc:f})})),new No(t,e,_o.emptySet(e),c,n,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==n[a].type||!e[a].doc.isEqual(n[a].doc))return!1;return!0}}class RO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((t=>t.Da()))}}class MO{constructor(){this.queries=V_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const a=Ut(e),l=a.queries;a.queries=V_(),l.forEach(((c,f)=>{for(const m of f.ba)m.onError(n)}))})(this,new Dt(lt.ABORTED,"Firestore shutting down"))}}function V_(){return new ba((s=>CE(s)),mf)}async function NO(s,t){const e=Ut(s);let n=3;const a=t.query;let l=e.queries.get(a);l?!l.Sa()&&t.Da()&&(n=2):(l=new RO,n=t.Da()?0:1);try{switch(n){case 0:l.wa=await e.onListen(a,!0);break;case 1:l.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const f=_p(c,`Initialization of query '${fo(t.query)}' failed`);return void t.onError(f)}e.queries.set(a,l),l.ba.push(t),t.va(e.onlineState),l.wa&&t.Fa(l.wa)&&wp(e)}async function DO(s,t){const e=Ut(s),n=t.query;let a=3;const l=e.queries.get(n);if(l){const c=l.ba.indexOf(t);c>=0&&(l.ba.splice(c,1),l.ba.length===0?a=t.Da()?0:1:!l.Sa()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function OO(s,t){const e=Ut(s);let n=!1;for(const a of t){const l=a.query,c=e.queries.get(l);if(c){for(const f of c.ba)f.Fa(a)&&(n=!0);c.wa=a}}n&&wp(e)}function IO(s,t,e){const n=Ut(s),a=n.queries.get(t);if(a)for(const l of a.ba)l.onError(e);n.queries.delete(t)}function wp(s){s.Ca.forEach((t=>{t.next()}))}var Vg,P_;(P_=Vg||(Vg={})).Ma="default",P_.Cache="cache";class VO{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new No(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.Ka||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=No.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Vg.Cache}}class uS{constructor(t){this.key=t}}class cS{constructor(t){this.key=t}}class PO{constructor(t,e){this.query=t,this.Za=e,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=te(),this.mutatedKeys=te(),this.eu=RE(t),this.tu=new _o(this.eu)}get nu(){return this.Za}ru(t,e){const n=e?e.iu:new I_,a=e?e.tu:this.tu;let l=e?e.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((y,b)=>{const E=a.get(y),A=gf(this.query,b)?b:null,x=!!E&&this.mutatedKeys.has(E.key),R=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;E&&A?E.data.isEqual(A.data)?x!==R&&(n.track({type:3,doc:A}),D=!0):this.su(E,A)||(n.track({type:2,doc:A}),D=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(f=!0)):!E&&A?(n.track({type:0,doc:A}),D=!0):E&&!A&&(n.track({type:1,doc:E}),D=!0,(m||g)&&(f=!0)),D&&(A?(c=c.add(A),l=R?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),n.track({type:1,doc:y})}return{tu:c,iu:n,Ss:f,mutatedKeys:l}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,a){const l=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((y,b)=>(function(A,x){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt(20277,{Vt:D})}};return R(A)-R(x)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(n),a=a??!1;const f=e&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new No(this.query,t.tu,l,c,t.mutatedKeys,m===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new I_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(t){return!this.Za.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Ya;this.Ya=te(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))}));const e=[];return t.forEach((n=>{this.Ya.has(n)||e.push(new cS(n))})),this.Ya.forEach((n=>{t.has(n)||e.push(new uS(n))})),e}cu(t){this.Za=t.ks,this.Ya=te();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ep="SyncEngine";class kO{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class zO{constructor(t){this.key=t,this.hu=!1}}class LO{constructor(t,e,n,a,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ba((f=>CE(f)),mf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ke(It.comparator),this.Au=new Map,this.Vu=new hp,this.du={},this.mu=new Map,this.fu=Mo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jO(s,t,e=!0){const n=pS(s);let a;const l=n.Tu.get(t);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await hS(n,t,e,!0),a}async function UO(s,t){const e=pS(s);await hS(e,t,!0,!1)}async function hS(s,t,e,n){const a=await nO(s.localStore,rs(t)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,e);let f;return n&&(f=await BO(s,t,l,c==="current",a.resumeToken)),s.isPrimaryClient&&e&&iS(s.remoteStore,a),f}async function BO(s,t,e,n,a){s.pu=(b,E,A)=>(async function(R,D,B,Z){let rt=D.view.ru(B);rt.Ss&&(rt=await C_(R.localStore,D.query,!1).then((({documents:N})=>D.view.ru(N,rt))));const gt=Z&&Z.targetChanges.get(D.targetId),yt=Z&&Z.targetMismatches.get(D.targetId)!=null,xt=D.view.applyChanges(rt,R.isPrimaryClient,gt,yt);return z_(R,D.targetId,xt.au),xt.snapshot})(s,b,E,A);const l=await C_(s.localStore,t,!0),c=new PO(t,l.ks),f=c.ru(l.documents),m=Du.createSynthesizedTargetChangeForCurrentChange(e,n&&s.onlineState!=="Offline",a),g=c.applyChanges(f,s.isPrimaryClient,m);z_(s,e,g.au);const y=new kO(t,e,c);return s.Tu.set(t,y),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),g.snapshot}async function FO(s,t,e){const n=Ut(s),a=n.Tu.get(t),l=n.Iu.get(a.targetId);if(l.length>1)return n.Iu.set(a.targetId,l.filter((c=>!mf(c,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Og(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),e&&gp(n.remoteStore,a.targetId),Pg(n,a.targetId)})).catch(Lo)):(Pg(n,a.targetId),await Og(n.localStore,a.targetId,!0))}async function qO(s,t){const e=Ut(s),n=e.Tu.get(t),a=e.Iu.get(n.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),gp(e.remoteStore,n.targetId))}async function YO(s,t,e){const n=WO(s);try{const a=await(function(c,f){const m=Ut(c),g=Ce.now(),y=f.reduce(((A,x)=>A.add(x.key)),te());let b,E;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let x=Vs(),R=te();return m.xs.getEntries(A,y).next((D=>{x=D,x.forEach(((B,Z)=>{Z.isValidDocument()||(R=R.add(B))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,x))).next((D=>{b=D;const B=[];for(const Z of f){const rt=eD(Z,b.get(Z.key).overlayedDocument);rt!=null&&B.push(new _a(Z.key,rt,_E(rt.value.mapValue),Ds.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,B,f)})).next((D=>{E=D;const B=D.applyToLocalDocumentSet(b,R);return m.documentOverlayCache.saveOverlays(A,D.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:NE(b)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.du[c.currentUser.toKey()];g||(g=new ke(Zt)),g=g.insert(f,m),c.du[c.currentUser.toKey()]=g})(n,a.batchId,e),await Iu(n,a.changes),await wf(n.remoteStore)}catch(a){const l=_p(a,"Failed to persist write");e.reject(l)}}async function fS(s,t){const e=Ut(s);try{const n=await ZD(e.localStore,t);t.targetChanges.forEach(((a,l)=>{const c=e.Au.get(l);c&&(de(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?de(c.hu,14607):a.removedDocuments.size>0&&(de(c.hu,42227),c.hu=!1))})),await Iu(e,n,t)}catch(n){await Lo(n)}}function k_(s,t,e){const n=Ut(s);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const a=[];n.Tu.forEach(((l,c)=>{const f=c.view.va(t);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Ut(c);m.onlineState=f;let g=!1;m.queries.forEach(((y,b)=>{for(const E of b.ba)E.va(f)&&(g=!0)})),g&&wp(m)})(n.eventManager,t),a.length&&n.Pu.J_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function HO(s,t,e){const n=Ut(s);n.sharedClientState.updateQueryState(t,"rejected",e);const a=n.Au.get(t),l=a&&a.key;if(l){let c=new ke(It.comparator);c=c.insert(l,Rn.newNoDocument(l,Lt.min()));const f=te().add(l),m=new vf(Lt.min(),new Map,new ke(Zt),c,f);await fS(n,m),n.Ru=n.Ru.remove(l),n.Au.delete(t),Sp(n)}else await Og(n.localStore,t,!1).then((()=>Pg(n,t,e))).catch(Lo)}async function QO(s,t){const e=Ut(s),n=t.batch.batchId;try{const a=await JD(e.localStore,t);mS(e,n,null),dS(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Iu(e,a)}catch(a){await Lo(a)}}async function GO(s,t,e){const n=Ut(s);try{const a=await(function(c,f){const m=Ut(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,f).next((b=>(de(b!==null,37113),y=b.keys(),m.mutationQueue.removeMutationBatch(g,b)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(n.localStore,t);mS(n,t,e),dS(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Iu(n,a)}catch(a){await Lo(a)}}function dS(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function mS(s,t,e){const n=Ut(s);let a=n.du[n.currentUser.toKey()];if(a){const l=a.get(t);l&&(e?l.reject(e):l.resolve(),a=a.remove(t)),n.du[n.currentUser.toKey()]=a}}function Pg(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const n of s.Iu.get(t))s.Tu.delete(n),e&&s.Pu.yu(n,e);s.Iu.delete(t),s.isPrimaryClient&&s.Vu.Gr(t).forEach((n=>{s.Vu.containsKey(n)||gS(s,n)}))}function gS(s,t){s.Eu.delete(t.path.canonicalString());const e=s.Ru.get(t);e!==null&&(gp(s.remoteStore,e),s.Ru=s.Ru.remove(t),s.Au.delete(e),Sp(s))}function z_(s,t,e){for(const n of e)n instanceof uS?(s.Vu.addReference(n.key,t),KO(s,n)):n instanceof cS?(At(Ep,"Document no longer in limbo: "+n.key),s.Vu.removeReference(n.key,t),s.Vu.containsKey(n.key)||gS(s,n.key)):Pt(19791,{wu:n})}function KO(s,t){const e=t.key,n=e.path.canonicalString();s.Ru.get(e)||s.Eu.has(n)||(At(Ep,"New document in limbo: "+e),s.Eu.add(n),Sp(s))}function Sp(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new It(Pe.fromString(t)),n=s.fu.next();s.Au.set(n,new zO(e)),s.Ru=s.Ru.insert(e,n),iS(s.remoteStore,new mr(rs(ap(e.path)),n,"TargetPurposeLimboResolution",cf.ce))}}async function Iu(s,t,e){const n=Ut(s),a=[],l=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach(((f,m)=>{c.push(n.pu(m,t,e).then((g=>{if((g||e)&&n.isPrimaryClient){const y=g?!g.fromCache:e?.targetChanges.get(m.targetId)?.current;n.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=dp.Es(m.targetId,g);l.push(y)}})))})),await Promise.all(c),n.Pu.J_(a),await(async function(m,g){const y=Ut(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>at.forEach(g,(E=>at.forEach(E.Ts,(A=>y.persistence.referenceDelegate.addReference(b,E.targetId,A))).next((()=>at.forEach(E.Is,(A=>y.persistence.referenceDelegate.removeReference(b,E.targetId,A)))))))))}catch(b){if(!jo(b))throw b;At(mp,"Failed to update sequence numbers: "+b)}for(const b of g){const E=b.targetId;if(!b.fromCache){const A=y.vs.get(E),x=A.snapshotVersion,R=A.withLastLimboFreeSnapshotVersion(x);y.vs=y.vs.insert(E,R)}}})(n.localStore,l))}async function $O(s,t){const e=Ut(s);if(!e.currentUser.isEqual(t)){At(Ep,"User change. New user:",t.toKey());const n=await ZE(e.localStore,t);e.currentUser=t,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new Dt(lt.CANCELLED,c))}))})),l.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Iu(e,n.Ns)}}function XO(s,t){const e=Ut(s),n=e.Au.get(t);if(n&&n.hu)return te().add(n.key);{let a=te();const l=e.Iu.get(t);if(!l)return a;for(const c of l){const f=e.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function pS(s){const t=Ut(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=fS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=HO.bind(null,t),t.Pu.J_=OO.bind(null,t.eventManager),t.Pu.yu=IO.bind(null,t.eventManager),t}function WO(s){const t=Ut(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=QO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GO.bind(null,t),t}class Xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=bf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return WD(this.persistence,new KD,t.initialUser,this.serializer)}Cu(t){return new JE(fp.Vi,this.serializer)}Du(t){return new sO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xh.provider={build:()=>new Xh};class JO extends Xh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){de(this.persistence.referenceDelegate instanceof Kh,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ID(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new JE((n=>Kh.Vi(n,e)),this.serializer)}}class kg{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>k_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=$O.bind(null,this.syncEngine),await CO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new MO})()}createDatastore(t){const e=bf(t.databaseInfo.databaseId),n=uO(t.databaseInfo);return mO(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,a,l,c,f){return new pO(n,a,l,c,f)})(this.localStore,this.datastore,t.asyncQueue,(e=>k_(this.syncEngine,e,0)),(function(){return N_.v()?new N_:new rO})())}createSyncEngine(t,e){return(function(a,l,c,f,m,g,y){const b=new LO(a,l,c,f,m,g);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=Ut(e);At(fa,"RemoteStore shutting down."),n.Ea.add(5),await Ou(n),n.Aa.shutdown(),n.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kg.provider={build:()=>new kg};class ZO{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Is("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const xr="FirestoreClient";class tI{constructor(t,e,n,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this._databaseInfo=a,this.user=Cn.UNAUTHENTICATED,this.clientId=Zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,(async c=>{At(xr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(n,(c=>(At(xr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_p(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function qm(s,t){s.asyncQueue.verifyOperationInProgress(),At(xr,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let n=e.initialUser;s.setCredentialChangeListener((async a=>{n.isEqual(a)||(await ZE(t.localStore,a),n=a)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function L_(s,t){s.asyncQueue.verifyOperationInProgress();const e=await eI(s);At(xr,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((n=>O_(t.remoteStore,n))),s.setAppCheckTokenChangeListener(((n,a)=>O_(t.remoteStore,a))),s._onlineComponents=t}async function eI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){At(xr,"Using user provided OfflineComponentProvider");try{await qm(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(a){return a.name==="FirebaseError"?a.code===lt.FAILED_PRECONDITION||a.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(e))throw e;xo("Error using user provided cache. Falling back to memory cache: "+e),await qm(s,new Xh)}}else At(xr,"Using default OfflineComponentProvider"),await qm(s,new JO(void 0));return s._offlineComponents}async function yS(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(At(xr,"Using user provided OnlineComponentProvider"),await L_(s,s._uninitializedComponentsProvider._online)):(At(xr,"Using default OnlineComponentProvider"),await L_(s,new kg))),s._onlineComponents}function nI(s){return yS(s).then((t=>t.syncEngine))}async function iI(s){const t=await yS(s),e=t.eventManager;return e.onListen=jO.bind(null,t.syncEngine),e.onUnlisten=FO.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=UO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=qO.bind(null,t.syncEngine),e}function sI(s,t,e={}){const n=new br;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const y=new ZO({next:E=>{y.Nu(),c.enqueueAndForget((()=>DO(l,b)));const A=E.docs.has(f);!A&&E.fromCache?g.reject(new Dt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&m&&m.source==="server"?g.reject(new Dt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),b=new VO(ap(f.path),y,{includeMetadataChanges:!0,Ka:!0});return NO(l,b)})(await iI(s),s.asyncQueue,t,e,n))),n.promise}function rI(s,t){const e=new br;return s.asyncQueue.enqueueAndForget((async()=>YO(await nI(s),t,e))),e.promise}function vS(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const aI="ComponentProvider",j_=new Map;function oI(s,t,e,n,a){return new SN(s,t,e,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,vS(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,n)}const bS="firestore.googleapis.com",U_=!0;class B_{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Dt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bS,this.ssl=U_}else this.host=t.host,this.ssl=t.ssl??U_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<DD)throw new Dt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vS(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Dt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tp{constructor(t,e,n,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Dt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Dt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new eN;switch(n.type){case"firstParty":return new rN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Dt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=j_.get(e);n&&(At(aI,"Removing Datastore"),j_.delete(e),n.terminate())})(this),Promise.resolve()}}function lI(s,t,e,n={}){s=fu(s,Tp);const a=Xg(t),l=s._getSettings(),c={...l,emulatorOptions:s._getEmulatorOptions()},f=`${t}:${e}`;a&&(CR(`https://${f}`),DR("Firestore",!0)),l.host!==bS&&l.host!==f&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:n};if(!kh(m,c)&&(s._setSettings(m),n.mockUserToken)){let g,y;if(typeof n.mockUserToken=="string")g=n.mockUserToken,y=Cn.MOCK_USER;else{g=RR(n.mockUserToken,s._app?.options.projectId);const b=n.mockUserToken.sub||n.mockUserToken.user_id;if(!b)throw new Dt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Cn(b)}s._authCredentials=new nN(new uE(g,y))}}class xp{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new xp(this.firestore,t,this._query)}}class fn{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fn(this.firestore,t,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Mu(e,fn._jsonSchema))return new fn(t,n||null,new It(Pe.fromString(e.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:sn("string",fn._jsonSchemaVersion),referencePath:sn("string")};class bu extends xp{constructor(t,e,n){super(t,e,ap(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fn(this.firestore,null,new It(t))}withConverter(t){return new bu(this.firestore,t,this._path)}}function _S(s,t,...e){if(s=zh(s),arguments.length===1&&(t=Zg.newId()),hN("doc","path",t),s instanceof Tp){const n=Pe.fromString(t,...e);return e_(n),new fn(s,null,new It(n))}{if(!(s instanceof fn||s instanceof bu))throw new Dt(lt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=s._path.child(Pe.fromString(t,...e));return e_(n),new fn(s.firestore,s instanceof bu?s.converter:null,new It(n))}}const F_="AsyncQueue";class q_{constructor(t=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eS(this,"async_queue_retry"),this._c=()=>{const n=Fm();n&&At(F_,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=Fm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Fm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new br;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Yu.push(t),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(t){if(!jo(t))throw t;At(F_,"Operation failed with retryable error: "+t)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,Is("INTERNAL UNHANDLED ERROR: ",Y_(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=bp.createAndSchedule(this,t,e,n,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Pt(47125,{Pc:Y_(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}Rc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Y_(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class Ap extends Tp{constructor(t,e,n,a){super(t,e,n,a),this.type="firestore",this._queue=new q_,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new q_(t),this._firestoreClient=void 0,await t}}}function uI(s,t){const e=typeof s=="object"?s:BM(),n=typeof s=="string"?s:Bh,a=kM(e,"firestore").getImmediate({identifier:n});if(!a._initialized){const l=xR("firestore");l&&lI(a,...l)}return a}function wS(s){if(s._terminated)throw new Dt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||cI(s),s._firestoreClient}function cI(s){const t=s._freezeSettings(),e=oI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new tI(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(s._componentsProvider))}class vi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vi(Sn.fromBase64String(t))}catch(e){throw new Dt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new vi(Sn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Mu(t,vi._jsonSchema))return vi.fromBase64String(t.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:sn("string",vi._jsonSchemaVersion),bytes:sn("string")};class ES{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Dt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class SS{constructor(t){this._methodName=t}}class os{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Dt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Dt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Zt(this._lat,t._lat)||Zt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(t){if(Mu(t,os._jsonSchema))return new os(t.latitude,t.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:sn("string",os._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};class Oi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,a){if(n.length!==a.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Mu(t,Oi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Oi(t.vectorValues);throw new Dt(lt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oi._jsonSchemaVersion="firestore/vectorValue/1.0",Oi._jsonSchema={type:sn("string",Oi._jsonSchemaVersion),vectorValues:sn("object")};const hI=/^__.*__$/;class fI{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new _a(t,this.data,this.fieldMask,e,this.fieldTransforms):new Nu(t,this.data,e,this.fieldTransforms)}}function TS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt(40011,{dataSource:s})}}class Cp{constructor(t,e,n,a,l,c){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new Cp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){const e=this.path?.child(t),n=this.contextWith({path:e,arrayElement:!1});return n.validatePathSegment(t),n}childContextForFieldPath(t){const e=this.path?.child(t),n=this.contextWith({path:e,arrayElement:!1});return n.validatePath(),n}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return Wh(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(TS(this.dataSource)&&hI.test(t))throw this.createError('Document fields cannot begin and end with "__"')}}class dI{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||bf(t)}createContext(t,e,n,a=!1){return new Cp({dataSource:t,methodName:e,targetDoc:n,path:En.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mI(s){const t=s._freezeSettings(),e=bf(s._databaseId);return new dI(s._databaseId,!!t.ignoreUndefinedProperties,e)}function gI(s,t,e,n,a,l={}){const c=s.createContext(l.merge||l.mergeFields?2:0,t,e,a);RS("Data must be an object, but it was:",c,n);const f=AS(n,c);let m,g;if(l.merge)m=new Di(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const E=Rp(t,b,e);if(!c.contains(E))throw new Dt(lt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);vI(y,E)||y.push(E)}m=new Di(y),g=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,g=c.fieldTransforms;return new fI(new yi(f),m,g)}function xS(s,t){if(CS(s=zh(s)))return RS("Unsupported field value:",t,s),AS(s,t);if(s instanceof SS)return(function(n,a){if(!TS(a.dataSource))throw a.createError(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return(function(n,a){const l=[];let c=0;for(const f of n){let m=xS(f,a.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(s,t)}return(function(n,a){if((n=zh(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return $N(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=Ce.fromDate(n);return{timestampValue:Gh(a.serializer,l)}}if(n instanceof Ce){const l=new Ce(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gh(a.serializer,l)}}if(n instanceof os)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof vi)return{bytesValue:qE(a.serializer,n._byteString)};if(n instanceof fn){const l=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw a.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:cp(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Oi)return(function(c,f){const m=c instanceof Oi?c.toArray():c;return{mapValue:{fields:{[vE]:{stringValue:bE},[Fh]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return op(f.serializer,y)}))}}}}}})(n,a);if(XE(n))return n._toProto(a.serializer);throw a.createError(`Unsupported field value: ${tp(n)}`)})(s,t)}function AS(s,t){const e={};return fE(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):va(s,((n,a)=>{const l=xS(a,t.childContextForField(n));l!=null&&(e[n]=l)})),{mapValue:{fields:e}}}function CS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ce||s instanceof os||s instanceof vi||s instanceof fn||s instanceof SS||s instanceof Oi||XE(s))}function RS(s,t,e){if(!CS(e)||!cE(e)){const n=tp(e);throw n==="an object"?t.createError(s+" a custom object"):t.createError(s+" "+n)}}function Rp(s,t,e){if((t=zh(t))instanceof ES)return t._internalPath;if(typeof t=="string")return yI(s,t);throw Wh("Field path arguments must be of type string or ",s,!1,void 0,e)}const pI=new RegExp("[~\\*/\\[\\]]");function yI(s,t,e){if(t.search(pI)>=0)throw Wh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new ES(...t.split("."))._internalPath}catch{throw Wh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Wh(s,t,e,n,a){const l=n&&!n.isEmpty(),c=a!==void 0;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${n}`),c&&(m+=` in document ${a}`),m+=")"),new Dt(lt.INVALID_ARGUMENT,f+s+m)}function vI(s,t){return s.some((e=>e.isEqual(t)))}class bI{convertValue(t,e="none"){switch(Sr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Er(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Pt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return va(t,((a,l)=>{n[a]=this.convertValue(l,e)})),n}convertVectorValue(t){const e=t.fields?.[Fh].arrayValue?.values?.map((n=>qe(n.doubleValue)));return new Oi(e)}convertGeoPoint(t){return new os(qe(t.latitude),qe(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=ff(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(mu(t));default:return null}}convertTimestamp(t){const e=wr(t);return new Ce(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Pe.fromString(t);de($E(n),9688,{name:t});const a=new gu(n.get(1),n.get(3)),l=new It(n.popFirst(5));return a.isEqual(e)||Is(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}class _I extends bI{constructor(t){super(),this.firestore=t}convertBytes(t){return new vi(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fn(this.firestore,null,e)}}const H_="@firebase/firestore",Q_="4.10.0";class MS{constructor(t,e,n,a,l){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new wI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(t){if(this._document){const e=this._document.data.field(Rp("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class wI extends MS{data(){return super.data()}}function EI(s,t,e){let n;return n=s?s.toFirestore(t):t,n}class Wl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class la extends MS{constructor(t,e,n,a,l,c){super(t,e,n,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Dt(lt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=la._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}la._jsonSchemaVersion="firestore/documentSnapshot/1.0",la._jsonSchema={type:sn("string",la._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class Nh extends la{data(t={}){return super.data(t)}}class iu{constructor(t,e,n,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Wl(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Nh(this._firestore,this._userDataWriter,n.key,n,new Wl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Dt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new Nh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Wl(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Nh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Wl(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:SI(f.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Dt(lt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=iu._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(e.push(l._document),n.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function SI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt(61501,{type:s})}}iu._jsonSchemaVersion="firestore/querySnapshot/1.0",iu._jsonSchema={type:sn("string",iu._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};function TI(s){s=fu(s,fn);const t=fu(s.firestore,Ap),e=wS(t);return sI(e,s._key).then((n=>CI(t,s,n)))}function xI(s,t,e){s=fu(s,fn);const n=fu(s.firestore,Ap),a=EI(s.converter,t),l=mI(n);return AI(n,[gI(l,"setDoc",s._key,a,s.converter!==null,e).toMutation(s._key,Ds.none())])}function AI(s,t){const e=wS(s);return rI(e,t)}function CI(s,t,e){const n=e.docs.get(t._key),a=new _I(s);return new la(s,a,t._key,n,new Wl(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){tN(UM),jh(new cu("firestore",((n,{instanceIdentifier:a,options:l})=>{const c=n.getProvider("app").getImmediate(),f=new Ap(new iN(n.getProvider("auth-internal")),new aN(c,n.getProvider("app-check-internal")),TN(c,a),c);return l={useFetchStreams:e,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),vo(H_,Q_,t),vo(H_,Q_,"esm2020")})();const RI={apiKey:"AIzaSyCPFedCPkwOoSKH8GyvBb-CQSV9SaAmqKQ",authDomain:"back-test-f7f91.firebaseapp.com",projectId:"back-test-f7f91",storageBucket:"back-test-f7f91.firebasestorage.app",messagingSenderId:"166346377750",appId:"1:166346377750:web:5ed7a43aebcac08c538337"},MI=Zw(RI),NS=uI(MI),DS="current_session",NI=async s=>{try{const t=_S(NS,"sessions",DS);await xI(t,{...s,lastUpdated:Date.now()}),console.log("Session saved successfully")}catch(t){throw console.error("Error saving session:",t),t}},DI=async()=>{try{const s=_S(NS,"sessions",DS),t=await TI(s);return t.exists()?t.data():(console.log("No such session!"),null)}catch(s){throw console.error("Error loading session:",s),s}},ei=Fw(s=>({notifications:[],notify:(t,e="info")=>{const n=Math.random().toString(36).substring(2,9);s(a=>({notifications:[...a.notifications,{id:n,message:t,type:e}]})),setTimeout(()=>{s(a=>({notifications:a.notifications.filter(l=>l.id!==n)}))},5e3)},remove:t=>{s(e=>({notifications:e.notifications.filter(n=>n.id!==t)}))}})),OI=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,nn=Fw((s,t)=>({candles:[],currentIndex:0,trades:[],position:null,instrument:"",sessionConfig:null,isPlaying:!1,speed:1,isLoading:!1,loadCandles:(e,n,a)=>{s({candles:e,instrument:n,sessionConfig:a||null,currentIndex:0,trades:[],position:null,isPlaying:!1})},play:()=>s({isPlaying:!0}),pause:()=>s({isPlaying:!1}),step:e=>{const{currentIndex:n,candles:a}=t();e==="forward"&&n<a.length-1?s({currentIndex:n+1}):e==="backward"&&n>0&&s({currentIndex:n-1})},setSpeed:e=>s({speed:e}),setCurrentIndex:e=>{const{candles:n}=t();e>=0&&e<n.length&&s({currentIndex:e})},executeTrade:(e,n)=>{const{candles:a,currentIndex:l,trades:c,position:f,instrument:m}=t(),g=a[l];if(!g){console.error("No current candle available");return}const y=g.close,b=g.timestamp,E={id:OI(),timestamp:b,type:e,price:y,quantity:n,instrument:m},A=f?f.quantity:0,x=f?f.averagePrice:0,R=e==="BUY"?1:-1,D=n*R;let B=A+D,Z=x,rt=f?f.realizedPnL:0,gt;const yt=A>=0&&R>0||A<=0&&R<0;if(A===0)Z=y;else if(yt){const N=Math.abs(A)*x+n*y,M=Math.abs(A)+n;Z=N/M}else{const N=Math.min(Math.abs(A),n),O=(A>0?y-x:x-y)*N;gt=O,rt+=O,n-N>0&&(Z=y)}E.pnl=gt;const xt={instrument:m,quantity:B,averagePrice:Z,realizedPnL:rt,unrealizedPnL:0};s({trades:[...c,E],position:B!==0?xt:null})},resetSession:()=>{s({currentIndex:0,trades:[],position:null,isPlaying:!1})},saveCurrentSession:()=>{const{instrument:e,trades:n}=t();if(n.length===0)return;const a=Yw(n),l=Hw(a);mR(e,n,{totalPnL:l.totalPnL,winRate:l.winRate})},saveRemoteSession:async()=>{const{instrument:e,trades:n,position:a,currentIndex:l,sessionConfig:c}=t();if(!c){console.warn("Cannot save session: Missing session configuration"),ei.getState().notify("Cannot save: Missing session configuration. Please reload data.","error");return}const f=n.map(y=>{const b={...y};return b.pnl===void 0&&(b.pnl=null),b}),g={...{name:`Session - ${e}`,lastUpdated:Date.now(),instrument:e,interval:c.interval,fromDate:c.fromDate,toDate:c.toDate,currentIndex:l,trades:f,position:a},securityId:c.securityId,exchangeSegment:c.exchangeSegment,dataSource:c.dataSource,instrumentType:c.instrumentType||"EQUITY"};s({isLoading:!0});try{await NI(g),ei.getState().notify("Session saved to cloud successfully!","success")}catch(y){console.error(y),ei.getState().notify(`Failed to save session: ${y.message}`,"error")}finally{s({isLoading:!1})}},loadRemoteSession:async()=>{s({isLoading:!0});try{const e=await DI();if(!e)return null;const n={securityId:e.securityId,exchangeSegment:e.exchangeSegment||"NSE_EQ",instrumentType:e.instrumentType||"EQUITY",interval:e.interval,fromDate:e.fromDate,toDate:e.toDate,dataSource:e.dataSource||"local"},a={trades:e.trades,position:e.position,currentIndex:e.currentIndex};return{config:n,data:a}}catch(e){return console.error(e),null}finally{s({isLoading:!1})}},restoreSessionState:(e,n,a)=>{s({trades:e,position:n,currentIndex:a})},getCurrentCandle:()=>{const{candles:e,currentIndex:n}=t();return e[n]||null},getVisibleCandles:()=>{const{candles:e,currentIndex:n}=t();return e.slice(0,n+1)},getUnrealizedPnL:()=>{const{position:e,candles:n,currentIndex:a}=t();if(!e||e.quantity===0)return 0;const l=n[a];return l?(l.close-e.averagePrice)*e.quantity:0},jump:e=>{const{currentIndex:n,candles:a}=t(),l=n+e;l>=0&&l<a.length?s({currentIndex:l}):l<0?s({currentIndex:0}):s({currentIndex:a.length-1})},getRealizedPnL:()=>{const{position:e}=t();return e?.realizedPnL||0}})),OS=[{token:"99926000",name:"Nifty 50",symbol:"NIFTY 50",exchange:"NSE_FNO",instrumentType:"INDEX",category:"Index"},{token:"99926009",name:"Nifty Bank",symbol:"NIFTY BANK",exchange:"NSE_FNO",instrumentType:"INDEX",category:"Index"},{token:"99926037",name:"Nifty Financial Services",symbol:"NIFTY FIN SERVICE",exchange:"NSE_FNO",instrumentType:"INDEX",category:"Index"},{token:"99926074",name:"Nifty Midcap 50",symbol:"NIFTY MID SELECT",exchange:"NSE_FNO",instrumentType:"INDEX",category:"Index"},{token:"99926013",name:"Nifty IT",symbol:"NIFTY IT",exchange:"NSE_FNO",instrumentType:"INDEX",category:"Index"},{token:"3045",name:"State Bank of India",symbol:"SBIN",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"1333",name:"HDFC Bank",symbol:"HDFCBANK",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"1660",name:"ICICI Bank",symbol:"ICICIBANK",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"1922",name:"Kotak Mahindra Bank",symbol:"KOTAKBANK",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"1795",name:"Axis Bank",symbol:"AXISBANK",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"1594",name:"IndusInd Bank",symbol:"INDUSINDBK",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"4668",name:"Bajaj Finance",symbol:"BAJFINANCE",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"16669",name:"Bajaj Finserv",symbol:"BAJAJFINSV",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Banking"},{token:"11536",name:"Tata Consultancy Services",symbol:"TCS",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"1594",name:"Infosys",symbol:"INFY",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"1660",name:"HCL Technologies",symbol:"HCLTECH",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"3506",name:"Wipro",symbol:"WIPRO",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"10794",name:"Tech Mahindra",symbol:"TECHM",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"18011",name:"LTIMindtree",symbol:"LTIM",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"IT"},{token:"2885",name:"Reliance Industries",symbol:"RELIANCE",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"3499",name:"NTPC",symbol:"NTPC",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"3063",name:"Power Grid Corporation",symbol:"POWERGRID",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"1330",name:"Coal India",symbol:"COALINDIA",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"1624",name:"ONGC",symbol:"ONGC",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"2952",name:"BPCL",symbol:"BPCL",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Energy"},{token:"3456",name:"Maruti Suzuki",symbol:"MARUTI",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Auto"},{token:"16675",name:"Tata Motors",symbol:"TATAMOTORS",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Auto"},{token:"10999",name:"Mahindra & Mahindra",symbol:"M&M",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Auto"},{token:"1270",name:"Bajaj Auto",symbol:"BAJAJ-AUTO",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Auto"},{token:"10447",name:"Eicher Motors",symbol:"EICHERMOT",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Auto"},{token:"1394",name:"Hindustan Unilever",symbol:"HINDUNILVR",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"FMCG"},{token:"1624",name:"ITC",symbol:"ITC",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"FMCG"},{token:"4717",name:"Nestle India",symbol:"NESTLEIND",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"FMCG"},{token:"4632",name:"Britannia Industries",symbol:"BRITANNIA",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"FMCG"},{token:"772",name:"Asian Paints",symbol:"ASIANPAINT",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"FMCG"},{token:"3351",name:"Sun Pharma",symbol:"SUNPHARMA",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Pharma"},{token:"1348",name:"Dr Reddy's Laboratories",symbol:"DRREDDY",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Pharma"},{token:"1922",name:"Cipla",symbol:"CIPLA",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Pharma"},{token:"14977",name:"Divi's Laboratories",symbol:"DIVISLAB",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Pharma"},{token:"3499",name:"Tata Steel",symbol:"TATASTEEL",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Metals"},{token:"1363",name:"Hindalco Industries",symbol:"HINDALCO",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Metals"},{token:"1995",name:"JSW Steel",symbol:"JSWSTEEL",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Metals"},{token:"11536",name:"Larsen & Toubro",symbol:"LT",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"},{token:"5258",name:"Adani Enterprises",symbol:"ADANIENT",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"},{token:"19113",name:"Adani Ports",symbol:"ADANIPORTS",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"},{token:"236",name:"Bharti Airtel",symbol:"BHARTIARTL",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"},{token:"467",name:"UltraTech Cement",symbol:"ULTRACEMCO",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"},{token:"2181",name:"Grasim Industries",symbol:"GRASIM",exchange:"NSE_EQ",instrumentType:"EQUITY",category:"Other"}],II=["All","Index","Nifty 50","Banking","IT","Auto","Pharma","FMCG","Energy","Metals","Other"];function VI(s,t="All"){const e=s.toLowerCase().trim();let n=OS;return t!=="All"&&(n=n.filter(a=>a.category===t)),e&&(n=n.filter(a=>a.name.toLowerCase().includes(e)||a.symbol.toLowerCase().includes(e)||a.token.includes(e))),n}function IS(s){const t=[],e=s.t.length;for(let n=0;n<e;n++)t.push({timestamp:s.t[n],open:s.o[n],high:s.h[n],low:s.l[n],close:s.c[n],volume:s.v[n]});return t}function VS(s,t){if(t<=1)return s;const e=[],n=t*60;let a=-1,l=[];for(const c of s){const f=c.timestamp,m=Math.floor(f/n)*n;a===-1?(a=m,l.push(c)):m===a?l.push(c):(l.length>0&&e.push(G_(l,a)),a=m,l=[c])}return l.length>0&&e.push(G_(l,a)),e}function G_(s,t){const e=s[0].open,n=s[s.length-1].close;let a=-1/0,l=1/0,c=0;for(const f of s)f.high>a&&(a=f.high),f.low<l&&(l=f.low),c+=f.volume;return{timestamp:t,open:e,high:a,low:l,close:n,volume:c}}const PI=()=>cw(()=>import("./nifty50-klJ-CIEX.js"),[]);function kI(){const[s,t]=nt.useState("local"),[e,n]=nt.useState("2885"),[a,l]=nt.useState("NSE_EQ"),[c,f]=nt.useState("EQUITY"),[m,g]=nt.useState("5"),[y,b]=nt.useState("2021-01-01"),[E,A]=nt.useState("2025-07-25"),[x,R]=nt.useState(!1),[D,B]=nt.useState(null),[Z,rt]=nt.useState(""),[gt,yt]=nt.useState("All"),[xt,N]=nt.useState(!1),[M,O]=nt.useState(null),L=nt.useRef(null),z=nn(ut=>ut.loadCandles),U=nn(ut=>ut.loadRemoteSession),I=nn(ut=>ut.restoreSessionState);nt.useEffect(()=>{function ut(St){L.current&&!L.current.contains(St.target)&&N(!1)}return document.addEventListener("mousedown",ut),()=>document.removeEventListener("mousedown",ut)},[]);const kt=VI(Z,gt),Xt=ut=>{O(ut),n(ut.token),l(ut.exchange),f(ut.instrumentType),rt(""),N(!1)},G=()=>{O(null),rt("")},dt=async ut=>{R(!0),B(null);const St=ut||{dataSource:s,securityId:e,exchangeSegment:a,instrumentType:c,interval:m,fromDate:y,toDate:E};try{if(St.dataSource==="api"){const V=await Bw({securityId:St.securityId,exchangeSegment:St.exchangeSegment,instrument:St.instrument,interval:St.interval,fromDate:St.fromDate,toDate:St.toDate});V.success&&V.data.length>0?z(V.data,`${St.securityId}-${St.exchangeSegment}`,St):B("No data received from API")}else try{const V=await PI(),J=V.default||V;if(!J||!J.t||!J.o||!J.h||!J.l||!J.c||!J.v)throw new Error("Invalid JSON data format: Missing required columns");let mt=IS(J);if(St.fromDate){const Tt=new Date(St.fromDate).getTime()/1e3;mt=mt.filter(Ht=>Ht.timestamp>=Tt)}if(St.toDate){const Tt=new Date(St.toDate).getTime()/1e3+86400;mt=mt.filter(Ht=>Ht.timestamp<Tt)}let pt=1;const ot=St.interval;ot==="5"&&(pt=5),ot==="15"&&(pt=15),ot==="60"&&(pt=60),ot==="1D"&&(pt=1440);const _t=VS(mt,pt);_t.length>0?(console.log(`Loaded ${_t.length} candles (Resampled: ${ot})`),z(_t,`NIFTY 50 (Local ${ot})`,St)):B("No candles generated from local data")}catch(V){console.error(V),B(`Failed to load local file: ${V.message}`)}}catch(V){B(V.message||"Failed to fetch data")}finally{R(!1)}},bt=async()=>{try{const ut=await U();if(ut&&ut.config){const{config:St,data:V}=ut;t(St.dataSource),n(St.securityId),l(St.exchangeSegment),f(St.instrumentType),g(St.interval),b(St.fromDate),A(St.toDate),await dt(St),setTimeout(()=>{I(V.trades,V.position,V.currentIndex)},100)}else B("No saved session found.")}catch(ut){console.error(ut),B("Failed to resume session.")}};return S.jsxs("div",{className:"bg-white border rounded-lg p-6 shadow-sm",children:[S.jsxs("div",{className:"flex items-center justify-between mb-6",children:[S.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[S.jsx(Eb,{size:20}),"Load Data"]}),S.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg gap-1",children:[S.jsxs("button",{onClick:bt,className:"px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 text-blue-700 bg-blue-50 hover:bg-blue-100 transition-all border border-blue-200",title:"Resume last saved session",children:[S.jsx($2,{size:16}),"Resume"]}),S.jsx("div",{className:"w-px bg-gray-300 mx-1 self-center h-6"}),S.jsxs("button",{onClick:()=>t("local"),className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-all ${s==="local"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[S.jsx(iA,{size:16}),"Local"]}),S.jsxs("button",{onClick:()=>t("api"),className:`px-3 py-1.5 text-sm font-medium rounded-md flex items-center gap-2 transition-all ${s==="api"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[S.jsx(W2,{size:16}),"API"]})]})]}),s==="api"?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Symbol"}),S.jsxs("div",{className:"relative",ref:L,children:[S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",value:M?`${M.name} (${M.symbol})`:Z,onChange:ut=>{rt(ut.target.value),N(!0),M&&O(null)},onFocus:()=>N(!0),className:"w-full px-3 py-2 pl-10 pr-10 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search by name, symbol, or token..."}),S.jsx(Eb,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),M&&S.jsx("button",{onClick:G,className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:S.jsx(So,{size:18})})]}),xt&&S.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-96 overflow-hidden",children:[S.jsx("div",{className:"p-2 border-b bg-gray-50 flex gap-1 flex-wrap",children:II.map(ut=>S.jsx("button",{onClick:()=>yt(ut),className:`px-2 py-1 text-xs rounded ${gt===ut?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:ut},ut))}),S.jsx("div",{className:"overflow-y-auto max-h-80",children:kt.length>0?kt.map(ut=>S.jsx("button",{onClick:()=>Xt(ut),className:"w-full px-3 py-2 text-left hover:bg-blue-50 border-b last:border-b-0 transition-colors",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx("div",{className:"font-medium text-sm",children:ut.name}),S.jsxs("div",{className:"text-xs text-gray-500",children:[ut.symbol,"  Token: ",ut.token]})]}),S.jsx("div",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:ut.category})]})},ut.token)):S.jsx("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No symbols found"})})]})]})]}),S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Symbol Token"}),S.jsx("input",{type:"text",value:e,onChange:ut=>n(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 2885 for RELIANCE"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exchange Segment"}),S.jsxs("select",{value:a,onChange:ut=>l(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"NSE_EQ",children:"NSE Equity"}),S.jsx("option",{value:"NSE_FNO",children:"NSE F&O"}),S.jsx("option",{value:"BSE_EQ",children:"BSE Equity"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instrument Type"}),S.jsxs("select",{value:c,onChange:ut=>f(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"EQUITY",children:"Equity"}),S.jsx("option",{value:"INDEX",children:"Index"}),S.jsx("option",{value:"FUTIDX",children:"Index Future"}),S.jsx("option",{value:"FUTSTK",children:"Stock Future"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interval"}),S.jsxs("select",{value:m,onChange:ut=>g(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"1",children:"1 Minute"}),S.jsx("option",{value:"5",children:"5 Minutes"}),S.jsx("option",{value:"15",children:"15 Minutes"}),S.jsx("option",{value:"60",children:"1 Hour"}),S.jsx("option",{value:"1D",children:"1 Day"})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),S.jsx("input",{type:"date",value:y,onChange:ut=>b(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),S.jsx("input",{type:"date",value:E,onChange:ut=>A(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}):S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[S.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Local Data Source"}),S.jsxs("p",{className:"text-blue-800 text-sm",children:["Loading 1-minute data for ",S.jsx("strong",{children:"Nifty 50"})," from local assets. You can select a different timeframe below to resample the data."]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data File"}),S.jsx("div",{className:"w-full px-3 py-2 border rounded bg-gray-100 text-gray-600 cursor-not-allowed",children:"nifty50.json (Nifty 50 Index)"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Timeframe (Resampled)"}),S.jsxs("select",{value:m,onChange:ut=>g(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"1",children:"1 Minute (Original)"}),S.jsx("option",{value:"5",children:"5 Minutes"}),S.jsx("option",{value:"15",children:"15 Minutes"}),S.jsx("option",{value:"60",children:"1 Hour"}),S.jsx("option",{value:"1D",children:"1 Day"})]}),S.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The system will automatically aggregate the 1-minute data into your selected timeframe."})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),S.jsx("input",{type:"date",value:y,onChange:ut=>b(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),S.jsx("input",{type:"date",value:E,onChange:ut=>A(ut.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),D&&S.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:D}),S.jsx("button",{onClick:()=>dt(),disabled:x,className:"mt-4 w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?"Processing...":s==="api"?"Fetch & Load":"Load Local Data"}),s==="api"&&S.jsxs("div",{className:"mt-3 text-xs text-gray-500 space-y-1",children:[S.jsxs("div",{children:[S.jsx("strong",{children:"Available Symbols:"})," Nifty 50, Bank Nifty, Finnifty indices + All Nifty 50 stocks"]}),S.jsxs("div",{className:"text-blue-600",children:["Using Angel One API (FREE)  ",OS.length," symbols available"]})]})]})}function Te(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function ua(s,t){return s.width===t.width&&s.height===t.height}var zI=(function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,n={next:t};return this._observers.push(n),{unsubscribe:function(){e._observers=e._observers.filter(function(a){return a!==n})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s})();function LI(s){return new zI(s)}var jI=(function(){function s(t,e,n){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=Te({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(l){return l}),this._allowResizeObserver=(a=n?.allowResizeObserver)!==null&&a!==void 0?a:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return Te({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=Te(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;ua(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var n=this;this._bitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,n=Te(this._transformBitmapSize(t,this._canvasElementClientSize)),a=ua(this.bitmapSize,n)?null:n;e===null&&a===null||e!==null&&a!==null&&ua(e,a)||(this._suggestedBitmapSize=a,this._emitSuggestedBitmapSizeChanged(e,a))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(a){return a.call(n,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}BI().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=K_(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=LI(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var n=K_(this._canvasElement);if(n!==null){var a=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:n.devicePixelRatio,l=this._canvasElement.getClientRects(),c=l[0]!==void 0?FI(l[0],a):Te({width:this._canvasElementClientSize.width*a,height:this._canvasElementClientSize.height*a});this._suggestNewBitmapSize(c)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var n=e.find(function(c){return c.target===t._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var a=n.devicePixelContentBoxSize[0],l=Te({width:a.inlineSize,height:a.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s})();function UI(s,t){return new jI(s,t.transform,t.options)}function K_(s){return s.ownerDocument.defaultView}function BI(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(n){return"devicePixelContentBoxSize"in n})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function FI(s,t){return Te({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var qI=(function(){function s(t,e,n){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s})();function da(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var n=s.bitmapSize;if(n.width===0||n.height===0)return null;var a=s.canvasElement.getContext("2d",t);return a===null?null:new qI(a,e,n)}const PS={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var $_,X_;function ma(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function kS(s,t,e,n){s.beginPath();const a=s.lineWidth%2?.5:0;s.moveTo(e,t+a),s.lineTo(n,t+a),s.stroke()}function wn(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Hn(s){if(s===void 0)throw new Error("Value is undefined");return s}function ht(s){if(s===null)throw new Error("Value is null");return s}function gr(s){return ht(Hn(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})($_||($_={})),(function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"})(X_||(X_={}));class Ye{constructor(){this.t=[]}i(t,e,n){const a={h:t,l:e,o:n===!0};this.t.push(a)}_(t){const e=this.t.findIndex((n=>t===n.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,n){const a=[...this.t];this.t=this.t.filter((l=>!l.o)),a.forEach((l=>l.h(t,e,n)))}v(){return this.t.length>0}m(){this.t=[]}}function ni(s,...t){for(const e of t)for(const n in e)e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof e[n]!="object"||s[n]===void 0||Array.isArray(e[n])?s[n]=e[n]:ni(s[n],e[n]));return s}function ga(s){return typeof s=="number"&&isFinite(s)}function _u(s){return typeof s=="number"&&s%1==0}function Vu(s){return typeof s=="string"}function mh(s){return typeof s=="boolean"}function Ms(s){const t=s;if(!t||typeof t!="object")return t;let e,n,a;for(n in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(n)&&(a=t[n],e[n]=a&&typeof a=="object"?Ms(a):a);return e}function YI(s){return s!==null}function wu(s){return s===null?void 0:s}const zS="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Eu(s,t,e){return t===void 0&&(t=zS),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class HI{constructor(t){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),n=this.W();return t.P===e&&t.T===n||(t.P=e,t.T=n,t.k=Eu(e,n),t.A=2.5/12*e,t.V=t.A,t.B=e/12*t.C,t.I=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Ym(s){return s<0?0:s>255?255:Math.round(s)||0}function W_(s){return .199*s[0]+.687*s[1]+.114*s[2]}class QI{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if(t==="transparent")return t;const n=this.K(t),a=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${e*a})`}X(t){const e=this.K(t);return{Z:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:W_(e)>160?"black":"white"}}J(t){return W_(this.K(t))}tt(t,e,n){const[a,l,c,f]=this.K(t),[m,g,y,b]=this.K(e),E=[Ym(a+n*(m-a)),Ym(l+n*(g-l)),Ym(c+n*(y-c)),(A=f+n*(b-f),A<=0||A>1?Math.min(Math.max(A,0),1):Math.round(1e4*A)/1e4)];var A;return`rgba(${E[0]}, ${E[1]}, ${E[2]}, ${E[3]})`}K(t){const e=this.q.get(t);if(e)return e;const n=(function(c){const f=document.createElement("div");f.style.display="none",document.body.appendChild(f),f.style.color=c;const m=window.getComputedStyle(f).color;return document.body.removeChild(f),m})(t),a=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!a){if(this.Y.length)for(const c of this.Y){const f=c(t);if(f)return this.q.set(t,f),f}throw new Error(`Failed to parse color: ${t}`)}const l=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),a[4]?parseFloat(a[4]):1];return this.q.set(t,l),l}}class GI{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,n){this.it.forEach((a=>{a.nt(t,e,n)}))}}class Cr{nt(t,e,n){t.useBitmapCoordinateSpace((a=>this.et(a,e,n)))}}class KI extends Cr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const a=this.rt.lt,l=this.rt,c=Math.max(1,Math.floor(e))%2/2,f=m=>{t.beginPath();for(let g=a.to-1;g>=a.from;--g){const y=l.ot[g],b=Math.round(y._t*e)+c,E=y.ut*n,A=m*n+c;t.moveTo(b,E),t.arc(b,E,A,0,2*Math.PI)}t.fill()};l.ct>0&&(t.fillStyle=l.dt,f(l.ft+l.ct)),t.fillStyle=l.vt,f(l.ft)}}function $I(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const XI={from:0,to:1};class WI{constructor(t,e,n){this.Mt=new GI,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.Pt=n,this.Mt.st(this.bt)}yt(t){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const t=this.Pt.Dt();t.length!==this.bt.length&&(this.St=t.map($I),this.bt=this.St.map((e=>{const n=new KI;return n.ht(e),n})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.Vt(),e=this.Pt.Bt(),n=this.Ct.It(),a=this.O.Et();this.kt(),e.forEach(((l,c)=>{const f=this.St[c],m=l.At(n),g=l.zt();!t&&m!==null&&l.Vt()&&g!==null?(f.vt=m.Lt,f.ft=m.ft,f.ct=m.Ot,f.ot[0].gt=m.gt,f.ot[0].ut=l.Ft().Nt(m.gt,g.Wt),f.dt=m.Ht??this.O.Ut(f.ot[0].ut/l.Ft().$t()),f.ot[0].wt=n,f.ot[0]._t=a.qt(n),f.lt=XI):f.lt=null}))}}class JI extends Cr{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.Yt===null)return;const l=this.Yt.jt.Vt,c=this.Yt.Kt.Vt;if(!l&&!c)return;const f=Math.round(this.Yt._t*n),m=Math.round(this.Yt.ut*a);t.lineCap="butt",l&&f>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*n),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,ma(t,this.Yt.jt.Xt),(function(g,y,b,E){g.beginPath();const A=g.lineWidth%2?.5:0;g.moveTo(y+A,b),g.lineTo(y+A,E),g.stroke()})(t,f,0,e.height)),c&&m>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*a),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,ma(t,this.Yt.Kt.Xt),kS(t,m,0,e.width))}}class ZI{constructor(t,e){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new JI(this.Zt),this.Jt=t,this.Pt=e}yt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const t=this.Jt.Vt(),e=this.Pt.Qt().N().crosshair,n=this.Zt;if(e.mode===2)return n.Kt.Vt=!1,void(n.jt.Vt=!1);n.Kt.Vt=t&&this.Jt.ti(this.Pt),n.jt.Vt=t&&this.Jt.ii(),n.Kt.ct=e.horzLine.width,n.Kt.Xt=e.horzLine.style,n.Kt.R=e.horzLine.color,n.jt.ct=e.vertLine.width,n.jt.Xt=e.vertLine.style,n.jt.R=e.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function t4(s,t,e,n,a,l){s.fillRect(t+l,e,n-2*l,l),s.fillRect(t+l,e+a-l,n-2*l,l),s.fillRect(t,e,l,a),s.fillRect(t+n-l,e,l,a)}function Ef(s,t,e,n,a,l){s.save(),s.globalCompositeOperation="copy",s.fillStyle=l,s.fillRect(t,e,n,a),s.restore()}function J_(s,t,e,n,a,l){s.beginPath(),s.roundRect?s.roundRect(t,e,n,a,l):(s.lineTo(t+n-l[1],e),l[1]!==0&&s.arcTo(t+n,e,t+n,e+l[1],l[1]),s.lineTo(t+n,e+a-l[2]),l[2]!==0&&s.arcTo(t+n,e+a,t+n-l[2],e+a,l[2]),s.lineTo(t+l[3],e+a),l[3]!==0&&s.arcTo(t,e+a,t,e+a-l[3],l[3]),s.lineTo(t,e+l[0]),l[0]!==0&&s.arcTo(t,e,t+l[0],e,l[0]))}function Z_(s,t,e,n,a,l,c=0,f=[0,0,0,0],m=""){if(s.save(),!c||!m||m===l)return J_(s,t,e,n,a,f),s.fillStyle=l,s.fill(),void s.restore();const g=c/2;var y;J_(s,t+g,e+g,n-c,a-c,(y=-g,f.map((b=>b===0?b:b+y)))),l!=="transparent"&&(s.fillStyle=l,s.fill()),m!=="transparent"&&(s.lineWidth=c,s.strokeStyle=m,s.closePath(),s.stroke()),s.restore()}function LS(s,t,e,n,a,l,c){s.save(),s.globalCompositeOperation="copy";const f=s.createLinearGradient(0,0,0,a);f.addColorStop(0,l),f.addColorStop(1,c),s.fillStyle=f,s.fillRect(t,e,n,a),s.restore()}class t1{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.P+t.A+t.V:0}nt(t,e,n,a){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const l=this.Yt.R,c=this.ei.Z,f=t.useBitmapCoordinateSpace((m=>{const g=m.context;g.font=e.k;const y=this.hi(m,e,n,a),b=y.ai;return y.li?Z_(g,b.oi,b._i,b.ui,b.ci,c,b.di,[b.ft,0,0,b.ft],c):Z_(g,b.fi,b._i,b.ui,b.ci,c,b.di,[0,b.ft,b.ft,0],c),this.Yt.pi&&(g.fillStyle=l,g.fillRect(b.fi,b.mi,b.wi-b.fi,b.gi)),this.Yt.Mi&&(g.fillStyle=e.D,g.fillRect(y.li?b.bi-b.di:0,b._i,b.di,b.Si-b._i)),y}));t.useMediaCoordinateSpace((({context:m})=>{const g=f.xi;m.font=e.k,m.textAlign=f.li?"right":"left",m.textBaseline="middle",m.fillStyle=l,m.fillText(this.Yt.ri,g.Ci,(g._i+g.Si)/2+g.Pi)}))}hi(t,e,n,a){const{context:l,bitmapSize:c,mediaSize:f,horizontalPixelRatio:m,verticalPixelRatio:g}=t,y=this.Yt.pi||!this.Yt.yi?e.C:0,b=this.Yt.ki?e.S:0,E=e.A+this.ei.Ti,A=e.V+this.ei.Ri,x=e.B,R=e.I,D=this.Yt.ri,B=e.P,Z=n.Di(l,D),rt=Math.ceil(n.Vi(l,D)),gt=B+E+A,yt=e.S+x+R+rt+y,xt=Math.max(1,Math.floor(g));let N=Math.round(gt*g);N%2!=xt%2&&(N+=1);const M=b>0?Math.max(1,Math.floor(b*m)):0,O=Math.round(yt*m),L=Math.round(y*m),z=this.ei.Bi??this.ei.Ii,U=Math.round(z*g)-Math.floor(.5*g),I=Math.floor(U+xt/2-N/2),kt=I+N,Xt=a==="right",G=Xt?f.width-b:b,dt=Xt?c.width-M:M;let bt,ut,St;return Xt?(bt=dt-O,ut=dt-L,St=G-y-x-b):(bt=dt+O,ut=dt+L,St=G+y+x),{li:Xt,ai:{_i:I,mi:U,Si:kt,ui:O,ci:N,ft:2*m,di:M,oi:bt,fi:dt,wi:ut,gi:xt,bi:c.width},xi:{_i:I/g,Si:kt/g,Ci:St,Pi:Z}}}}class Sf{constructor(t){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(t||t1)(this.Ai,this.Ei),this.Oi=new(t||t1)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Fi(){return this.Ei.Bi||0}Wi(t){this.Ei.Bi=t}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(t){return this.Ni(),this.Ai.pi=this.Ai.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class e4 extends Sf{constructor(t,e,n){super(),this.Jt=t,this.Yi=e,this.ji=n}qi(t,e,n){if(t.Vt=!1,this.Jt.N().mode===2)return;const a=this.Jt.N().horzLine;if(!a.labelVisible)return;const l=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||l===null)return;const c=this.Yi.Xi().X(a.labelBackgroundColor);n.Z=c.Z,t.R=c.G;const f=2/12*this.Yi.P();n.Ti=f,n.Ri=f;const m=this.ji(this.Yi);n.Ii=m.Ii,t.ri=this.Yi.Zi(m.gt,l),t.Vt=!0}}const n4=/[1-9]/g;class jS{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const n=t.useMediaCoordinateSpace((({context:E})=>(E.font=e.k,Math.round(e.Gi.Vi(E,ht(this.Yt).ri,n4)))));if(n<=0)return;const a=e.Ji,l=n+2*a,c=l/2,f=this.Yt.Qi;let m=this.Yt.Ii,g=Math.floor(m-c)+.5;g<0?(m+=Math.abs(0-g),g=Math.floor(m-c)+.5):g+l>f&&(m-=Math.abs(f-(g+l)),g=Math.floor(m-c)+.5);const y=g+l,b=Math.ceil(0+e.S+e.C+e.A+e.P+e.V);t.useBitmapCoordinateSpace((({context:E,horizontalPixelRatio:A,verticalPixelRatio:x})=>{const R=ht(this.Yt);E.fillStyle=R.Z;const D=Math.round(g*A),B=Math.round(0*x),Z=Math.round(y*A),rt=Math.round(b*x),gt=Math.round(2*A);if(E.beginPath(),E.moveTo(D,B),E.lineTo(D,rt-gt),E.arcTo(D,rt,D+gt,rt,gt),E.lineTo(Z-gt,rt),E.arcTo(Z,rt,Z,rt-gt,gt),E.lineTo(Z,B),E.fill(),R.pi){const yt=Math.round(R.Ii*A),xt=B,N=Math.round((xt+e.C)*x);E.fillStyle=R.R;const M=Math.max(1,Math.floor(A)),O=Math.floor(.5*A);E.fillRect(yt-O,xt,M,N-xt)}})),t.useMediaCoordinateSpace((({context:E})=>{const A=ht(this.Yt),x=0+e.S+e.C+e.A+e.P/2;E.font=e.k,E.textAlign="left",E.textBaseline="middle",E.fillStyle=A.R;const R=e.Gi.Di(E,"Apr0");E.translate(g+a,x+R),E.fillText(A.ri,0,0)}))}}class i4{constructor(t,e,n){this.xt=!0,this.Gt=new jS,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=n}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const t=this.Zt;if(t.Vt=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const n=this.ts.Et();if(n.Ki())return;t.Qi=n.Qi();const a=this.ji();if(a===null)return;t.Ii=a.Ii;const l=n.ss(this.Ct.It());t.ri=n.ns(ht(l)),t.Vt=!0;const c=this.ts.Xi().X(e.labelBackgroundColor);t.Z=c.Z,t.R=c.G,t.pi=n.N().ticksVisible}}class US{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Ft(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}}var e1;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden",s[s.MagnetOHLC=3]="MagnetOHLC"})(e1||(e1={}));class s4 extends US{constructor(t,e){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.Ps=e,this.ys=((a,l)=>c=>{const f=l(),m=a();if(c===ht(this.Pt).ks())return{gt:m,Ii:f};{const g=ht(c.zt());return{gt:c.Ts(f,g),Ii:f}}})((()=>this.ds),(()=>this.Ss));const n=((a,l)=>()=>{const c=this.ts.Et().Rs(a()),f=l();return c&&Number.isFinite(f)?{wt:c,Ii:f}:null})((()=>this.fs),(()=>this.si()));this.Ds=new i4(this,t,n)}N(){return this.Ps}Vs(t,e){this.xs=t,this.Cs=e}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(t,e,n){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,n)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(t){let e=this.gs.get(t);e||(e=new ZI(this,t),this.gs.set(t,e));let n=this.Ms.get(t);return n||(n=new WI(this.ts,this,t),this.Ms.set(t,n)),[e,n]}ti(t){return t===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(t,e){this.ps&&this.Pt===t||this.vs.clear();const n=[];return this.Pt===t&&n.push(this.Hs(this.vs,e,this.ys)),n}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach((t=>{this.gs.get(t)?.yt(),this.Ms.get(t)?.yt()})),this.vs.forEach((t=>t.yt())),this.Ds.yt()}qs(t){return t&&!t.ks().Ki()?t.ks():null}zs(t,e,n){this.Ys(t,e,n)&&this.Ns()}Ys(t,e,n){const a=this.bs,l=this.Ss,c=this.ds,f=this.fs,m=this.Pt,g=this.qs(n);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.Et().qt(t),this.Pt=n;const y=g!==null?g.zt():null;return g!==null&&y!==null?(this.ds=e,this.Ss=g.Nt(e,y)):(this.ds=NaN,this.Ss=NaN),a!==this.bs||l!==this.Ss||f!==this.fs||c!==this.ds||m!==this.Pt}Os(){const t=this.ts.js().map((n=>n.Xs().Ks())).filter(YI),e=t.length===0?null:Math.max(...t);this.fs=e!==null?e:NaN}Hs(t,e,n){let a=t.get(e);return a===void 0&&(a=new e4(this,e,n),t.set(e,a)),a}}function Tf(s){return s==="left"||s==="right"}class bn{constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,e){const n=(function(a,l){return a===void 0?l:{tn:Math.max(a.tn,l.tn),sn:a.sn||l.sn}})(this.Zs.get(t),e);this.Zs.set(t,n)}nn(){return this.Js}en(t){const e=this.Zs.get(t);return e===void 0?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Wt:t}]}_n(t){this.un(),this.Gs.push({an:5,Wt:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Wt:t})}fn(t){this.hn(),this.Gs.push({an:3,Wt:t})}pn(){return this.Gs}vn(t){for(const e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach(((e,n)=>{this.Qs(n,e)}))}static wn(){return new bn(2)}static gn(){return new bn(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Wt);break;case 2:this.dn(t.Wt);break;case 3:this.fn(t.Wt);break;case 4:this.cn();break;case 5:this._n(t.Wt);break;case 6:this.un()}}un(){const t=this.Gs.findIndex((e=>e.an===5));t!==-1&&this.Gs.splice(t,1)}}class BS{formatTickmarks(t){return t.map((e=>this.format(e)))}}const n1=".";function Ns(s,t){if(!ga(s))return"n/a";if(!_u(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class xf extends BS{constructor(t,e){if(super(),e||(e=1),ga(t)&&_u(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){const e=this.Yi/this.Mn;let n=Math.floor(t),a="";const l=this.xn!==void 0?this.xn:NaN;if(e>1){let c=+(Math.round(t*e)-n*e).toFixed(this.xn);c>=e&&(c-=e,n+=1),a=n1+Ns(+c.toFixed(this.xn)*this.Mn,l)}else n=Math.round(n*e)/e,l>0&&(a=n1+Ns(0,l));return n.toFixed(0)+a}}class FS extends xf{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class r4 extends BS{constructor(t){super(),this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.Pn(t):t<999995?e+this.Pn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.Pn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.Pn(t/1e9)+"B")}Pn(t){let e;const n=Math.pow(10,this.Cn);return e=(t=Math.round(t*n)/n)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((a,l)=>l))}}const a4=/[2-9]/g;class Su{constructor(t=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(t,e,n){return this.In(t,e,n).width}Di(t,e,n){const a=this.In(t,e,n);return((a.actualBoundingBoxAscent||0)-(a.actualBoundingBoxDescent||0))/2}In(t,e,n){const a=n||a4,l=String(e).replace(a,"0");if(this.Dn.has(l))return Hn(this.Dn.get(l)).En;if(this.yn===this.Vn){const f=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(f),this.Tn++,this.yn--}t.save(),t.textBaseline="middle";const c=t.measureText(l);return t.restore(),c.width===0&&e.length||(this.Dn.set(l,{En:c,An:this.kn}),this.Rn[this.kn]=l,this.yn++,this.kn++),c}}class o4{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,n){this.zn=t,this.M=e,this.Ln=n}nt(t){this.M!==null&&this.zn!==null&&this.zn.nt(t,this.M,this.On,this.Ln)}}class qS{constructor(t,e,n){this.Fn=t,this.On=new Su(50),this.Wn=e,this.O=n,this.F=-1,this.Gt=new o4(this.On)}Tt(){const t=this.O.Hn(this.Wn);if(t===null)return null;const e=t.Un(this.Wn)?t.$n():this.Wn.Ft();if(e===null)return null;const n=t.qn(e);if(n==="overlay")return null;const a=this.O.Yn();return a.P!==this.F&&(this.F=a.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),a,n),this.Gt}}class l4 extends Cr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){if(!this.Yt?.Vt)return null;const{ut:n,ct:a,Kn:l}=this.Yt;return e>=n-a-7&&e<=n+a+7?{Xn:this.Yt,Kn:l}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.Yt===null||this.Yt.Vt===!1)return;const l=Math.round(this.Yt.ut*a);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*n),ma(t,this.Yt.Xt),kS(t,l,0,e.width))}}class Mp{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new l4,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class u4 extends Mp{constructor(t){super(t)}te(){this.Zn.Vt=!1;const t=this.Jn.Ft(),e=t.ie().ie;if(e!==2&&e!==3)return;const n=this.Jn.N();if(!n.baseLineVisible||!this.Jn.Vt())return;const a=this.Jn.zt();a!==null&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(a.Wt,a.Wt),this.Zn.R=n.baseLineColor,this.Zn.ct=n.baseLineWidth,this.Zn.Xt=n.baseLineStyle)}}class c4 extends Cr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){const a=this.Yt;if(a===null)return;const l=Math.max(1,Math.floor(e)),c=l%2/2,f=Math.round(a.ne.x*e)+c,m=a.ne.y*n;t.fillStyle=a.ee,t.beginPath();const g=Math.max(2,1.5*a.re)*e;t.arc(f,m,g,0,2*Math.PI,!1),t.fill(),t.fillStyle=a.he,t.beginPath(),t.arc(f,m,a.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=a.ae,t.beginPath(),t.arc(f,m,a.ft*e+l/2,0,2*Math.PI,!1),t.stroke()}}const h4=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class f4{constructor(t){this.Gt=new c4,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const t=this.ge.Qt().Et(),e=t.Pe(),n=this.ge.zt();if(e===null||n===null)return;const a=this.ge.ye(!0);if(a.ke||!e.Te(a.Re))return;const l={x:t.qt(a.Re),y:this.ge.Ft().Nt(a.gt,n.Wt)},c=a.R,f=this.ge.N().lineWidth,m=this.De(this.Ve(),c);this.Gt.ht({ee:c,re:f,he:m.he,ae:m.ae,ft:m.ft,ne:l})}Ce(){const t=this.Gt.se();if(t!==null){const e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(t,e,n,a){const l=n+(a-n)*e;return this.ge.Qt().Xi().j(t,l)}De(t,e){const n=t%2600/2600;let a;for(const g of h4)if(n>=g.le&&n<=g.oe){a=g;break}wn(a!==void 0,"Last price animation internal logic error");const l=(n-a.le)/(a.oe-a.le);return{he:this.Be(e,l,a.ce,a.de),ae:this.Be(e,l,a.fe,a.pe),ft:(c=l,f=a._e,m=a.ue,f+(m-f)*c)};var c,f,m}}class d4 extends Mp{constructor(t){super(t)}te(){const t=this.Zn;t.Vt=!1;const e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;const n=this.Jn.ye(e.priceLineSource===0);n.ke||(t.Vt=!0,t.ut=n.Ii,t.R=this.Jn.Ie(n.R),t.ct=e.priceLineWidth,t.Xt=e.priceLineStyle)}}class m4 extends Sf{constructor(t){super(),this.Jt=t}qi(t,e,n){t.Vt=!1,e.Vt=!1;const a=this.Jt;if(!a.Vt())return;const l=a.N(),c=l.lastValueVisible,f=a.Ee()!=="",m=l.seriesLastValueMode===0,g=a.ye(!1);if(g.ke)return;c&&(t.ri=this.Ae(g,c,m),t.Vt=t.ri.length!==0),(f||m)&&(e.ri=this.ze(g,c,f,m),e.Vt=e.ri.length>0);const y=a.Ie(g.R),b=this.Jt.Qt().Xi().X(y);n.Z=b.Z,n.Ii=g.Ii,e.Ht=a.Qt().Ut(g.Ii/a.Ft().$t()),t.Ht=y,t.R=b.G,e.R=b.G}ze(t,e,n,a){let l="";const c=this.Jt.Ee();return n&&c.length!==0&&(l+=`${c} `),e&&a&&(l+=this.Jt.Ft().Le()?t.Oe:t.Ne),l.trim()}Ae(t,e,n){return e?n?this.Jt.Ft().Le()?t.Ne:t.Oe:t.ri:""}}function i1(s,t,e,n){const a=Number.isFinite(t),l=Number.isFinite(e);return a&&l?s(t,e):a||l?a?t:e:n}class In{constructor(t,e){this.Fe=t,this.We=e}He(t){return t!==null&&this.Fe===t.Fe&&this.We===t.We}Ue(){return new In(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(t){return t===null?this:new In(i1(Math.min,this.$e(),t.$e(),-1/0),i1(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!ga(t)||this.We-this.Fe===0)return;const e=.5*(this.We+this.Fe);let n=this.We-e,a=this.Fe-e;n*=t,a*=t,this.We=e+n,this.Fe=e+a}Ke(t){ga(t)&&(this.We+=t,this.Fe+=t)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(t){return t===null?null:new In(t.minValue,t.maxValue)}}class Jh{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return t===null?null:new Jh(In.Ze(t.priceRange),t.margins)}}class g4 extends Mp{constructor(t,e){super(t),this.ir=e}te(){const t=this.Zn;t.Vt=!1;const e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;const n=this.ir.sr();n!==null&&(t.Vt=!0,t.ut=n,t.R=e.color,t.ct=e.lineWidth,t.Xt=e.lineStyle,t.Kn=this.ir.N().id)}}class p4 extends Sf{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,n){t.Vt=!1,e.Vt=!1;const a=this.ir.N(),l=a.axisLabelVisible,c=a.title!=="",f=this.ge;if(!l||!f.Vt())return;const m=this.ir.sr();if(m===null)return;c&&(e.ri=a.title,e.Vt=!0),e.Ht=f.Qt().Ut(m/f.Ft().$t()),t.ri=this.nr(a.price),t.Vt=!0;const g=this.ge.Qt().Xi().X(a.axisLabelColor||a.color);n.Z=g.Z;const y=a.axisLabelTextColor||g.G;t.R=y,e.R=y,n.Ii=m}nr(t){const e=this.ge.zt();return e===null?"":this.ge.Ft().Zi(t,e.Wt)}}class y4{constructor(t,e){this.ge=t,this.Ps=e,this.er=new g4(t,this),this.Fn=new p4(t,this),this.rr=new qS(this.Fn,t,t.Qt())}hr(t){ni(this.Ps,t),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const t=this.ge,e=t.Ft();if(t.Qt().Et().Ki()||e.Ki())return null;const n=t.zt();return n===null?null:e.Nt(this.Ps.price,n.Wt)}}class v4 extends US{constructor(t){super(),this.ts=t}Qt(){return this.ts}}const b4={Bar:(s,t,e,n)=>{const a=t.upColor,l=t.downColor,c=ht(s(e,n)),f=gr(c.Wt[0])<=gr(c.Wt[3]);return{cr:c.R??(f?a:l)}},Candlestick:(s,t,e,n)=>{const a=t.upColor,l=t.downColor,c=t.borderUpColor,f=t.borderDownColor,m=t.wickUpColor,g=t.wickDownColor,y=ht(s(e,n)),b=gr(y.Wt[0])<=gr(y.Wt[3]);return{cr:y.R??(b?a:l),dr:y.Ht??(b?c:f),pr:y.vr??(b?m:g)}},Custom:(s,t,e,n)=>({cr:ht(s(e,n)).R??t.color}),Area:(s,t,e,n)=>{const a=ht(s(e,n));return{cr:a.vt??t.lineColor,vt:a.vt??t.lineColor,mr:a.mr??t.topColor,wr:a.wr??t.bottomColor}},Baseline:(s,t,e,n)=>{const a=ht(s(e,n));return{cr:a.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:a.gr??t.topLineColor,Mr:a.Mr??t.bottomLineColor,br:a.br??t.topFillColor1,Sr:a.Sr??t.topFillColor2,Cr:a.Cr??t.bottomFillColor1,Pr:a.Pr??t.bottomFillColor2}},Line:(s,t,e,n)=>{const a=ht(s(e,n));return{cr:a.R??t.color,vt:a.R??t.color}},Histogram:(s,t,e,n)=>({cr:ht(s(e,n)).R??t.color})};class _4{constructor(t){this.yr=(e,n)=>n!==void 0?n.Wt:this.ge.Xs().kr(e),this.ge=t,this.Tr=b4[t.Rr()]}Dr(t,e){return this.Tr(this.yr,this.ge.N(),t,e)}}function YS(s,t,e,n,a=0,l=t.length){let c=l-a;for(;0<c;){const f=c>>1,m=a+f;n(t[m],e)===s?(a=m+1,c-=f+1):c=f}return a}const Do=YS.bind(null,!0),HS=YS.bind(null,!1);var s1;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(s1||(s1={}));const fr=30;class w4{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(t){return this.Nr(t,0)!==null}kr(t){return this.Fr(t)}Fr(t,e=0){const n=this.Nr(t,e);return n===null?null:{...this.Wr(n),Re:this.Or(n)}}Hr(){return this.Vr}Ur(t,e,n){if(this.Ki())return null;let a=null;for(const l of n)a=gh(a,this.$r(t,e,l));return a}ht(t){this.Ir.clear(),this.Br.clear(),this.Vr=t,this.Er=t.map((e=>e.Re))}qr(){return this.Er}Or(t){return this.Vr[t].Re}Wr(t){return this.Vr[t]}Nr(t,e){const n=this.Yr(t);if(n===null&&e!==0)switch(e){case-1:return this.jr(t);case 1:return this.Kr(t);default:throw new TypeError("Unknown search mode")}return n}jr(t){let e=this.Xr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Kr(t){const e=this.Zr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){const e=this.Xr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Xr(t){return Do(this.Vr,t,((e,n)=>e.Re<n))}Zr(t){return HS(this.Vr,t,((e,n)=>e.Re>n))}Gr(t,e,n){let a=null;for(let l=t;l<e;l++){const c=this.Vr[l].Wt[n];Number.isNaN(c)||(a===null?a={Jr:c,Qr:c}:(c<a.Jr&&(a.Jr=c),c>a.Qr&&(a.Qr=c)))}return a}$r(t,e,n){if(this.Ki())return null;let a=null;const l=ht(this.Lr()),c=ht(this.Ks()),f=Math.max(t,l),m=Math.min(e,c),g=Math.ceil(f/fr)*fr,y=Math.max(g,Math.floor(m/fr)*fr);{const E=this.Xr(f),A=this.Zr(Math.min(m,g,e));a=gh(a,this.Gr(E,A,n))}let b=this.Br.get(n);b===void 0&&(b=new Map,this.Br.set(n,b));for(let E=Math.max(g+1,f);E<y;E+=fr){const A=Math.floor(E/fr);let x=b.get(A);if(x===void 0){const R=this.Xr(A*fr),D=this.Zr((A+1)*fr-1);x=this.Gr(R,D,n),b.set(A,x)}a=gh(a,x)}{const E=this.Xr(y),A=this.Zr(m);a=gh(a,this.Gr(E,A,n))}return a}}function gh(s,t){return s===null?t:t===null?s:{Jr:Math.min(s.Jr,t.Jr),Qr:Math.max(s.Qr,t.Qr)}}const Zh={setLineStyle:ma};class E4{constructor(t){this.th=t}nt(t,e,n){this.th.draw(t,Zh)}ih(t,e,n){this.th.drawBackground?.(t,Zh)}}class S4{constructor(t){this.Dn=null,this.sh=t}Tt(){const t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;const e=new E4(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}}class QS{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){const t=this.ah.paneViews?.()??[];if(this.hh?.nh===t)return this.hh.eh;const e=t.map((n=>new S4(n)));return this.hh={nh:t,eh:e},e}jn(t,e){return this.ah.hitTest?.(t,e)??null}}let T4=class extends QS{us(){return[]}};class x4{constructor(t){this.th=t}nt(t,e,n){this.th.draw(t,Zh)}ih(t,e,n){this.th.drawBackground?.(t,Zh)}}class r1{constructor(t){this.Dn=null,this.sh=t}Tt(){const t=this.sh.renderer();if(t===null)return null;if(this.Dn?.nh===t)return this.Dn.eh;const e=new x4(t);return this.Dn={nh:t,eh:e},e}rh(){return this.sh.zOrder?.()??"normal"}}function GS(s){return{ri:s.text(),Ii:s.coordinate(),Bi:s.fixedCoordinate?.(),R:s.textColor(),Z:s.backColor(),Vt:s.visible?.()??!0,pi:s.tickVisible?.()??!0}}class A4{constructor(t,e){this.Gt=new jS,this._h=t,this.uh=e}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...GS(this._h)}),this.Gt}}class C4 extends Sf{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,n){const a=GS(this._h);n.Z=a.Z,t.R=a.R;const l=2/12*this.Yi.P();n.Ti=l,n.Ri=l,n.Ii=a.Ii,n.Bi=a.Bi,t.ri=a.ri,t.Vt=a.Vt,t.pi=a.pi}}class R4 extends QS{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){const t=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===t)return this.dh.eh;const e=this.ge.Qt().Et(),n=t.map((a=>new A4(a,e)));return this.dh={nh:t,eh:n},n}Ws(){const t=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===t)return this.fh.eh;const e=this.ge.Ft(),n=t.map((a=>new C4(a,e)));return this.fh={nh:t,eh:n},n}wh(){const t=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===t)return this.ph.eh;const e=t.map((n=>new r1(n)));return this.ph={nh:t,eh:e},e}gh(){const t=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===t)return this.mh.eh;const e=t.map((n=>new r1(n)));return this.mh={nh:t,eh:e},e}Mh(t,e){return this.ah.autoscaleInfo?.(t,e)??null}}function Hm(s,t,e,n){s.forEach((a=>{t(a).forEach((l=>{l.rh()===e&&n.push(l)}))}))}function Qm(s){return s.Fs()}function M4(s){return s.wh()}function N4(s){return s.gh()}const D4=["Area","Line","Baseline"];class Af extends v4{constructor(t,e,n,a,l){super(t),this.Yt=new w4,this.er=new d4(this),this.bh=[],this.Sh=new u4(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=n,this.kh=e;const c=new m4(this);this.vs=[c],this.rr=new qS(c,this,t),D4.includes(this.kh)&&(this.xh=new f4(this)),this.Th(),this.sh=a(this,this.Qt(),l)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(t){return this.Ps.priceLineColor||t}ye(t){const e={ke:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return e;const a=this.Qt().Et().Pe(),l=this.zt();if(a===null||l===null)return e;let c,f;if(t){const b=this.Yt.Ar();if(b===null)return e;c=b,f=b.Re}else{const b=this.Yt.Fr(a.bi(),-1);if(b===null||(c=this.Yt.kr(b.Re),c===null))return e;f=b.Re}const m=c.Wt[3],g=this.Rh().Dr(f,{Wt:c}),y=n.Nt(m,l.Wt);return{ke:!1,gt:m,ri:n.Zi(m,l.Wt),Oe:n.Dh(m),Ne:n.Vh(m,l.Wt),R:g.cr,Ii:y,Re:f}}Rh(){return this.Ch!==null||(this.Ch=new _4(this)),this.Ch}N(){return this.Ps}hr(t){const e=t.priceScaleId;e!==void 0&&e!==this.Ps.priceScaleId&&this.Qt().Bh(this,e),ni(this.Ps,t),t.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(t,e){this.Yt.ht(t),this.sh.yt("data"),this.xh!==null&&(e&&e.zh?this.xh.be():t.length===0&&this.xh.Me());const n=this.Qt().Hn(this);this.Qt().Lh(n),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(t){const e=new y4(this,t);return this.bh.push(e),this.Qt().Eh(this),e}Nh(t){const e=this.bh.indexOf(t);e!==-1&&this.bh.splice(e,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const t=this.Wh();return t===null?null:{Wt:t.Wt[3],Hh:t.wt}}Wh(){const t=this.Qt().Et().Pe();if(t===null)return null;const e=t.Uh();return this.Yt.Fr(e,1)}Xs(){return this.Yt}$h(t){const e=this.Yt.kr(t);return e===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3]}:e.Wt[3]}Xh(t){const e=[];Hm(this.yh,Qm,"top",e);const n=this.xh;return n!==null&&n.Vt()&&(this.Ph===null&&n.xe()&&(this.Ph=setTimeout((()=>{this.Ph=null,this.Qt().Zh()}),0)),n.Se(),e.unshift(n)),e}Fs(){const t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);const e=this.bh.map((n=>n.lr()));return t.push(...e),Hm(this.yh,Qm,"normal",t),t}Jh(){return this.Qh(Qm,"bottom")}ta(t){return this.Qh(M4,t)}ia(t){return this.Qh(N4,t)}sa(t,e){return this.yh.map((n=>n.jn(t,e))).filter((n=>n!==null))}us(){return[this.rr,...this.bh.map((t=>t._r()))]}Ws(t,e){if(e!==this.es&&!this.Gh())return[];const n=[...this.vs];for(const a of this.bh)n.push(a.ur());return this.yh.forEach((a=>{n.push(...a.Ws())})),n}cs(){const t=[];return this.yh.forEach((e=>{t.push(...e.cs())})),t}Mh(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider((()=>{const a=this.na(t,e);return a===null?null:a.Xe()}));return Jh.Ze(n)}return this.na(t,e)}nh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}ea(){return this.ra}Ns(){this.sh.yt();for(const t of this.vs)t.yt();for(const t of this.bh)t.yt();this.er.yt(),this.Sh.yt(),this.xh?.yt(),this.yh.forEach((t=>t.Ns()))}Ft(){return ht(super.Ft())}At(t){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.Yt.kr(t);return e===null?null:{gt:e.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(t)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(t){this.yh.push(new R4(t,this))}ua(t){this.yh=this.yh.filter((e=>e.oh()!==t))}ca(){if(this.kh==="Custom")return t=>this.sh.da(t)}fa(){if(this.kh==="Custom")return t=>this.sh.pa(t)}va(){return this.Yt.qr()}Gh(){return!Tf(this.Ft().ma())}na(t,e){if(!_u(t)||!_u(e)||this.Yt.Ki())return null;const n=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],a=this.Yt.Ur(t,e,n);let l=a!==null?new In(a.Jr,a.Qr):null,c=null;if(this.Rr()==="Histogram"){const f=this.Ps.base,m=new In(f,f);l=l!==null?l.vn(m):m}return this.yh.forEach((f=>{const m=f.Mh(t,e);if(m?.priceRange){const g=new In(m.priceRange.minValue,m.priceRange.maxValue);l=l!==null?l.vn(g):g}m?.margins&&(c=m.margins)})),new Jh(l,c)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(t){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Rh().Dr(t).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.ra={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.ra=new r4(this.Ps.priceFormat.precision);break;case"percent":this.ra=new FS(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new xf(t,this.Ps.priceFormat.minMove*t)}}this.es!==null&&this.es.wa()}Qh(t,e){const n=[];return Hm(this.yh,t,e,n),n}}const O4=[3],I4=[0,1,2,3];class V4{constructor(t){this.Ps=t}ga(t,e,n){let a=t;if(this.Ps.mode===0)return a;const l=n.ks(),c=l.zt();if(c===null)return a;const f=l.Nt(t,c),m=n.Ma().filter((y=>y instanceof Af)).reduce(((y,b)=>{if(n.Un(b)||!b.Vt())return y;const E=b.Ft(),A=b.Xs();if(E.Ki()||!A.Te(e))return y;const x=A.kr(e);if(x===null)return y;const R=gr(b.zt()),D=this.Ps.mode===3?I4:O4;return y.concat(D.map((B=>E.Nt(x.Wt[B],R.Wt))))}),[]);if(m.length===0)return a;m.sort(((y,b)=>Math.abs(y-f)-Math.abs(b-f)));const g=m[0];return a=l.Ts(g,c),a}}function su(s,t,e){return Math.min(Math.max(s,t),e)}function ph(s,t,e){return t-s<=e}function Np(s){const t=Math.ceil(s);return t%2==0?t-1:t}class P4 extends Cr{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(this.Yt===null)return;const l=Math.max(1,Math.floor(n));t.lineWidth=l,(function(c,f){c.save(),c.lineWidth%2&&c.translate(.5,.5),f(),c.restore()})(t,(()=>{const c=ht(this.Yt);if(c.ba){t.strokeStyle=c.Sa,ma(t,c.xa),t.beginPath();for(const f of c.Ca){const m=Math.round(f.Pa*n);t.moveTo(m,-l),t.lineTo(m,e.height+l)}t.stroke()}if(c.ya){t.strokeStyle=c.ka,ma(t,c.Ta),t.beginPath();for(const f of c.Ra){const m=Math.round(f.Pa*a);t.moveTo(-l,m),t.lineTo(e.width+l,m)}t.stroke()}}))}}class k4{constructor(t){this.Gt=new P4,this.xt=!0,this.Pt=t}yt(){this.xt=!0}Tt(){if(this.xt){const t=this.Pt.Qt().N().grid,e={ya:t.horzLines.visible,ba:t.vertLines.visible,ka:t.horzLines.color,Sa:t.vertLines.color,Ta:t.horzLines.style,xa:t.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map((n=>({Pa:n.coord})))};this.Gt.ht(e),this.xt=!1}return this.Gt}}class z4{constructor(t){this.sh=new k4(t)}lr(){return this.sh}}const Gm={Va:4,Ba:1e-4};function po(s,t){const e=100*(s-t)/t;return t<0?-e:e}function L4(s,t){const e=po(s.$e(),t),n=po(s.qe(),t);return new In(e,n)}function ru(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function j4(s,t){const e=ru(s.$e(),t),n=ru(s.qe(),t);return new In(e,n)}function tf(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const n=Math.log10(e+t.Ba)+t.Va;return s<0?-n:n}function au(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const n=Math.pow(10,e-t.Va)-t.Ba;return s<0?-n:n}function Yl(s,t){if(s===null)return null;const e=tf(s.$e(),t),n=tf(s.qe(),t);return new In(e,n)}function yo(s,t){if(s===null)return null;const e=au(s.$e(),t),n=au(s.qe(),t);return new In(e,n)}function Km(s){if(s===null)return Gm;const t=Math.abs(s.qe()-s.$e());if(t>=1||t<1e-15)return Gm;const e=Math.ceil(Math.abs(Math.log10(t))),n=Gm.Va+e;return{Va:n,Ba:1/Math.pow(10,n)}}class $m{constructor(t,e){if(this.Ia=t,this.Ea=e,(function(n){if(n<0)return!1;if(n>1e18)return!0;for(let a=n;a>1;a/=10)if(a%10!=0)return!1;return!0})(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let n=this.Ia;n!==1;){if(n%2==0)this.Aa.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),n/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(t,e,n){const a=this.Ia===0?0:1/this.Ia;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),c=0,f=this.Ea[0];for(;;){const b=ph(l,a,1e-14)&&l>a+1e-14,E=ph(l,n*f,1e-14),A=ph(l,1,1e-14);if(!(b&&E&&A))break;l/=f,f=this.Ea[++c%this.Ea.length]}if(l<=a+1e-14&&(l=a),l=Math.max(1,l),this.Aa.length>0&&(m=l,g=1,y=1e-14,Math.abs(m-g)<y))for(c=0,f=this.Aa[0];ph(l,n*f,1e-14)&&l>a+1e-14;)l/=f,f=this.Aa[++c%this.Aa.length];var m,g,y;return l}}class a1{constructor(t,e,n,a){this.La=[],this.Yi=t,this.Ia=e,this.Oa=n,this.Na=a}za(t,e){if(t<e)throw new Error("high < low");const n=this.Yi.$t(),a=(t-e)*this.Fa()/n,l=new $m(this.Ia,[2,2.5,2]),c=new $m(this.Ia,[2,2,2.5]),f=new $m(this.Ia,[2.5,2,2]),m=[];return m.push(l.za(t,e,a),c.za(t,e,a),f.za(t,e,a)),(function(g){if(g.length<1)throw Error("array is empty");let y=g[0];for(let b=1;b<g.length;++b)g[b]<y&&(y=g[b]);return y})(m)}Wa(){const t=this.Yi,e=t.zt();if(e===null)return void(this.La=[]);const n=t.$t(),a=this.Oa(n-1,e),l=this.Oa(0,e),c=this.Yi.N().entireTextOnly?this.Ha()/2:0,f=c,m=n-1-c,g=Math.max(a,l),y=Math.min(a,l);if(g===y)return void(this.La=[]);const b=this.za(g,y);if(this.Ua(e,b,g,y,f,m),t.$a()&&this.qa(b,y,g)){const x=this.Yi.Ya();this.ja(e,b,f,m,x,2*x)}const E=this.La.map((x=>x.Ka)),A=this.Yi.Xa(E);for(let x=0;x<this.La.length;x++)this.La[x].Za=A[x]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(t,e,n,a,l,c){const f=this.La,m=this.Yi;let g=n%e;g+=g<0?e:0;const y=n>=a?1:-1;let b=null,E=0;for(let A=n-g;A>a;A-=e){const x=this.Na(A,t,!0);b!==null&&Math.abs(x-b)<this.Fa()||x<l||x>c||(E<f.length?(f[E].Pa=x,f[E].Za=m.Ga(A),f[E].Ka=A):f.push({Pa:x,Za:m.Ga(A),Ka:A}),E++,b=x,m.Ja()&&(e=this.za(A*y,a)))}f.length=E}ja(t,e,n,a,l,c){const f=this.La,m=this.Qa(t,n,l,c),g=this.Qa(t,a,-c,-l),y=this.Na(0,t,!0)-this.Na(e,t,!0);f.length>0&&f[0].Pa-m.Pa<y/2&&f.shift(),f.length>0&&g.Pa-f[f.length-1].Pa<y/2&&f.pop(),f.unshift(m),f.push(g)}Qa(t,e,n,a){const l=(n+a)/2,c=this.Oa(e+n,t),f=this.Oa(e+a,t),m=Math.min(c,f),g=Math.max(c,f),y=Math.max(.1,this.za(g,m)),b=this.Oa(e+l,t),E=b-b%y,A=this.Na(E,t,!0);return{Za:this.Yi.Ga(E),Pa:A,Ka:E}}qa(t,e,n){let a=gr(this.Yi.Qe());return this.Yi.Ja()&&(a=yo(a,this.Yi.tl())),a.$e()-e<t&&n-a.qe()<t}}function KS(s){return s.slice().sort(((t,e)=>ht(t.hs())-ht(e.hs())))}var o1;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(o1||(o1={}));const l1=new FS,u1=new xf(100,1);class U4{constructor(t,e,n,a,l){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Ye,this.ul=new Ye,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=u1,this.wl=Km(null),this.gl=t,this.Ps=e,this.Ml=n,this.bl=a,this.Sl=l,this.xl=new a1(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(t){if(ni(this.Ps,t),this.wa(),t.mode!==void 0&&this.yl({ie:t.mode}),t.scaleMargins!==void 0){const e=Hn(t.scaleMargins.top),n=Hn(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(e+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+n}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(t){const e=this.ie();let n=null;t.sn!==void 0&&(this.Ps.autoScale=t.sn),t.ie!==void 0&&(this.Ps.mode=t.ie,t.ie!==2&&t.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),e.ie===1&&t.ie!==e.ie&&((function(l,c){if(l===null)return!1;const f=au(l.$e(),c),m=au(l.qe(),c);return isFinite(f)&&isFinite(m)})(this.Ge,this.wl)?(n=yo(this.Ge,this.wl),n!==null&&this.Bl(n)):this.Ps.autoScale=!0),t.ie===1&&t.ie!==e.ie&&(n=Yl(this.Ge,this.wl),n!==null&&this.Bl(n));const a=e.ie!==this.Ps.mode;a&&(e.ie===2||this.Le())&&this.wa(),a&&(e.ie===3||this.Dl())&&this.wa(),t.Vl!==void 0&&e.Vl!==t.Vl&&(this.Ps.invertScale=t.Vl,this.Il()),this.ul.p(e,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(t){this.il!==t&&(this.il=t,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const t=this.$t()-this.Ll()-this.Ol();return this.sl=t,t}Qe(){return this.Nl(),this.Ge}Bl(t,e){const n=this.Ge;(e||n===null&&t!==null||n!==null&&!n.He(t))&&(this.pl=null,this.Ge=t)}Fl(t){this.Bl(t),this.Wl(t!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(t){return this.Vl()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=po(t,e):this.Dl()&&(t=ru(t,e)),this.Pl(t,e)}Ul(t,e,n){this.Nl();const a=this.Ol(),l=ht(this.Qe()),c=l.$e(),f=l.qe(),m=this.zl()-1,g=this.Vl(),y=m/(f-c),b=n===void 0?0:n.from,E=n===void 0?t.length:n.to,A=this.$l();for(let x=b;x<E;x++){const R=t[x],D=R.gt;if(isNaN(D))continue;let B=D;A!==null&&(B=A(R.gt,e));const Z=a+y*(B-c),rt=g?Z:this.il-1-Z;R.ut=rt}}ql(t,e,n){this.Nl();const a=this.Ol(),l=ht(this.Qe()),c=l.$e(),f=l.qe(),m=this.zl()-1,g=this.Vl(),y=m/(f-c),b=n===void 0?0:n.from,E=n===void 0?t.length:n.to,A=this.$l();for(let x=b;x<E;x++){const R=t[x];let D=R.qh,B=R.Yh,Z=R.jh,rt=R.Kh;A!==null&&(D=A(R.qh,e),B=A(R.Yh,e),Z=A(R.jh,e),rt=A(R.Kh,e));let gt=a+y*(D-c),yt=g?gt:this.il-1-gt;R.Yl=yt,gt=a+y*(B-c),yt=g?gt:this.il-1-gt,R.jl=yt,gt=a+y*(Z-c),yt=g?gt:this.il-1-gt,R.Kl=yt,gt=a+y*(rt-c),yt=g?gt:this.il-1-gt,R.Xl=yt}}Ts(t,e){const n=this.Cl(t,e);return this.Zl(n,e)}Zl(t,e){let n=t;return this.Le()?n=(function(a,l){return l<0&&(a=-a),a/100*l+l})(n,e):this.Dl()&&(n=(function(a,l){return a-=100,l<0&&(a=-a),a/100*l+l})(n,e)),n}Ma(){return this.cl}Dt(){return this.fl||(this.fl=KS(this.cl)),this.fl}Gl(t){this.cl.indexOf(t)===-1&&(this.cl.push(t),this.wa(),this.Jl())}Ql(t){const e=this.cl.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.cl.splice(e,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let t=null;for(const e of this.cl){const n=e.zt();n!==null&&(t===null||n.Hh<t.Hh)&&(t=n)}return t===null?null:t.Wt}Vl(){return this.Ps.invertScale}Da(){const t=this.zt()===null;if(this.pl!==null&&(t||this.pl.io===t))return this.pl.Da;this.xl.Wa();const e=this.xl.Da();return this.pl={Da:e,io:t},this._l.p(),e}so(){return this._l}no(t){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-t,this.nl=ht(this.Qe()).Ue()))}eo(t){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(t=this.il-t)<0&&(t=0);let e=(this.vl+.2*(this.il-1))/(t+.2*(this.il-1));const n=ht(this.nl).Ue();e=Math.max(e,.1),n.je(e),this.Bl(n)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(t){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=t,this.nl=ht(this.Qe()).Ue()))}ao(t){if(this.Tl()||this.ml===null)return;const e=ht(this.Qe()).Ye()/(this.zl()-1);let n=t-this.ml;this.Vl()&&(n*=-1);const a=n*e,l=ht(this.nl).Ue();l.Ke(a),this.Bl(l,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(t,e){switch(this.Ps.mode){case 2:return this.oo(po(t,e));case 3:return this.ea().format(ru(t,e));default:return this.nr(t)}}Ga(t){switch(this.Ps.mode){case 2:return this.oo(t);case 3:return this.ea().format(t);default:return this.nr(t)}}Xa(t){switch(this.Ps.mode){case 2:return this._o(t);case 3:return this.ea().formatTickmarks(t);default:return this.uo(t)}}Dh(t){return this.nr(t,ht(this.dl).ea())}Vh(t,e){return t=po(t,e),this.oo(t,l1)}co(){return this.cl}do(t){this.el={hl:t,rl:!1}}Ns(){this.cl.forEach((t=>t.Ns()))}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let t=1/0;this.dl=null;for(const n of this.cl)n.hs()<t&&(t=n.hs(),this.dl=n);let e=100;this.dl!==null&&(e=Math.round(this.dl.nh())),this.ra=u1,this.Le()?(this.ra=l1,e=100):this.Dl()?(this.ra=new xf(100,1),e=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new a1(this,e,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(t){this.al=t}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(t,e){if(this.Nl(),this.Ki())return 0;t=this.Ja()&&t?tf(t,this.wl):t;const n=ht(this.Qe()),a=this.Ol()+(this.zl()-1)*(t-n.$e())/n.Ye();return this.Hl(a)}Cl(t,e){if(this.Nl(),this.Ki())return 0;const n=this.Hl(t),a=ht(this.Qe()),l=a.$e()+a.Ye()*((n-this.Ol())/(this.zl()-1));return this.Ja()?au(l,this.wl):l}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const t=this.el.hl;if(t===null)return;let e=null;const n=this.co();let a=0,l=0;for(const m of n){if(!m.Vt())continue;const g=m.zt();if(g===null)continue;const y=m.Mh(t.Uh(),t.bi());let b=y&&y.Qe();if(b!==null){switch(this.Ps.mode){case 1:b=Yl(b,this.wl);break;case 2:b=L4(b,g.Wt);break;case 3:b=j4(b,g.Wt)}if(e=e===null?b:e.vn(ht(b)),y!==null){const E=y.tr();E!==null&&(a=Math.max(a,E.above),l=Math.max(l,E.below))}}}if(this.$a()&&(a=Math.max(a,this.Ya()),l=Math.max(l,this.Ya())),a===this.ll&&l===this.ol||(this.ll=a,this.ol=l,this.pl=null,this.kl()),e!==null){if(e.$e()===e.qe()){const m=5*this.fo();this.Ja()&&(e=yo(e,this.wl)),e=new In(e.$e()-m,e.qe()+m),this.Ja()&&(e=Yl(e,this.wl))}if(this.Ja()){const m=yo(e,this.wl),g=Km(m);if(c=g,f=this.wl,c.Va!==f.Va||c.Ba!==f.Ba){const y=this.nl!==null?yo(this.nl,this.wl):null;this.wl=g,e=Yl(m,g),y!==null&&(this.nl=Yl(y,g))}}this.Bl(e)}else this.Ge===null&&(this.Bl(new In(-.5,.5)),this.wl=Km(null));var c,f}$l(){return this.Le()?po:this.Dl()?ru:this.Ja()?t=>tf(t,this.wl):null}vo(t,e,n){return e===void 0?(n===void 0&&(n=this.ea()),n.format(t)):e(t)}mo(t,e,n){return e===void 0?(n===void 0&&(n=this.ea()),n.formatTickmarks(t)):e(t)}nr(t,e){return this.vo(t,this.bl.priceFormatter,e)}uo(t,e){const n=this.bl.priceFormatter;return this.mo(t,this.bl.tickmarksPriceFormatter??(n?a=>a.map(n):void 0),e)}oo(t,e){return this.vo(t,this.bl.percentageFormatter,e)}_o(t,e){const n=this.bl.percentageFormatter;return this.mo(t,this.bl.tickmarksPercentageFormatter??(n?a=>a.map(n):void 0),e)}}function c1(s){return s instanceof Af}class h1{constructor(t,e){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Ye,this.yh=[],this.uh=t,this.ts=e,this.Co=new z4(this);const n=e.N();this.Po=this.yo("left",n.leftPriceScale),this.ko=this.yo("right",n.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(n)}Ro(t){if(t.leftPriceScale&&this.Po.hr(t.leftPriceScale),t.rightPriceScale&&this.ko.hr(t.rightPriceScale),t.localization&&(this.Po.wa(),this.ko.wa()),t.overlayPriceScales){const e=Array.from(this.wo.values());for(const n of e){const a=ht(n[0].Ft());a.hr(t.overlayPriceScales),t.localization&&a.wa()}}}Do(t){switch(t){case"left":return this.Po;case"right":return this.ko}return this.wo.has(t)?Hn(this.wo.get(t))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach((t=>{t.m&&t.m()})),this.yh=this.yh.filter((t=>{const e=t.oh();return e.detached&&e.detached(),!1})),this.xo.p()}Bo(){return this.bo}Io(t){this.bo=t}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(t){this.Mo=t,this.Ao()}Al(t){this.il=t,this.Po.Al(t),this.ko.Al(t),this.cl.forEach((e=>{if(this.Un(e)){const n=e.Ft();n!==null&&n.Al(t)}})),this.Ao()}zo(t){this.So=t}Lo(){return this.So}Oo(){return this.cl.filter(c1)}Ma(){return this.cl}Un(t){const e=t.Ft();return e===null||this.Po!==e&&this.ko!==e}Gl(t,e,n){this.No(t,e,n?t.hs():this.cl.length)}Ql(t,e){const n=this.cl.indexOf(t);wn(n!==-1,"removeDataSource: invalid data source"),this.cl.splice(n,1),e||this.cl.forEach(((c,f)=>c.ls(f)));const a=ht(t.Ft()).ma();if(this.wo.has(a)){const c=Hn(this.wo.get(a)),f=c.indexOf(t);f!==-1&&(c.splice(f,1),c.length===0&&this.wo.delete(a))}const l=t.Ft();l&&l.Ma().indexOf(t)>=0&&(l.Ql(t),this.Fo(l)),this.fl=null}qn(t){return t===this.Po?"left":t===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(t,e){t.no(e)}$o(t,e){t.eo(e),this.Ao()}qo(t){t.ro()}Yo(t,e){t.ho(e)}jo(t,e){t.ao(e),this.Ao()}Ko(t){t.lo()}Ao(){this.cl.forEach((t=>{t.Ns()}))}ks(){let t=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?t=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?t=this.Po:this.cl.length!==0&&(t=this.cl[0].Ft()),t===null&&(t=this.ko),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.ko:this.ts.N().leftPriceScale.visible&&(t=this.Po),t}Fo(t){t!==null&&t.Tl()&&this.Xo(t)}Zo(t){const e=this.uh.Pe();t.yl({sn:!0}),e!==null&&t.do(e),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach((t=>{this.Un(t)&&this.Fo(t.Ft())})),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=KS(this.cl)),this.fl}Qo(t,e){e=su(e,0,this.cl.length-1);const n=this.cl.indexOf(t);wn(n!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(n,1),this.cl.splice(e,0,t),this.cl.forEach(((a,l)=>a.ls(l))),this.fl=null;for(const a of[this.Po,this.ko])a.Jl(),a.wa();this.ts.ar()}Bt(){return this.Dt().filter(c1)}t_(){return this.xo}i_(){return this.Co}_a(t){this.yh.push(new T4(t))}ua(t){this.yh=this.yh.filter((e=>e.oh()!==t)),t.detached&&t.detached(),this.ts.ar()}s_(){return this.yh}sa(t,e){return this.yh.map((n=>n.jn(t,e))).filter((n=>n!==null))}Xo(t){const e=t.co();if(e&&e.length>0&&!this.uh.Ki()){const n=this.uh.Pe();n!==null&&t.do(n)}t.Ns()}No(t,e,n){let a=this.Do(e);if(a===null&&(a=this.yo(e,this.ts.N().overlayPriceScales)),this.cl.splice(n,0,t),!Tf(e)){const l=this.wo.get(e)||[];l.push(t),this.wo.set(e,l)}t.ls(n),a.Gl(t),t._s(a),this.Fo(a),this.fl=null}To(t,e,n){e.ie!==n.ie&&this.Xo(t)}yo(t,e){const n={visible:!0,autoScale:!0,...Ms(e)},a=new U4(t,n,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return a.Al(this.$t()),a}}function yh(s){return{n_:s.n_,e_:{Kn:s.r_.externalId},h_:s.r_.cursorStyle}}function B4(s,t,e,n){for(const a of s){const l=a.Tt(n);if(l!==null&&l.jn){const c=l.jn(t,e);if(c!==null)return{a_:a,e_:c}}}return null}function F4(s){return s.Fs!==void 0}function $S(s,t,e){const n=[s,...s.Dt()],a=(function(l,c,f){let m,g;for(const E of l){const A=E.sa?.(c,f)??[];for(const x of A)y=x.zOrder,b=m?.zOrder,(!b||y==="top"&&b!=="top"||y==="normal"&&b==="bottom")&&(m=x,g=E)}var y,b;return m&&g?{r_:m,n_:g}:null})(n,t,e);if(a?.r_.zOrder==="top")return yh(a);for(const l of n){if(a&&a.n_===l&&a.r_.zOrder!=="bottom"&&!a.r_.isBackground)return yh(a);if(F4(l)){const c=B4(l.Fs(s),t,e,s);if(c!==null)return{n_:l,a_:c.a_,e_:c.e_}}if(a&&a.n_===l&&a.r_.zOrder!=="bottom"&&a.r_.isBackground)return yh(a)}return a?.r_?yh(a):null}class q4{constructor(t,e,n=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=t,this.o_=e,this.Vn=n}__(t){const e=t.time,n=this.o_.cacheKey(e),a=this.Dn.get(n);if(a!==void 0)return a.u_;if(this.yn===this.Vn){const c=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Hn(c)),this.Tn++,this.yn--}const l=this.l_(t);return this.Dn.set(n,{u_:l,An:this.kn}),this.Rn.set(this.kn,n),this.yn++,this.kn++,l}}class wo{constructor(t,e){wn(t<=e,"right should be >= left"),this.c_=t,this.d_=e}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(t){return this.c_<=t&&t<=this.d_}He(t){return this.c_===t.Uh()&&this.d_===t.bi()}}function f1(s,t){return s===null||t===null?s===t:s.He(t)}class Y4{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(t){this.v_=t,this.Dn=null}w_(t,e){this.g_(e),this.Dn=null;for(let n=e;n<t.length;++n){const a=t[n];let l=this.p_.get(a.timeWeight);l===void 0&&(l=[],this.p_.set(a.timeWeight,l)),l.push({index:n,time:a.time,weight:a.timeWeight,originalTime:a.originalTime})}}M_(t,e,n,a,l){const c=Math.ceil(e/t);return this.Dn!==null&&this.Dn.b_===c&&l===this.Dn.S_&&n===this.Dn.x_||(this.Dn={S_:l,x_:n,Da:this.C_(c,n,a),b_:c}),this.Dn.Da}g_(t){if(t===0)return void this.p_.clear();const e=[];this.p_.forEach(((n,a)=>{t<=n[0].index?e.push(a):n.splice(Do(n,t,(l=>l.index<t)),1/0)}));for(const n of e)this.p_.delete(n)}C_(t,e,n){let a=[];const l=c=>!e||n.has(c.index);for(const c of Array.from(this.p_.keys()).sort(((f,m)=>m-f))){if(!this.p_.get(c))continue;const f=a;a=[];const m=f.length;let g=0;const y=Hn(this.p_.get(c)),b=y.length;let E=1/0,A=-1/0;for(let x=0;x<b;x++){const R=y[x],D=R.index;for(;g<m;){const B=f[g],Z=B.index;if(!(Z<D&&l(B))){E=Z;break}g++,a.push(B),A=Z,E=1/0}if(E-D>=t&&D-A>=t&&l(R))a.push(R),A=D;else if(this.v_)return f}for(;g<m;g++)l(f[g])&&a.push(f[g])}return a}}class Eo{constructor(t){this.P_=t}y_(){return this.P_===null?null:new wo(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new Eo(null)}}function H4(s,t){return s.weight>t.weight?s:t}class Q4{constructor(t,e,n,a){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new Y4,this.B_=new Map,this.I_=Eo.T_(),this.E_=!0,this.A_=new Ye,this.z_=new Ye,this.L_=new Ye,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=e,this.bl=n,this.U_=e.rightOffset,this.q_=e.barSpacing,this.ts=t,this.Y_(e),this.o_=a,this.j_(),this.V_.m_(e.uniformDistribution),this.K_()}N(){return this.Ps}X_(t){ni(this.bl,t),this.Z_(),this.j_()}hr(t,e){ni(this.Ps,t),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),t.barSpacing!==void 0&&this.ts.dn(t.barSpacing),t.rightOffset!==void 0&&this.ts.fn(t.rightOffset),this.Y_(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ts.dn(t.barSpacing??this.q_),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(t){return this.D_[t]?.time??null}ss(t){return this.D_[t]??null}Q_(t,e){if(this.D_.length<1)return null;if(this.o_.key(t)>this.o_.key(this.D_[this.D_.length-1].time))return e?this.D_.length-1:null;const n=Do(this.D_,this.o_.key(t),((a,l)=>this.o_.key(a.time)<l));return this.o_.key(t)<this.o_.key(this.D_[n].time)?e?n:null:n}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const t=this.Pe();if(t===null)return null;const e={from:t.Uh(),to:t.bi()};return this.eu(e)}eu(t){const e=Math.round(t.from),n=Math.round(t.to),a=ht(this.ru()),l=ht(this.hu());return{from:ht(this.ss(Math.max(a,e))),to:ht(this.ss(Math.min(l,n)))}}au(t){return{from:ht(this.Q_(t.from,!0)),to:ht(this.Q_(t.to,!0))}}Qi(){return this.Mo}Eo(t){if(!isFinite(t)||t<=0||this.Mo===t)return;const e=this.su(),n=this.Mo;if(this.Mo=t,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const a=this.q_*t/n;this.q_=a}if(this.Ps.fixLeftEdge&&e!==null&&e.Uh()<=0){const a=n-t;this.U_-=Math.round(a/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(t){if(this.Ki()||!_u(t))return 0;const e=this._u()+this.U_-t;return this.Mo-(e+.5)*this.q_-1}uu(t,e){const n=this._u(),a=e===void 0?0:e.from,l=e===void 0?t.length:e.to;for(let c=a;c<l;c++){const f=t[c].wt,m=n+this.U_-f,g=this.Mo-(m+.5)*this.q_-1;t[c]._t=g}}cu(t,e){const n=Math.ceil(this.du(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.fu(n)?this.pu(n):n}fn(t){this.E_=!0,this.U_=t,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(t){const e=this.q_;if(this.wu(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const n=this.U_*e/this.q_;this.U_=n}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const t=this.q_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(e/t),a=ht(this.Pe()),l=Math.max(a.Uh(),a.Uh()-n),c=Math.max(a.bi(),a.bi()-n),f=this.V_.M_(t,e,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),m=this.ru()+n,g=this.hu()-n,y=this.Mu(),b=this.Ps.fixLeftEdge||y,E=this.Ps.fixRightEdge||y;let A=0;for(const x of f){if(!(l<=x.index&&x.index<=c))continue;let R;A<this.H_.length?(R=this.H_[A],R.coord=this.qt(x.index),R.label=this.bu(x),R.weight=x.weight):(R={needAlignCoordinate:!1,coord:this.qt(x.index),label:this.bu(x),weight:x.weight},this.H_.push(R)),this.q_>e/2&&!y?R.needAlignCoordinate=!1:R.needAlignCoordinate=b&&x.index<=m||E&&x.index>=g,A++}return this.H_.length=A,this.N_=this.H_,this.H_}Su(){let t;this.E_=!0,this.dn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(t)}xu(t){this.E_=!0,this.R_=t,this.ou(),this.G_()}Cu(t,e){const n=this.du(t),a=this.mu(),l=a+e*(a/10);this.dn(l),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(n-this.du(t)))}no(t){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=t,this.Pu()))}eo(t){if(this.O_===null)return;const e=su(this.Mo-t,0,this.Mo),n=su(this.Mo-ht(this.vl),0,this.Mo);e!==0&&n!==0&&this.dn(this.O_.mu*e/n)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(t){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=t,this.Pu()))}ao(t){if(this.ml===null)return;const e=(this.ml-t)/this.mu();this.U_=ht(this.O_).gu+e,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.U_,a=performance.now();this.ts._n({Ru:l=>(l-a)/e>=1,Du:l=>{const c=(l-a)/e;return c>=1?t:n+(t-n)*c}})}yt(t,e){this.E_=!0,this.D_=t,this.V_.w_(t,e),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(t,e){const n=t.f_(),a=e&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-a)/n),this.U_=t.bi()-this._u(),e&&(this.U_=a?a/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const t=this.ru(),e=this.hu();t!==null&&e!==null&&this.Eu(new wo(t,e),!0)}zu(t){const e=new wo(t.from,t.to);this.Eu(e)}ns(t){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(t.originalTime):this.o_.formatHorzItem(t.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const t=this.ts.js();for(const e of t)for(const n of e.va())this.F_.set(n,!0);this.W_++}Mu(){const t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(t){return(this.Mo-1-t)/this.q_}du(t){const e=this.Lu(t),n=this._u()+this.U_-e;return Math.round(1e6*n)/1e6}wu(t){const e=this.q_;this.q_=t,this.lu(),e!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(Eo.T_());const t=this._u(),e=this.Mo/this.q_,n=this.U_+t,a=new wo(n-e+1,n);this.Nu(new Eo(a))}lu(){const t=su(this.q_,this.Fu(),this.Wu());this.q_!==t&&(this.q_=t,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const t=this.Hu();t!==null&&this.U_<t&&(this.U_=t,this.E_=!0);const e=this.Uu();this.U_>e&&(this.U_=e,this.E_=!0)}Hu(){const t=this.ru(),e=this.R_;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(t){let e=this.B_.get(t.weight);return e===void 0&&(e=new q4((n=>this.$u(n)),this.o_),this.B_.set(t.weight,e)),e.__(t)}$u(t){return this.o_.formatTickmark(t,this.bl)}Nu(t){const e=this.I_;this.I_=t,f1(e.y_(),this.I_.y_())||this.A_.p(),f1(e.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const t=this.ru();if(t===null)return;const e=this.Pe();if(e===null)return;const n=e.Uh()-t;if(n<0){const a=this.U_-n-1;this.fn(a)}this.lu()}J_(){this.ou(),this.lu()}fu(t){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(t)||!1}pu(t){const e=(function*(a){const l=Math.round(a),c=l<a;let f=1;for(;;)c?(yield l+f,yield l-f):(yield l-f,yield l+f),f++})(t),n=this.hu();for(;n;){const a=e.next().value;if(this.F_.get(a))return a;if(a<0||a>n)break}return t}Y_(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.q_);this.ts.fn(e)}}}var d1,m1,g1,zg,p1;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(d1||(d1={}));class G4{constructor(t,e,n){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Ye,this.Xu=new Ye,this.Zu=null,this.Gu=t,this.Ps=e,this.o_=n,this.Sl=new QI(this.Ps.layout.colorParsers),this.Ju=new HI(this),this.uh=new Q4(this,e.timeScale,this.Ps.localization,n),this.Ct=new s4(this,e.crosshair),this.Qu=new V4(e.crosshair),e.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(bn.gn())}ar(){this.rc(bn.wn())}Zh(){this.rc(new bn(1))}Eh(t){const e=this.hc(t);this.rc(e)}ac(){return this.ju}lc(t){if(this.ju?.n_===t?.n_&&this.ju?.e_?.Kn===t?.e_?.Kn)return;const e=this.ju;this.ju=t,e!==null&&this.Eh(e.n_),t!==null&&t.n_!==e?.n_&&this.Eh(t.n_)}N(){return this.Ps}hr(t){ni(this.Ps,t),this.qu.forEach((e=>e.Ro(t))),t.timeScale!==void 0&&this.uh.hr(t.timeScale),t.localization!==void 0&&this.uh.X_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(t,e,n=0){const a=this.qu[n];if(a===void 0)return;if(t==="left")return ni(this.Ps,{leftPriceScale:e}),a.Ro({leftPriceScale:e}),this.Ku.p(),void this.Ih();if(t==="right")return ni(this.Ps,{rightPriceScale:e}),a.Ro({rightPriceScale:e}),this.Ku.p(),void this.Ih();const l=this._c(t,n);l!==null&&(l.Ft.hr(e),this.Ku.p())}_c(t,e){const n=this.qu[e];if(n===void 0)return null;const a=n.Do(t);return a!==null?{Us:n,Ft:a}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(t,e){t.Al(e),this.vu()}Eo(t){this.Mo=t,this.uh.Eo(this.Mo),this.qu.forEach((e=>e.Eo(t))),this.vu()}fc(t){this.qu.length!==1&&(wn(t>=0&&t<this.qu.length,"Invalid pane index"),this.qu.splice(t,1),this.Ih())}vc(t,e){if(this.qu.length<2)return;wn(t>=0&&t<this.qu.length,"Invalid pane index");const n=this.qu[t],a=this.qu.reduce(((b,E)=>b+E.Bo()),0),l=this.qu.reduce(((b,E)=>b+E.$t()),0),c=l-30*(this.qu.length-1);e=Math.min(c,Math.max(30,e));const f=a/l,m=n.$t();n.Io(e*f);let g=e-m,y=this.qu.length-1;for(const b of this.qu)if(b!==n){const E=Math.min(c,Math.max(30,b.$t()-g/y));g-=b.$t()-E,y-=1;const A=E*f;b.Io(A)}this.Ih()}mc(t,e){wn(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index");const n=this.qu[t],a=this.qu[e];this.qu[t]=a,this.qu[e]=n,this.Ih()}wc(t,e){if(wn(t>=0&&t<this.qu.length&&e>=0&&e<this.qu.length,"Invalid pane index"),t===e)return;const[n]=this.qu.splice(t,1);this.qu.splice(e,0,n),this.Ih()}Uo(t,e,n){t.Uo(e,n)}$o(t,e,n){t.$o(e,n),this.Ah(),this.rc(this.gc(t,2))}qo(t,e){t.qo(e),this.rc(this.gc(t,2))}Yo(t,e,n){e.Tl()||t.Yo(e,n)}jo(t,e,n){e.Tl()||(t.jo(e,n),this.Ah(),this.rc(this.gc(t,2)))}Ko(t,e){e.Tl()||(t.Ko(e),this.rc(this.gc(t,2)))}Zo(t,e){t.Zo(e),this.rc(this.gc(t,2))}Mc(t){this.uh.no(t)}bc(t,e){const n=this.Et();if(n.Ki()||e===0)return;const a=n.Qi();t=Math.max(1,Math.min(t,a)),n.Cu(t,e),this.vu()}Sc(t){this.xc(0),this.Cc(t),this.Pc()}yc(t){this.uh.eo(t),this.vu()}kc(){this.uh.ro(),this.ar()}xc(t){this.uh.ho(t)}Cc(t){this.uh.ao(t),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(t,e,n,a,l){this.Ct.Vs(t,e);let c=NaN,f=this.uh.cu(t,!0);const m=this.uh.Pe();m!==null&&(f=Math.min(Math.max(m.Uh(),f),m.bi()));const g=a.ks(),y=g.zt();if(y!==null&&(c=g.Ts(e,y)),c=this.Qu.ga(c,f,a),this.Ct.As(f,c,a),this.Zh(),!l){const b=$S(a,t,e);this.lc(b&&{n_:b.n_,e_:b.e_,h_:b.h_||null}),this.Xu.p(this.Ct.It(),{x:t,y:e},n)}}Rc(t,e,n){const a=n.ks(),l=a.zt(),c=a.Nt(t,ht(l)),f=this.uh.Q_(e,!0),m=this.uh.qt(ht(f));this.Tc(m,c,null,n,!0)}Dc(t){this.uc().Ls(),this.Zh(),t||this.Xu.p(null,null,null)}Ah(){const t=this.Ct.Us();if(t!==null){const e=this.Ct.Is(),n=this.Ct.Es();this.Tc(e,n,null,t)}this.Ct.Ns()}Vc(t,e,n){const a=this.uh.Rs(0);e!==void 0&&n!==void 0&&this.uh.yt(e,n);const l=this.uh.Rs(0),c=this.uh._u(),f=this.uh.Pe();if(f!==null&&a!==null&&l!==null){const m=f.Te(c),g=this.o_.key(a)>this.o_.key(l),y=t!==null&&t>c&&!g,b=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,E=m&&(n!==void 0||b)&&this.uh.N().shiftVisibleRangeOnNewBar;if(y&&!E){const A=t-c;this.uh.fn(this.uh.gu()-A)}}this.uh.xu(t)}Lh(t){t!==null&&t.Jo()}Hn(t){if((function(n){return n instanceof h1})(t))return t;const e=this.qu.find((n=>n.Dt().includes(t)));return e===void 0?null:e}vu(){this.qu.forEach((t=>t.Jo())),this.Ah()}m(){this.qu.forEach((t=>t.m())),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(t,e){const n=this.tc(e);this.Ec(t,n),this.Yu.push(t),this.Yu.length===1?this.Ih():this.ar()}Ac(t){const e=this.Hn(t),n=this.Yu.indexOf(t);wn(n!==-1,"Series not found");const a=ht(e);this.Yu.splice(n,1),a.Ql(t),t.m&&t.m(),this.uh.K_(),this.zc(a)}Bh(t,e){const n=ht(this.Hn(t));n.Ql(t,!0),n.Gl(t,e,!0)}Au(){const t=bn.wn();t.rn(),this.rc(t)}Lc(t){const e=bn.wn();e.ln(t),this.rc(e)}cn(){const t=bn.wn();t.cn(),this.rc(t)}dn(t){const e=bn.wn();e.dn(t),this.rc(e)}fn(t){const e=bn.wn();e.fn(t),this.rc(e)}_n(t){const e=bn.wn();e._n(t),this.rc(e)}hn(){const t=bn.wn();t.hn(),this.rc(t)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(t,e){if(wn(e>=0,"Index should be greater or equal to 0"),e===this.Fc(t))return;const n=ht(this.Hn(t));n.Ql(t);const a=this.tc(e);this.Ec(t,a),n.Ma().length===0&&this.zc(n),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(t){const e=this.ec,n=this.sc;if(e===n)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Zu===null||this.Zu.mr!==n||this.Zu.wr!==e)this.Zu={mr:n,wr:e,Hc:new Map};else{const l=this.Zu.Hc.get(t);if(l!==void 0)return l}const a=this.Sl.tt(n,e,t/100);return this.Zu.Hc.set(t,a),a}Uc(t){return this.qu.indexOf(t)}Xi(){return this.Sl}$c(){return this.qc()}qc(t){const e=new h1(this.uh,this);this.qu.push(e);const n=t??this.qu.length-1,a=bn.gn();return a.Qs(n,{tn:0,sn:!0}),this.rc(a),e}tc(t){return wn(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.qu.length,t))<this.qu.length?this.qu[t]:this.qc(t)}Fc(t){return this.qu.findIndex((e=>e.Oo().includes(t)))}gc(t,e){const n=new bn(e);if(t!==null){const a=this.qu.indexOf(t);n.Qs(a,{tn:e})}return n}hc(t,e){return e===void 0&&(e=2),this.gc(this.Hn(t),e)}rc(t){this.Gu&&this.Gu(t),this.qu.forEach((e=>e.i_().lr().yt()))}Ec(t,e){const n=t.N().priceScaleId,a=n!==void 0?n:this.Oc();e.Gl(t,a),Tf(a)||t.hr(t.N())}nc(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}zc(t){!t.Lo()&&t.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(t),1)}}function XS(s){if(s>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(s);if(Math.abs(e-s)<1e-8)return t;s*=10}return t}function Lg(s){return!ga(s)&&!Vu(s)}function WS(s){return ga(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(m1||(m1={})),(function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"})(g1||(g1={})),(function(s){s.Solid="solid",s.VerticalGradient="gradient"})(zg||(zg={})),(function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"})(p1||(p1={}));const y1=s=>s.getUTCFullYear();function K4(s,t,e){return t.replace(/yyyy/g,(n=>Ns(y1(n),4))(s)).replace(/yy/g,(n=>Ns(y1(n)%100,2))(s)).replace(/MMMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"long"}))(s,e)).replace(/MMM/g,((n,a)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(a,{month:"short"}))(s,e)).replace(/MM/g,(n=>Ns((a=>a.getUTCMonth()+1)(n),2))(s)).replace(/dd/g,(n=>Ns((a=>a.getUTCDate())(n),2))(s))}class JS{constructor(t="yyyy-MM-dd",e="default"){this.Yc=t,this.jc=e}__(t){return K4(t,this.Yc,this.jc)}}class $4{constructor(t){this.Kc=t||"%h:%m:%s"}__(t){return this.Kc.replace("%h",Ns(t.getUTCHours(),2)).replace("%m",Ns(t.getUTCMinutes(),2)).replace("%s",Ns(t.getUTCSeconds(),2))}}const X4={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class W4{constructor(t={}){const e={...X4,...t};this.Qc=new JS(e.Xc,e.Jc),this.td=new $4(e.Zc),this.sd=e.Gc}__(t){return`${this.Qc.__(t)}${this.sd}${this.td.__(t)}`}}function vh(s){return 60*s*60*1e3}function Xm(s){return 60*s*1e3}const bh=[{nd:(v1=1,1e3*v1),ed:10},{nd:Xm(1),ed:20},{nd:Xm(5),ed:21},{nd:Xm(30),ed:22},{nd:vh(1),ed:30},{nd:vh(3),ed:31},{nd:vh(6),ed:32},{nd:vh(12),ed:33}];var v1;function b1(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=bh.length-1;e>=0;--e)if(Math.floor(t.getTime()/bh[e].nd)!==Math.floor(s.getTime()/bh[e].nd))return bh[e].ed;return 0}function Wm(s){let t=s;if(Vu(s)&&(t=Dp(s)),!Lg(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{rd:Math.round(e.getTime()/1e3),hd:t}}function _1(s){if(!WS(s))throw new Error("time must be of type isUTCTimestamp");return{rd:s}}function Dp(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function w1(s){Vu(s.time)&&(s.time=Dp(s.time))}class E1{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(w1)})(t):w1(t)}createConverterToInternalObj(t){return ht((function(e){return e.length===0?null:Lg(e[0].time)||Vu(e[0].time)?Wm:_1})(t))}key(t){return typeof t=="object"&&"rd"in t?t.rd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.hd===void 0?new Date(1e3*e.rd).getTime():new Date(Date.UTC(e.hd.year,e.hd.month-1,e.hd.day)).getTime()}convertHorzItemToInternal(t){return WS(e=t)?_1(e):Lg(e)?Wm(e):Wm(Dp(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new W4({Xc:e,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:t.locale}):this.ad=new JS(e,t.locale)}formatHorzItem(t){const e=t;return this.ad.__(new Date(1e3*e.rd))}formatTickmark(t,e){const n=(function(l,c,f){switch(l){case 0:case 10:return c?f?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return c?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),a=this.Ps.timeScale;if(a.tickMarkFormatter!==void 0){const l=a.tickMarkFormatter(t.originalTime,n,e.locale);if(l!==null)return l}return(function(l,c,f){const m={};switch(c){case 0:m.year="numeric";break;case 1:m.month="short";break;case 2:m.day="numeric";break;case 3:m.hour12=!1,m.hour="2-digit",m.minute="2-digit";break;case 4:m.hour12=!1,m.hour="2-digit",m.minute="2-digit",m.second="2-digit"}const g=l.hd===void 0?new Date(1e3*l.rd):new Date(Date.UTC(l.hd.year,l.hd.month-1,l.hd.day));return new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate(),g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()).toLocaleString(f,m)})(t.time,n,e.locale)}maxTickMarkWeight(t){let e=t.reduce(H4,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(n,a=0){if(n.length===0)return;let l=a===0?null:n[a-1].time.rd,c=l!==null?new Date(1e3*l):null,f=0;for(let m=a;m<n.length;++m){const g=n[m],y=new Date(1e3*g.time.rd);c!==null&&(g.timeWeight=b1(y,c)),f+=g.time.rd-(l||g.time.rd),l=g.time.rd,c=y}if(a===0&&n.length>1){const m=Math.ceil(f/(n.length-1)),g=new Date(1e3*(n[0].time.rd-m));n[0].timeWeight=b1(new Date(1e3*n[0].time.rd),g)}})(t,e)}static ld(t){return ni({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Oo=typeof window<"u";function S1(){return!!Oo&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Jm(){return!!Oo&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function jg(s){return s+s%2}function J4(s){Oo&&window.chrome!==void 0&&s.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class Cf{constructor(t,e,n){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!Jm(),this.Ld=a=>{this.Od(a)},this.Nd=a=>{if(this.Fd(a)){const l=this.Wd(a);if(++this.dd,this.fd&&this.dd>1){const{Hd:c}=this.Ud(is(a),this.pd);c<30&&!this.Sd&&this.$d(l,this.Yd.qd),this.jd()}}else{const l=this.Wd(a);if(++this.od,this._d&&this.od>1){const{Hd:c}=this.Ud(is(a),this.ud);c<5&&!this.bd&&this.Kd(l,this.Yd.Xd),this.Zd()}}},this.Gd=t,this.Yd=e,this.Ps=n,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(t){this.yd&&this.yd();const e=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",e)},this.Gd.addEventListener("mousemove",e),this.Fd(t))return;const n=this.Wd(t);this.Kd(n,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(t){if(this.Id||this.gd!==null||this.Fd(t))return;const e=this.Wd(t);this.Kd(e,this.Yd.nf),this.zd=!0}ef(t){const e=Zm(t.changedTouches,ht(this.Ad));if(e===null||(this.Ed=_h(t),this.Rd!==null)||this.Bd)return;this.Vd=!0;const n=this.Ud(is(e),ht(this.gd)),{rf:a,hf:l,Hd:c}=n;if(this.Md||!(c<5)){if(!this.Md){const f=.5*a,m=l>=f&&!this.Ps.af(),g=f>l&&!this.Ps.lf();m||g||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const f=this.Wd(t,e);this.$d(f,this.Yd._f),uo(t)}}}uf(t){if(t.button!==0)return;const e=this.Ud(is(t),ht(this.wd)),{Hd:n}=e;if(n>=5&&(this.bd=!0,this.Zd()),this.bd){const a=this.Wd(t);this.Kd(a,this.Yd.cf)}}Ud(t,e){const n=Math.abs(e._t-t._t),a=Math.abs(e.ut-t.ut);return{rf:n,hf:a,Hd:n+a}}df(t){let e=Zm(t.changedTouches,ht(this.Ad));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Ad=null,this.Ed=_h(t),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const n=this.Wd(t,e);if(this.$d(n,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:a}=this.Ud(is(e),this.pd);a<30&&!this.Sd&&this.$d(n,this.Yd.qd),this.jd()}else this.Sd||(this.$d(n,this.Yd.pf),this.Yd.pf&&uo(t));this.dd===0&&uo(t),t.touches.length===0&&this.md&&(this.md=!1,uo(t))}Od(t){if(t.button!==0)return;const e=this.Wd(t);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),S1()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(t))if(this.Kd(e,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:n}=this.Ud(is(t),this.ud);n<5&&!this.bd&&this.Kd(e,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(e,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(t){if(this.Ad!==null)return;const e=t.changedTouches[0];this.Ad=e.identifier,this.Ed=_h(t);const n=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=is(e),this.Td&&(this.Td(),this.Td=null);{const l=this.ef.bind(this),c=this.df.bind(this);this.Td=()=>{n.removeEventListener("touchmove",l),n.removeEventListener("touchend",c)},n.addEventListener("touchmove",l,{passive:!1}),n.addEventListener("touchend",c,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,t),240)}const a=this.Wd(t,e);this.$d(a,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=is(e))}bf(t){if(t.button!==0)return;const e=this.Gd.ownerDocument.documentElement;S1()&&e.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=is(t),this.kd&&(this.kd(),this.kd=null);{const a=this.uf.bind(this),l=this.Od.bind(this);this.kd=()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",l)},e.addEventListener("mousemove",a),e.addEventListener("mouseup",l)}if(this.Id=!0,this.Fd(t))return;const n=this.Wd(t);this.Kd(n,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=is(t))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const t=this.Gd.ownerDocument,e=n=>{this.Yd.xf&&(n.composed&&this.Gd.contains(n.composedPath()[0])||n.target&&this.Gd.contains(n.target)||this.Yd.xf())};this.Cd=()=>{t.removeEventListener("touchstart",e)},this.xd=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Jm()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),J4(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",(()=>{}),{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",(t=>this.Rf(t.touches)),{passive:!0}),this.Gd.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const e=T1(t.touches[0],t.touches[1])/this.Dd;this.Yd.kf(this.Rd,e),uo(t)}}),{passive:!1}),this.Gd.addEventListener("touchend",(t=>{this.Rf(t.touches)})))}Rf(t){t.length===1&&(this.Vd=!1),t.length!==2||this.Vd||this.md?this.Df():this.Vf(t)}Vf(t){const e=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Dd=T1(t[0],t[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(t){if(this.yd&&this.yd(),this.Fd(t)||!this.zd)return;const e=this.Wd(t);this.Kd(e,this.Yd.Bf),this.zd=!Jm()}gf(t){const e=Zm(t.touches,ht(this.Ad));if(e===null)return;const n=this.Wd(t,e);this.$d(n,this.Yd.If),this.Sd=!0,this.md=!0}Fd(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:_h(t)<this.Ed+500}$d(t,e){e&&e.call(this.Yd,t)}Kd(t,e){e&&e.call(this.Yd,t)}Wd(t,e){const n=e||t,a=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-a.left,localY:n.clientY-a.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Ef:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Af:t.type,zf:n.target,a_:t.view,Lf:()=>{t.type!=="touchstart"&&uo(t)}}}}function T1(s,t){const e=s.clientX-t.clientX,n=s.clientY-t.clientY;return Math.sqrt(e*e+n*n)}function uo(s){s.cancelable&&s.preventDefault()}function is(s){return{_t:s.pageX,ut:s.pageY}}function _h(s){return s.timeStamp||performance.now()}function Zm(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}class Z4{constructor(t,e,n){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=t,this.Uf=t.$f()[e],this.qf=t.$f()[n],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return Te({width:this.Uf.Gf().width,height:1})}Jf(){return Te({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(t,e,n){const a=this.Jf();t.fillStyle=this.Hf.N().layout.panes.separatorColor,t.fillRect(e,n,a.width,a.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.jf.appendChild(t);const n=document.createElement("div"),a=n.style;a.position="absolute",a.zIndex="50",a.top="-4px",a.height="9px",a.width="100%",a.backgroundColor="",a.cursor="row-resize",this.jf.appendChild(n);const l={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new Cf(n,l,{af:()=>!1,lf:()=>!0}),this.Of={ip:n,tp:t}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(t){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(t){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(t){if(this.Of===null)return;const e=this.Uf.ap().Bo()+this.qf.ap().Bo(),n=e/(this.Uf.Gf().height+this.qf.Gf().height),a=30*n;e<=2*a||(this.Wf={lp:t.pageY,op:this.Uf.ap().Bo(),_p:e-a,up:e,cp:n,dp:a},this.Of.tp.style.display="block")}rp(t){const e=this.Wf;if(e===null)return;const n=(t.pageY-e.lp)*e.cp,a=su(e.op+n,e.dp,e._p);this.Uf.ap().Io(a),this.qf.ap().Io(e.up-a),this.Hf.Qt().Ih()}hp(t){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function tg(s,t){return s.fp-t.fp}function eg(s,t,e){const n=(s.fp-t.fp)/(s.wt-t.wt);return Math.sign(n)*Math.min(Math.abs(n),e)}class tV{constructor(t,e,n,a){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=t,this.xp=e,this.Cp=n,this.Mn=a}Pp(t,e){if(this.pp!==null){if(this.pp.wt===e)return void(this.pp.fp=t);if(Math.abs(this.pp.fp-t)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:e,fp:t}}le(t,e){if(this.pp===null||this.vp===null||e-this.pp.wt>50)return;let n=0;const a=eg(this.pp,this.vp,this.xp),l=tg(this.pp,this.vp),c=[a],f=[l];if(n+=l,this.mp!==null){const g=eg(this.vp,this.mp,this.xp);if(Math.sign(g)===Math.sign(a)){const y=tg(this.vp,this.mp);if(c.push(g),f.push(y),n+=y,this.wp!==null){const b=eg(this.mp,this.wp,this.xp);if(Math.sign(b)===Math.sign(a)){const E=tg(this.mp,this.wp);c.push(b),f.push(E),n+=E}}}}let m=0;for(let g=0;g<c.length;++g)m+=f[g]/n*c[g];Math.abs(m)<this.Sp||(this.gp={fp:t,wt:e},this.bp=m,this.Mp=(function(g,y){const b=Math.log(y);return Math.log(1*b/-g)/b})(Math.abs(m),this.Cp))}Du(t){const e=ht(this.gp),n=t-e.wt;return e.fp+this.bp*(Math.pow(this.Cp,n)-1)/Math.log(this.Cp)}Ru(t){return this.gp===null||this.yp(t)===this.Mp}yp(t){const e=t-ht(this.gp).wt;return Math.min(e,this.Mp)}}class eV{constructor(t,e){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=t,this.Vp=e,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function pa(s,t){const e=ht(s.ownerDocument).createElement("canvas");s.appendChild(e);const n=UI(e,{options:{allowResizeObserver:!0},transform:(a,l)=>({width:Math.max(a.width,l.width),height:Math.max(a.height,l.height)})});return n.resizeCanvasElement(t),n}function ya(s){s.width=1,s.height=1,s.getContext("2d")?.clearRect(0,0,1,1)}function Ug(s,t,e,n){s.ih&&s.ih(t,e,n)}function Dh(s,t,e,n){s.nt(t,e,n)}function Bg(s,t,e,n){const a=s(e,n);for(const l of a){const c=l.Tt(n);c!==null&&t(c)}}function ng(s,t){return e=>(function(n){return n.Ft!==void 0})(e)?(e.Ft()?.ma()??"")!==t?[]:e.ta?.(s)??[]:[]}function x1(s,t,e,n){if(!s.length)return;let a=0;const l=s[0].$t(n,!0);let c=t===1?e/2-(s[0].Fi()-l/2):s[0].Fi()-l/2-e/2;c=Math.max(0,c);for(let f=1;f<s.length;f++){const m=s[f],g=s[f-1],y=g.$t(n,!1),b=m.Fi(),E=g.Fi();if(t===1?b>E-y:b<E+y){const A=E-y*t;m.Wi(A);const x=A-t*y/2;if((t===1?x<0:x>e)&&c>0){const R=t===1?-1-x:x-e,D=Math.min(R,c);for(let B=a;B<s.length;B++)s[B].Wi(s[B].Fi()+t*D);c-=D}}else a=f,c=t===1?E-y-b:b-(E+y)}}class A1{constructor(t,e,n,a){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new Su(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=t,this.Ps=e,this.Ml=e.layout,this.Ju=n,this.jp=a==="left",this.Kp=ng("normal",a),this.Xp=ng("top",a),this.Zp=ng("bottom",a),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=pa(this.jf,Te({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const l=this.Gp.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.Jp=pa(this.jf,Te({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const c=this.Jp.canvasElement;c.style.position="absolute",c.style.zIndex="2",c.style.left="0",c.style.top="0";const f={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new Cf(this.Jp.canvasElement,f,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),ya(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),ya(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const t=this.Ju.N();return this.Wp!==t.k&&(this.Fp.Bn(),this.Wp=t.k),t}nv(){if(this.Yi===null)return 0;let t=0;const e=this.sv(),n=ht(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));n.save();const a=this.Yi.Da();n.font=this.ev(),a.length>0&&(t=Math.max(this.Fp.Vi(n,a[0].Za),this.Fp.Vi(n,a[a.length-1].Za)));const l=this.rv();for(let g=l.length;g--;){const y=this.Fp.Vi(n,l[g].ri());y>t&&(t=y)}const c=this.Yi.zt();if(c!==null&&this.Op!==null&&(f=this.Ps.crosshair).mode!==2&&f.horzLine.visible&&f.horzLine.labelVisible){const g=this.Yi.Ts(1,c),y=this.Yi.Ts(this.Op.height-2,c);t=Math.max(t,this.Fp.Vi(n,this.Yi.Zi(Math.floor(Math.min(g,y))+.11111111111111,c)),this.Fp.Vi(n,this.Yi.Zi(Math.ceil(Math.max(g,y))-.11111111111111,c)))}var f;n.restore();const m=t||34;return jg(Math.ceil(e.S+e.C+e.B+e.I+5+m))}hv(t){this.Op!==null&&ua(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`)}av(){return ht(this.Op).width}_s(t){this.Yi!==t&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=t,t.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const t=this.Pt.ap();this.Pt.qp().Qt().Zo(t,ht(this.Ft()))}lv(t){if(this.Op===null)return;const e={colorSpace:this.Pt.qp().N().layout.colorSpace};if(t!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const a=da(this.Gp,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this._v(l),this.uv(l)})),this.Pt.cv(a,this.Zp),this.dv(a),this.Pt.cv(a,this.Kp),this.fv(a))}this.Jp.applySuggestedBitmapSize();const n=da(this.Jp,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.pv(n),this.Pt.cv(n,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(t,e,n,a){const l=this.Jf();if(l.width>0&&l.height>0&&(t.drawImage(this.Gp.canvasElement,e,n),a)){const c=this.Jp.canvasElement;t.drawImage(c,e,n)}}yt(){this.Yi?.Da()}ep(t){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap();this.Np=!0,e.Uo(n,this.Yi,t.localY)}rp(t){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap(),a=this.Yi;e.$o(n,a,t.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.qp().Qt(),e=this.Pt.ap(),n=this.Yi;this.Np&&(this.Np=!1,t.qo(e,n))}hp(t){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),n=this.Pt.ap();this.Np=!1,e.qo(n,this.Yi)}tv(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(t){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(t){this.vv(0)}rv(){const t=[],e=this.Yi===null?void 0:this.Yi;return(n=>{for(let a=0;a<n.length;++a){const l=n[a].Ws(this.Pt.ap(),e);for(let c=0;c<l.length;c++)t.push(l[c])}})(this.Pt.ap().Dt()),t}_v({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.Pt.ap().Qt(),c=l.$(),f=l.Wc();c===f?Ef(t,0,0,n,a,c):LS(t,0,0,n,a,c,f)}uv({context:t,bitmapSize:e,horizontalPixelRatio:n}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;const a=Math.max(1,Math.floor(this.sv().S*n));let l;l=this.jp?e.width-a:0,t.fillRect(l,0,a,e.height)}dv(t){if(this.Op===null||this.Yi===null)return;const e=this.Yi.Da(),n=this.Yi.N(),a=this.sv(),l=this.jp?this.Op.width-a.C:0;n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((({context:c,horizontalPixelRatio:f,verticalPixelRatio:m})=>{c.fillStyle=n.borderColor;const g=Math.max(1,Math.floor(m)),y=Math.floor(.5*m),b=Math.round(a.C*f);c.beginPath();for(const E of e)c.rect(Math.floor(l*f),Math.round(E.Pa*m)-y,b,g);c.fill()})),t.useMediaCoordinateSpace((({context:c})=>{c.font=this.ev(),c.fillStyle=n.textColor??this.Ml.textColor,c.textAlign=this.jp?"right":"left",c.textBaseline="middle";const f=this.jp?Math.round(l-a.B):Math.round(l+a.C+a.B),m=e.map((g=>this.Fp.Di(c,g.Za)));for(let g=e.length;g--;){const y=e[g];c.fillText(y.Za,f,y.Pa+m[g])}}))}ov(){if(this.Op===null||this.Yi===null)return;let t=this.Op.height/2;const e=[],n=this.Yi.Dt().slice(),a=this.Pt.ap(),l=this.sv();this.Yi===a.$n()&&this.Pt.ap().Dt().forEach((m=>{a.Un(m)&&n.push(m)}));const c=this.Yi.Ma()[0],f=this.Yi;n.forEach((m=>{const g=m.Ws(a,f);g.forEach((y=>{y.Wi(null),y.Hi()&&e.push(y)})),c===m&&g.length>0&&(t=g[0].Ii())})),e.forEach((m=>m.Wi(m.Ii()))),this.Yi.N().alignLabels&&this.mv(e,l,t)}mv(t,e,n){if(this.Op===null)return;const a=t.filter((c=>c.Ii()<=n)),l=t.filter((c=>c.Ii()>n));a.sort(((c,f)=>f.Ii()-c.Ii())),a.length&&l.length&&l.push(a[0]),l.sort(((c,f)=>c.Ii()-f.Ii()));for(const c of t){const f=Math.floor(c.$t(e)/2),m=c.Ii();m>-f&&m<f&&c.Wi(f),m>this.Op.height-f&&m<this.Op.height+f&&c.Wi(this.Op.height-f)}x1(a,1,this.Op.height,e),x1(l,-1,this.Op.height,e)}fv(t){if(this.Op===null)return;const e=this.rv(),n=this.sv(),a=this.jp?"right":"left";e.forEach((l=>{l.Ui()&&l.Tt(ht(this.Yi)).nt(t,n,this.Fp,a)}))}pv(t){if(this.Op===null||this.Yi===null)return;const e=this.Pt.qp().Qt(),n=[],a=this.Pt.ap(),l=e.uc().Ws(a,this.Yi);l.length&&n.push(l);const c=this.sv(),f=this.jp?"right":"left";n.forEach((m=>{m.forEach((g=>{g.Tt(ht(this.Yi)).nt(t,c,this.Fp,f)}))}))}vv(t){this.jf.style.cursor=t===1?"ns-resize":"default"}_l(){const t=this.nv();this.Hp<t&&this.Pt.qp().Qt().Ih(),this.Hp=t}ev(){return Eu(this.Ml.fontSize,this.Ml.fontFamily)}}function nV(s,t){return s.Jh?.(t)??[]}function C1(s,t){return s.Fs?.(t)??[]}function R1(s,t){return s.us?.(t)??[]}function iV(s,t){return s.Xh?.(t)??[]}class Op{constructor(t,e){this.Op=Te({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Ye,this.Cv=new Ye,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=t,this.Vv=e,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(n),this.Gp=pa(n,Te({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const a=this.Gp.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jp=pa(n,Te({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const l=this.Jp.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new Cf(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),ya(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),ya(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return ht(this.Vv)}Lv(t){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=t,this.Vv!==null&&this.Vv.t_().i(Op.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new eV(this.Iv,this.Vp),this.Mv.yt()):(this.Mv?.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const t=this.Vv.Wo();this.wv._s(ht(t))}if(this.gv!==null){const t=this.Vv.Ho();this.gv._s(ht(t))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(t){this.Vv&&this.Vv.Io(t)}sf(t){if(!this.Vv)return;this.Fv();const e=t.localX,n=t.localY;this.Wv(e,n,t)}Sf(t){this.Fv(),this.Hv(),this.Wv(t.localX,t.localY,t)}nf(t){if(!this.Vv)return;this.Fv();const e=t.localX,n=t.localY;this.Wv(e,n,t)}mf(t){this.Vv!==null&&(this.Fv(),this.Uv(t))}Xd(t){this.Vv!==null&&this.$v(this.Cv,t)}qd(t){this.Xd(t)}cf(t){this.Fv(),this.qv(t),this.Wv(t.localX,t.localY,t)}vf(t){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(t))}pf(t){this.Vv!==null&&this.Uv(t)}If(t){if(this.yv=!0,this.kv===null){const e={x:t.localX,y:t.localY};this.jv(e,e,t)}}Bf(t){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(t,e){if(!this.Vp.N().handleScale.pinch)return;const n=5*(e-this.Pv);this.Pv=e,this.ts().bc(t._t,n)}Mf(t){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const e=this.ts().uc();this.kv!==null&&e.Vt()&&(this.Rv={x:e.si(),y:e.ni()},this.kv={x:t.localX,y:t.localY})}_f(t){if(this.Vv===null)return;const e=t.localX,n=t.localY;if(this.kv===null)this.qv(t);else{this.Tv=!1;const a=ht(this.Rv),l=a.x+(e-this.kv.x),c=a.y+(n-this.kv.y);this.Wv(l,c,t)}}ff(t){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(t)}jn(t,e){const n=this.Vv;return n===null?null:$S(n,t,e)}Jv(t,e){ht(e==="left"?this.wv:this.gv).hv(Te({width:t,height:this.Op.height}))}Gf(){return this.Op}hv(t){ua(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.Iv.style.width=t.width+"px",this.Iv.style.height=t.height+"px")}Qv(){const t=ht(this.Vv);t.Fo(t.Wo()),t.Fo(t.Ho());for(const e of t.Ma())if(t.Un(e)){const n=e.Ft();n!==null&&t.Fo(n),e.Ns()}for(const e of t.s_())e.Ns()}Jf(){return this.Gp.bitmapSize}Qf(t,e,n,a){const l=this.Jf();if(l.width>0&&l.height>0&&(t.drawImage(this.Gp.canvasElement,e,n),a)){const c=this.Jp.canvasElement;t!==null&&t.drawImage(c,e,n)}}lv(t){if(t===0||this.Vv===null)return;t>1&&this.Qv(),this.wv!==null&&this.wv.lv(t),this.gv!==null&&this.gv.lv(t);const e={colorSpace:this.Vp.N().layout.colorSpace};if(t!==1){this.Gp.applySuggestedBitmapSize();const a=da(this.Gp,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this._v(l)})),this.Vv&&(this.tm(a,nV),this.im(a),this.tm(a,C1),this.tm(a,R1)))}this.Jp.applySuggestedBitmapSize();const n=da(this.Jp,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.sm(n),this.tm(n,iV),this.tm(n,R1))}nm(){return this.wv}rm(){return this.gv}cv(t,e){this.tm(t,e)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(t){this.$v(this.xv,t)}$v(t,e){const n=e.localX,a=e.localY;t.v()&&t.p(this.ts().Et().cu(n),{x:n,y:a},e)}_v({context:t,bitmapSize:e}){const{width:n,height:a}=e,l=this.ts(),c=l.$(),f=l.Wc();c===f?Ef(t,0,0,n,a,f):LS(t,0,0,n,a,c,f)}im(t){const e=ht(this.Vv),n=e.i_().lr().Tt(e);n!==null&&n.nt(t,!1)}sm(t){this.hm(t,C1,Dh,this.ts().uc())}tm(t,e){const n=ht(this.Vv),a=n.Dt(),l=n.s_();for(const c of l)this.hm(t,e,Ug,c);for(const c of a)this.hm(t,e,Ug,c);for(const c of l)this.hm(t,e,Dh,c);for(const c of a)this.hm(t,e,Dh,c)}hm(t,e,n,a){const l=ht(this.Vv),c=l.Qt().ac(),f=c!==null&&c.n_===a,m=c!==null&&f&&c.e_!==void 0?c.e_.Xn:void 0;Bg(e,(g=>n(g,t,f,m)),a,l)}Ov(){if(this.Vv===null)return;const t=this.Vp,e=this.Vv.Wo().N().visible,n=this.Vv.Ho().N().visible;e||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),n||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const a=t.Qt().Bc();e&&this.wv===null&&(this.wv=new A1(this,t.N(),a,"left"),this.Ev.appendChild(this.wv.Zf())),n&&this.gv===null&&(this.gv=new A1(this,t.N(),a,"right"),this.Av.appendChild(this.gv.Zf()))}am(t){return t.Ef&&this.yv||this.kv!==null}lm(t){return Math.max(0,Math.min(t,this.Op.width-1))}om(t){return Math.max(0,Math.min(t,this.Op.height-1))}Wv(t,e,n){this.ts().Tc(this.lm(t),this.om(e),n,ht(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(t,e,n){this.kv=t,this.Tv=!1,this.Wv(e.x,e.y,n);const a=this.ts().uc();this.Rv={x:a.si(),y:a.ni()}}ts(){return this.Vp.Qt()}Yv(t){if(!this.Sv)return;const e=this.ts(),n=this.ap();if(e.Ko(n,n.ks()),this.bv=null,this.Sv=!1,e.Pc(),this.Dv!==null){const a=performance.now(),l=e.Et();this.Dv.le(l.gu(),a),this.Dv.Ru(a)||e._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ht(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(t){if(this.Vv===null)return;const e=this.ts(),n=e.Et();if(n.Ki())return;const a=this.Vp.N(),l=a.handleScroll,c=a.kineticScroll;if((!l.pressedMouseMove||t.Ef)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Ef))return;const f=this.Vv.ks(),m=performance.now();if(this.bv!==null||this.am(t)||(this.bv={x:t.clientX,y:t.clientY,rd:m,_m:t.localX,um:t.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==t.clientX||this.bv.y!==t.clientY)){if(t.Ef&&c.touch||!t.Ef&&c.mouse){const g=n.mu();this.Dv=new tV(.2/g,7/g,.997,15/g),this.Dv.Pp(n.gu(),this.bv.rd)}else this.Dv=null;f.Ki()||e.Yo(this.Vv,f,t.localY),e.xc(t.localX),this.Sv=!0}this.Sv&&(f.Ki()||e.jo(this.Vv,f,t.localY),e.Cc(t.localX),this.Dv!==null&&this.Dv.Pp(n.gu(),m))}}class M1{constructor(t,e,n,a,l){this.xt=!0,this.Op=Te({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=t==="left",this.Ju=n.Bc,this.Ps=e,this.dm=a,this.fm=l,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=pa(this.jf,Te({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),ya(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(t){ua(this.Op,t)||(this.Op=t,this.Gp.resizeCanvasElement(t),this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.xt=!0)}lv(t){if(t<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const e=da(this.Gp,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((n=>{this._v(n),this.uv(n)}))}Jf(){return this.Gp.bitmapSize}Qf(t,e,n){const a=this.Jf();a.width>0&&a.height>0&&t.drawImage(this.Gp.canvasElement,e,n)}uv({context:t,bitmapSize:e,horizontalPixelRatio:n,verticalPixelRatio:a}){if(!this.dm())return;t.fillStyle=this.Ps.timeScale.borderColor;const l=Math.floor(this.Ju.N().S*n),c=Math.floor(this.Ju.N().S*a),f=this.jp?e.width-l:0;t.fillRect(f,0,l,c)}_v({context:t,bitmapSize:e}){Ef(t,0,0,e.width,e.height,this.fm())}}function Ip(s){return t=>t.ia?.(s)??[]}const sV=Ip("normal"),rV=Ip("top"),aV=Ip("bottom");class oV{constructor(t,e){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=Te({width:0,height:0}),this.gm=new Ye,this.Fp=new Su(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=t,this.o_=e,this.Ps=t.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=pa(this.Sm,Te({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const n=this.Gp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jp=pa(this.Sm,Te({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const a=this.Jp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new Cf(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),ya(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),ya(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(t){if(this.wm)return;this.wm=!0;const e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.Mc(t.localX)}Mf(t){this.Sf(t)}xf(){const t=this.Vp.Qt();!t.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&t.kc())}cf(t){const e=this.Vp.Qt();!e.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&e.yc(t.localX)}_f(t){this.cf(t)}vf(){this.wm=!1;const t=this.Vp.Qt();t.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||t.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(t,e,n){ua(this.Op,t)||(this.Op=t,this.Up=!0,this.Gp.resizeCanvasElement(t),this.Jp.resizeCanvasElement(t),this.Up=!1,this.jf.style.width=`${t.width}px`,this.jf.style.height=`${t.height}px`,this.gm.p(t)),this.pm!==null&&this.pm.hv(Te({width:e,height:t.height})),this.vm!==null&&this.vm.hv(Te({width:n,height:t.height}))}Tm(){const t=this.Rm();return Math.ceil(t.S+t.C+t.P+t.A+t.V+t.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(t,e,n,a){const l=this.Jf();if(l.width>0&&l.height>0&&(t.drawImage(this.Gp.canvasElement,e,n),a)){const c=this.Jp.canvasElement;t.drawImage(c,e,n)}}lv(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.Gp.applySuggestedBitmapSize();const a=da(this.Gp,e);a!==null&&(a.useBitmapCoordinateSpace((l=>{this._v(l),this.uv(l),this.Vm(a,aV)})),this.dv(a),this.Vm(a,sV)),this.pm!==null&&this.pm.lv(t),this.vm!==null&&this.vm.lv(t)}this.Jp.applySuggestedBitmapSize();const n=da(this.Jp,e);n!==null&&(n.useBitmapCoordinateSpace((({context:a,bitmapSize:l})=>{a.clearRect(0,0,l.width,l.height)})),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],n),this.Vm(n,rV))}Vm(t,e){const n=this.Vp.Qt().js();for(const a of n)Bg(e,(l=>Ug(l,t,!1,void 0)),a,void 0);for(const a of n)Bg(e,(l=>Dh(l,t,!1,void 0)),a,void 0)}_v({context:t,bitmapSize:e}){Ef(t,0,0,e.width,e.height,this.Vp.Qt().Wc())}uv({context:t,bitmapSize:e,verticalPixelRatio:n}){if(this.Vp.N().timeScale.borderVisible){t.fillStyle=this.Im();const a=Math.max(1,Math.floor(this.Rm().S*n));t.fillRect(0,0,e.width,a)}}dv(t){const e=this.Vp.Qt().Et(),n=e.Da();if(!n||n.length===0)return;const a=this.o_.maxTickMarkWeight(n),l=this.Rm(),c=e.N();c.borderVisible&&c.ticksVisible&&t.useBitmapCoordinateSpace((({context:f,horizontalPixelRatio:m,verticalPixelRatio:g})=>{f.strokeStyle=this.Im(),f.fillStyle=this.Im();const y=Math.max(1,Math.floor(m)),b=Math.floor(.5*m);f.beginPath();const E=Math.round(l.C*g);for(let A=n.length;A--;){const x=Math.round(n[A].coord*m);f.rect(x-b,0,y,E)}f.fill()})),t.useMediaCoordinateSpace((({context:f})=>{const m=l.S+l.C+l.A+l.P/2;f.textAlign="center",f.textBaseline="middle",f.fillStyle=this.H(),f.font=this.ev();for(const g of n)if(g.weight<a){const y=g.needAlignCoordinate?this.Em(f,g.coord,g.label):g.coord;f.fillText(g.label,y,m)}this.Vp.N().timeScale.allowBoldLabels&&(f.font=this.Am());for(const g of n)if(g.weight>=a){const y=g.needAlignCoordinate?this.Em(f,g.coord,g.label):g.coord;f.fillText(g.label,y,m)}}))}Em(t,e,n){const a=this.Fp.Vi(t,n),l=a/2,c=Math.floor(e-l)+.5;return c<0?e+=Math.abs(0-c):c+a>this.Op.width&&(e-=Math.abs(this.Op.width-(c+a))),e}Bm(t,e){const n=this.Rm();for(const a of t)for(const l of a.cs())l.Tt().nt(e,n)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return Eu(this.F(),this.Ps.fontFamily)}Am(){return Eu(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Su,Dm:0});const t=this.M,e=this.ev();if(t.k!==e){const n=this.F();t.P=n,t.k=e,t.A=3*n/12,t.V=3*n/12,t.Ji=9*n/12,t.L=0,t.Dm=4*n/12,t.Gi.Bn()}return this.M}vv(t){this.jf.style.cursor=t===1?"ew-resize":"default"}xm(){const t=this.Vp.Qt(),e=t.N();e.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),e.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const n={Bc:this.Vp.Qt().Bc()},a=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,l=()=>t.Wc();e.leftPriceScale.visible&&this.pm===null&&(this.pm=new M1("left",e,n,a,l),this.Mm.appendChild(this.pm.Zf())),e.rightPriceScale.visible&&this.vm===null&&(this.vm=new M1("right",e,n,a,l),this.bm.appendChild(this.vm.Zf()))}}const lV=!!Oo&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((s=>s.brand.includes("Chromium")))&&!!Oo&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class uV{constructor(t,e,n){var a;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Ye,this.Cv=new Ye,this.Xu=new Ye,this.Um=null,this.$m=null,this.Dp=t,this.Ps=e,this.o_=n,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(a=this.kp).style.userSelect="none",a.style.webkitUserSelect="none",a.style.msUserSelect="none",a.style.MozUserSelect="none",a.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),ig(this.Ps)&&this.Km(!0),this.ts=new G4(this.Gu.bind(this),this.Ps,n),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new oV(this,this.o_),this.qm.appendChild(this.Zm.Zf());const l=e.autoSize&&this.Gm();let c=this.Ps.width,f=this.Ps.height;if(l||c===0||f===0){const m=t.getBoundingClientRect();c=c||m.width,f=f||m.height}this.Jm(c,f),this.Qm(),t.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const t of this.zm)this.qm.removeChild(t.Zf()),t.Xv().u(this),t.Zv().u(this),t.m();this.zm=[];for(const t of this.Lm)this.sw(t);this.Lm=[],ht(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(t,e,n=!1){if(this.il===e&&this.Mo===t)return;const a=(function(f){const m=Math.floor(f.width),g=Math.floor(f.height);return Te({width:m-m%2,height:g-g%2})})(Te({width:t,height:e}));this.il=a.height,this.Mo=a.width;const l=this.il+"px",c=this.Mo+"px";ht(this.kp).style.height=l,ht(this.kp).style.width=c,this.qm.style.height=l,this.qm.style.width=c,n?this.ew(bn.gn(),performance.now()):this.ts.Ih()}lv(t){t===void 0&&(t=bn.gn());for(let e=0;e<this.zm.length;e++)this.zm[e].lv(t.en(e).tn);this.Ps.timeScale.visible&&this.Zm.lv(t.nn())}hr(t){const e=ig(this.Ps);this.ts.hr(t);const n=ig(this.Ps);n!==e&&this.Km(n),t.layout?.panes&&this.rw(),this.tw(),this.hw(t)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(t=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const e=this.lw(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const a=ht(n.getContext("2d"));return this.lw(a,t),n}ow(t){return t==="left"&&!this._w()||t==="right"&&!this.uw()||this.zm.length===0?0:ht(t==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(t){this.$m=t,this.$m?this.ip().style.setProperty("cursor",t):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(t){return Hn(this.zm[t]).Gf()}rw(){this.Lm.forEach((t=>{t.yt()}))}hw(t){(t.autoSize!==void 0||!this.Um||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Um&&this.Gm(),t.autoSize===!1&&this.Um!==null&&this.nw(),t.autoSize||t.width===void 0&&t.height===void 0||this.Jm(t.width||this.Mo,t.height||this.il))}lw(t,e){let n=0,a=0;const l=this.zm[0],c=(m,g)=>{let y=0;for(let b=0;b<this.zm.length;b++){const E=this.zm[b],A=ht(m==="left"?E.nm():E.rm()),x=A.Jf();if(t!==null&&A.Qf(t,g,y,e),y+=x.height,b<this.zm.length-1){const R=this.Lm[b],D=R.Jf();t!==null&&R.Qf(t,g,y),y+=D.height}}};this._w()&&(c("left",0),n+=ht(l.nm()).Jf().width);for(let m=0;m<this.zm.length;m++){const g=this.zm[m],y=g.Jf();if(t!==null&&g.Qf(t,n,a,e),a+=y.height,m<this.zm.length-1){const b=this.Lm[m],E=b.Jf();t!==null&&b.Qf(t,n,a),a+=E.height}}n+=l.Jf().width,this.uw()&&(c("right",n),n+=ht(l.rm()).Jf().width);const f=(m,g,y)=>{ht(m==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(ht(t),g,y)};if(this.Ps.timeScale.visible){const m=this.Zm.Jf();if(t!==null){let g=0;this._w()&&(f("left",g,a),g=ht(l.nm()).Jf().width),this.Zm.Qf(t,g,a,e),g+=m.width,this.uw()&&f("right",g,a)}a+=m.height}return Te({width:n,height:a})}mw(){let t=0,e=0,n=0;for(const D of this.zm)this._w()&&(e=Math.max(e,ht(D.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(n=Math.max(n,ht(D.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),t+=D.Bo();e=jg(e),n=jg(n);const a=this.Mo,l=this.il,c=Math.max(a-e-n,0),f=1*this.Lm.length,m=this.Ps.timeScale.visible;let g=m?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var y;g=(y=g)+y%2;const b=f+g,E=l<b?0:l-b,A=E/t;let x=0;const R=window.devicePixelRatio||1;for(let D=0;D<this.zm.length;++D){const B=this.zm[D];B.Lv(this.ts.$s()[D]);let Z=0,rt=0;rt=D===this.zm.length-1?Math.ceil((E-x)*R)/R:Math.round(B.Bo()*A*R)/R,Z=Math.max(rt,2),x+=Z,B.hv(Te({width:c,height:Z})),this._w()&&B.Jv(e,"left"),this.uw()&&B.Jv(n,"right"),B.ap()&&this.ts.dc(B.ap(),Z)}this.Zm.km(Te({width:m?c:0,height:g}),m?e:0,m?n:0),this.ts.Eo(c),this.Nm!==e&&(this.Nm=e),this.Fm!==n&&(this.Fm=n)}Km(t){t?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return lV?1/window.devicePixelRatio:1}jm(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.ww(t),n=e*t.deltaX/100,a=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),a!==0&&this.Ps.handleScale.mouseWheel){const l=Math.sign(a)*Math.min(1,Math.abs(a)),c=t.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(c,l)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*n)}ew(t,e){const n=t.nn();n===3&&this.gw(),n!==3&&n!==2||(this.Mw(t),this.bw(t,e),this.Zm.yt(),this.zm.forEach((a=>{a.Nv()})),this.Wm?.nn()===3&&(this.Wm.vn(t),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,e),t=this.Wm,this.Wm=null)),this.lv(t)}bw(t,e){for(const n of t.pn())this.mn(n,e)}Mw(t){const e=this.ts.$s();for(let n=0;n<e.length;n++)t.en(n).sn&&e[n].Go()}mn(t,e){const n=this.ts.Et();switch(t.an){case 0:n.Au();break;case 1:n.zu(t.Wt);break;case 2:n.dn(t.Wt);break;case 3:n.fn(t.Wt);break;case 4:n.Su();break;case 5:t.Wt.Ru(e)||n.fn(t.Wt.Du(e))}}Gu(t){this.Wm!==null?this.Wm.vn(t):this.Wm=t,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame((e=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const n=this.Wm;this.Wm=null,this.ew(n,e);for(const a of n.pn())if(a.an===5&&!a.Wt.Ru(e)){this.Qt()._n(a.Wt);break}}})))}gw(){this.Qm()}sw(t){this.qm.removeChild(t.Zf()),t.m()}Qm(){const t=this.ts.$s(),e=t.length,n=this.zm.length;for(let a=e;a<n;a++){const l=Hn(this.zm.pop());this.qm.removeChild(l.Zf()),l.Xv().u(this),l.Zv().u(this),l.m();const c=this.Lm.pop();c!==void 0&&this.sw(c)}for(let a=n;a<e;a++){const l=new Op(this,t[a]);if(l.Xv().i(this.Sw.bind(this,l),this),l.Zv().i(this.xw.bind(this,l),this),this.zm.push(l),a>0){const c=new Z4(this,a-1,a);this.Lm.push(c),this.qm.insertBefore(c.Zf(),this.Zm.Zf())}this.qm.insertBefore(l.Zf(),this.Zm.Zf())}for(let a=0;a<e;a++){const l=t[a],c=this.zm[a];c.ap()!==l?c.Lv(l):c.zv()}this.tw(),this.mw()}Cw(t,e,n,a){const l=new Map;t!==null&&this.ts.js().forEach((b=>{const E=b.Xs().Fr(t);E!==null&&l.set(b,E)}));let c;if(t!==null){const b=this.ts.Et().ss(t)?.originalTime;b!==void 0&&(c=b)}const f=this.Qt().ac(),m=f!==null&&f.n_ instanceof Af?f.n_:void 0,g=f!==null&&f.e_!==void 0?f.e_.Kn:void 0,y=this.Pw(a);return{yw:c,Re:t??void 0,kw:e??void 0,Tw:y!==-1?y:void 0,Rw:m,Dw:l,Vw:g,Bw:n??void 0}}Pw(t){let e=-1;if(t)e=this.zm.indexOf(t);else{const n=this.Qt().uc().Us();n!==null&&(e=this.Qt().$s().indexOf(n))}return e}Sw(t,e,n,a){this.xv.p((()=>this.Cw(e,n,a,t)))}xw(t,e,n,a){this.Cv.p((()=>this.Cw(e,n,a,t)))}Xm(t,e,n){this.dw(this.Qt().ac()?.h_??null),this.Xu.p((()=>this.Cw(t,e,n)))}tw(){const t=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=t}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.Jm(e.contentRect.width,e.contentRect.height)})),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function ig(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function cV(s){return s.open===void 0&&s.value===void 0}function hV(s){return(function(t){return t.open!==void 0})(s)||(function(t){return t.value!==void 0})(s)}function N1(s,t,e,n){const a=e.value,l={Re:t,wt:s,Wt:[a,a,a,a],yw:n};return e.color!==void 0&&(l.R=e.color),l}function fV(s,t,e,n){const a=e.value,l={Re:t,wt:s,Wt:[a,a,a,a],yw:n};return e.lineColor!==void 0&&(l.vt=e.lineColor),e.topColor!==void 0&&(l.mr=e.topColor),e.bottomColor!==void 0&&(l.wr=e.bottomColor),l}function dV(s,t,e,n){const a=e.value,l={Re:t,wt:s,Wt:[a,a,a,a],yw:n};return e.topLineColor!==void 0&&(l.gr=e.topLineColor),e.bottomLineColor!==void 0&&(l.Mr=e.bottomLineColor),e.topFillColor1!==void 0&&(l.br=e.topFillColor1),e.topFillColor2!==void 0&&(l.Sr=e.topFillColor2),e.bottomFillColor1!==void 0&&(l.Cr=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(l.Pr=e.bottomFillColor2),l}function mV(s,t,e,n){const a={Re:t,wt:s,Wt:[e.open,e.high,e.low,e.close],yw:n};return e.color!==void 0&&(a.R=e.color),a}function gV(s,t,e,n){const a={Re:t,wt:s,Wt:[e.open,e.high,e.low,e.close],yw:n};return e.color!==void 0&&(a.R=e.color),e.borderColor!==void 0&&(a.Ht=e.borderColor),e.wickColor!==void 0&&(a.vr=e.wickColor),a}function pV(s,t,e,n,a){const l=Hn(a)(e),c=Math.max(...l),f=Math.min(...l),m=l[l.length-1],g=[m,c,f,m],{time:y,color:b,...E}=e;return{Re:t,wt:s,Wt:g,yw:n,se:E,R:b}}function Hl(s){return s.Wt!==void 0}function D1(s,t){return t.customValues!==void 0&&(s.Iw=t.customValues),s}function na(s){return(t,e,n,a,l,c)=>(function(f,m){return m?m(f):cV(f)})(n,c)?D1({wt:t,Re:e,yw:a},n):D1(s(t,e,n,a,l),n)}function O1(s){return{Candlestick:na(gV),Bar:na(mV),Area:na(fV),Baseline:na(dV),Histogram:na(N1),Line:na(N1),Custom:na(pV)}[s]}function I1(s){return{Re:0,Ew:new Map,Hh:s}}function V1(s,t){if(s!==void 0&&s.length!==0)return{Aw:t.key(s[0].wt),zw:t.key(s[s.length-1].wt)}}function P1(s){let t;return s.forEach((e=>{t===void 0&&(t=e.yw)})),Hn(t)}class yV{constructor(t){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=t}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(t,e){let n=this.Lw.size!==0,a=!1;const l=this.Ow.get(t);if(l!==void 0)if(this.Ow.size===1)n=!1,a=!0,this.Lw.clear();else for(const m of this.Fw)m.pointData.Ew.delete(t)&&(a=!0);let c=[];if(e.length!==0){const m=e.map((A=>A.time)),g=this.o_.createConverterToInternalObj(e),y=O1(t.Rr()),b=t.ca(),E=t.fa();c=e.map(((A,x)=>{const R=g(A.time),D=this.o_.key(R);let B=this.Lw.get(D);B===void 0&&(B=I1(R),this.Lw.set(D,B),a=!0);const Z=y(R,B.Re,A,m[x],b,E);return B.Ew.set(t,Z),Z}))}n&&this.Hw(),this.Uw(t,c);let f=-1;if(a){const m=[];this.Lw.forEach((g=>{m.push({timeWeight:0,time:g.Hh,pointData:g,originalTime:P1(g.Ew)})})),m.sort(((g,y)=>this.o_.key(g.time)-this.o_.key(y.time))),f=this.$w(m)}return this.qw(t,f,(function(m,g,y){const b=V1(m,y),E=V1(g,y);if(b!==void 0&&E!==void 0)return{Yw:!1,zh:b.zw>=E.zw&&b.Aw>=E.Aw}})(this.Ow.get(t),l,this.o_))}Ac(t){return this.Ww(t,[])}jw(t,e,n){const a=e;(function(D){D.yw===void 0&&(D.yw=D.time)})(a),this.o_.preprocessData(e);const l=this.o_.createConverterToInternalObj([e])(e.time),c=this.Nw.get(t);if(!n&&c!==void 0&&this.o_.key(l)<this.o_.key(c))throw new Error(`Cannot update oldest data, last time=${c}, new time=${l}`);let f=this.Lw.get(this.o_.key(l));if(n&&f===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const m=f===void 0;f===void 0&&(f=I1(l),this.Lw.set(this.o_.key(l),f));const g=O1(t.Rr()),y=t.ca(),b=t.fa(),E=g(l,f.Re,e,a.yw,y,b);f.Ew.set(t,E),n?this.Kw(t,E,f.Re):this.Xw(t,E);const A={zh:Hl(E),Yw:n};if(!m)return this.qw(t,-1,A);const x={timeWeight:0,time:f.Hh,pointData:f,originalTime:P1(f.Ew)},R=Do(this.Fw,this.o_.key(x.time),((D,B)=>this.o_.key(D.time)<B));this.Fw.splice(R,0,x);for(let D=R;D<this.Fw.length;++D)wh(this.Fw[D].pointData,D);return this.o_.fillWeightsForPoints(this.Fw,R),this.qw(t,R,A)}Zw(t,e){const n=this.Ow.get(t);if(n===void 0||e<=0)return[[],this.Gw()];e=Math.min(e,n.length);const a=n.splice(-e).reverse();n.length===0?this.Nw.delete(t):this.Nw.set(t,n[n.length-1].wt);for(const l of a){const c=this.Lw.get(this.o_.key(l.wt));if(c&&(c.Ew.delete(t),c.Ew.size===0)){this.Lw.delete(this.o_.key(c.Hh)),this.Fw.splice(c.Re,1);for(let f=c.Re;f<this.Fw.length;++f)wh(this.Fw[f].pointData,f)}}return[a,this.qw(t,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(t,e){let n=this.Ow.get(t);n===void 0&&(n=[],this.Ow.set(t,n));const a=n.length!==0?n[n.length-1]:null;a===null||this.o_.key(e.wt)>this.o_.key(a.wt)?Hl(e)&&n.push(e):Hl(e)?n[n.length-1]=e:n.splice(-1,1),this.Nw.set(t,e.wt)}Kw(t,e,n){const a=this.Ow.get(t);if(a===void 0)return;const l=Do(a,n,((c,f)=>c.Re<f));Hl(e)?a[l]=e:a.splice(l,1)}Uw(t,e){e.length!==0?(this.Ow.set(t,e.filter(Hl)),this.Nw.set(t,e[e.length-1].wt)):(this.Ow.delete(t),this.Nw.delete(t))}Hw(){for(const t of this.Fw)t.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(t.time))}$w(t){let e=-1;for(let n=0;n<this.Fw.length&&n<t.length;++n){const a=this.Fw[n],l=t[n];if(this.o_.key(a.time)!==this.o_.key(l.time)){e=n;break}l.timeWeight=a.timeWeight,wh(l.pointData,n)}if(e===-1&&this.Fw.length!==t.length&&(e=Math.min(this.Fw.length,t.length)),e===-1)return-1;for(let n=e;n<t.length;++n)wh(t[n].pointData,n);return this.o_.fillWeightsForPoints(t,e),this.Fw=t,e}Jw(){if(this.Ow.size===0)return null;let t=0;return this.Ow.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Re))})),t}qw(t,e,n){const a=this.Gw();if(e!==-1)this.Ow.forEach(((l,c)=>{a.Oo.set(c,{se:l,Qw:c===t?n:void 0})})),this.Ow.has(t)||a.Oo.set(t,{se:[],Qw:n}),a.Et.tg=this.Fw,a.Et.ig=e;else{const l=this.Ow.get(t);a.Oo.set(t,{se:l||[],Qw:n})}return a}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function wh(s,t){s.Re=t,s.Ew.forEach((e=>{e.Re=t}))}function vV(s,t){return s.wt<t}function bV(s,t){return t<s.wt}function ZS(s,t,e){const n=t.Uh(),a=t.bi(),l=Do(s,n,vV),c=HS(s,a,bV);if(!e)return{from:l,to:c};let f=l,m=c;return l>0&&l<s.length&&s[l].wt>=n&&(f=l-1),c>0&&c<s.length&&s[c-1].wt<=a&&(m=c+1),{from:f,to:m}}class Vp{constructor(t,e,n){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=t,this.Qn=e,this.ag=n}yt(t){this.sg=!0,t==="data"&&(this.ng=!0),t==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map((t=>({...t,...this.Jn.Rh().Dr(t.wt)})))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const t=this.Jn.Ft(),e=this.Qn.Et();if(this.ug(),e.Ki()||t.Ki())return;const n=e.Pe();if(n===null||this.Jn.Xs().zr()===0)return;const a=this.Jn.zt();a!==null&&(this.hg=ZS(this.rg,n,this.ag),this.fg(t,e,a.Wt),this.pg())}}class _V{constructor(t,e){this.vg=t,this.Yi=e}nt(t,e,n){this.vg.draw(t,this.Yi,e,n)}}class wV extends Vp{constructor(t,e,n){super(t,e,!1),this.sh=n,this.og=new _V(this.sh.renderer(),(a=>{const l=t.zt();return l===null?null:t.Ft().Nt(a,l.Wt)}))}da(t){return this.sh.priceValueBuilder(t)}pa(t){return this.sh.isWhitespace(t)}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((e=>({wt:e.Re,_t:NaN,...t.Dr(e.Re),mg:e.se})))}fg(t,e){e.uu(this.rg,wu(this.hg))}pg(){this.sh.update({bars:this.rg.map(EV),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function EV(s){return{x:s._t,time:s.wt,originalData:s.mg,barColor:s.cr}}const SV={color:"#2196f3"},TV=(s,t,e)=>{const n=gr(e);return new wV(s,t,n)};function Pp(s){const t={value:s.Wt[3],time:s.yw};return s.Iw!==void 0&&(t.customValues=s.Iw),t}function k1(s){const t=Pp(s);return s.R!==void 0&&(t.color=s.R),t}function xV(s){const t=Pp(s);return s.vt!==void 0&&(t.lineColor=s.vt),s.mr!==void 0&&(t.topColor=s.mr),s.wr!==void 0&&(t.bottomColor=s.wr),t}function AV(s){const t=Pp(s);return s.gr!==void 0&&(t.topLineColor=s.gr),s.Mr!==void 0&&(t.bottomLineColor=s.Mr),s.br!==void 0&&(t.topFillColor1=s.br),s.Sr!==void 0&&(t.topFillColor2=s.Sr),s.Cr!==void 0&&(t.bottomFillColor1=s.Cr),s.Pr!==void 0&&(t.bottomFillColor2=s.Pr),t}function tT(s){const t={open:s.Wt[0],high:s.Wt[1],low:s.Wt[2],close:s.Wt[3],time:s.yw};return s.Iw!==void 0&&(t.customValues=s.Iw),t}function CV(s){const t=tT(s);return s.R!==void 0&&(t.color=s.R),t}function RV(s){const t=tT(s),{R:e,Ht:n,vr:a}=s;return e!==void 0&&(t.color=e),n!==void 0&&(t.borderColor=n),a!==void 0&&(t.wickColor=a),t}function Oh(s){return{Area:xV,Line:k1,Baseline:AV,Histogram:k1,Bar:CV,Candlestick:RV,Custom:MV}[s]}function MV(s){const t=s.yw;return{...s.se,time:t}}const NV={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},DV={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},OV={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:zS,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},sg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},IV={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function z1(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:OV,crosshair:NV,grid:DV,overlayPriceScales:{...sg},leftPriceScale:{...sg,visible:!1},rightPriceScale:{...sg,visible:!0},timeScale:IV,localization:{locale:Oo?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class eT{constructor(t,e,n){this.Hf=t,this.wg=e,this.gg=n??0}applyOptions(t){this.Hf.Qt().oc(this.wg,t,this.gg)}options(){return this.Yi().N()}width(){return Tf(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Fl(new In(t.from,t.to))}getVisibleRange(){let t,e,n=this.Yi().Qe();if(n===null)return null;if(this.Yi().Ja()){const a=this.Yi().fo(),l=XS(a);n=yo(n,this.Yi().tl()),t=Number((Math.round(n.$e()/a)*a).toFixed(l)),e=Number((Math.round(n.qe()/a)*a).toFixed(l))}else t=n.$e(),e=n.qe();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return ht(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class VV{constructor(t,e,n,a){this.Hf=t,this.Pt=n,this.Mg=e,this.bg=a}getHeight(){return this.Pt.$t()}setHeight(t){const e=this.Hf.Qt(),n=e.Uc(this.Pt);e.vc(n,t)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(t){this.Pt.Io(t),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(t){const e=this.paneIndex();e!==t&&(wn(t>=0&&t<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(e,t))}getSeries(){return this.Pt.Oo().map((t=>this.Mg(t)))??[]}getHTMLElement(){const t=this.Hf.$f();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].Zf():null}attachPrimitive(t){this.Pt._a(t),t.attached&&t.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(t){this.Pt.ua(t)}priceScale(t){if(this.Pt.Do(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new eT(this.Hf,t,this.paneIndex())}setPreserveEmptyPane(t){this.Pt.zo(t)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(t,e={},n=0){return this.bg.addCustomSeries(t,e,n)}addSeries(t,e={}){return this.bg.addSeries(t,e,this.paneIndex())}}const PV={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class L1{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}Sg(){return this.ir}}class kV{constructor(t,e,n,a,l,c){this.xg=new Ye,this.Jn=t,this.Cg=e,this.Pg=n,this.o_=l,this.bg=a,this.yg=c}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(t){const e=this.Jn.zt();return e===null?null:this.Jn.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.Jn.zt();return e===null?null:this.Jn.Ft().Ts(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new Eo(new wo(t.from,t.to)).y_(),n=this.Jn.Xs();if(n.Ki())return null;const a=n.Fr(e.Uh(),1),l=n.Fr(e.bi(),-1),c=ht(n.Lr()),f=ht(n.Ks());if(a!==null&&l!==null&&a.Re>l.Re)return{barsBefore:t.from-c,barsAfter:f-t.to};const m={barsBefore:a===null||a.Re===c?t.from-c:a.Re-c,barsAfter:l===null||l.Re===f?f-t.to:f-l.Re};return a!==null&&l!==null&&(m.from=a.yw,m.to=l.yw),m}setData(t){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,t),this.Tg("full")}update(t,e=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,t,e),this.Tg("update")}pop(t=1){const e=this.Cg.Dg(this.Jn,t);e.length!==0&&this.Tg("update");const n=Oh(this.seriesType());return e.map((a=>n(a)))}dataByIndex(t,e){const n=this.Jn.Xs().Fr(t,e);return n===null?null:Oh(this.seriesType())(n)}data(){const t=Oh(this.seriesType());return this.Jn.Xs().Hr().map((e=>t(e)))}subscribeDataChanged(t){this.xg.i(t)}unsubscribeDataChanged(t){this.xg._(t)}applyOptions(t){this.Jn.hr(t)}options(){return Ms(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(t){const e=ni(Ms(PV),t),n=this.Jn.Oh(e);return new L1(n)}removePriceLine(t){this.Jn.Nh(t.Sg())}priceLines(){return this.Jn.Fh().map((t=>new L1(t)))}seriesType(){return this.Jn.Rr()}lastValueData(t){const e=this.Jn.ye(t);return e.ke?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.Jn._a(t),t.attached&&t.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(t){this.Jn.ua(t),t.detached&&t.detached(),this.Jn.Qt().Ih()}getPane(){const t=this.Jn,e=ht(this.Jn.Qt().Hn(t));return this.yg(e)}moveToPane(t){this.Jn.Qt().Nc(this.Jn,t)}seriesOrder(){const t=this.Jn.Qt().Hn(this.Jn);return t===null?-1:t.Oo().indexOf(this.Jn)}setSeriesOrder(t){const e=this.Jn.Qt().Hn(this.Jn);e!==null&&e.Qo(this.Jn,t)}Tg(t){this.xg.v()&&this.xg.p(t)}}class zV{constructor(t,e,n){this.Vg=new Ye,this.z_=new Ye,this.gm=new Ye,this.ts=t,this.uh=t.Et(),this.Zm=e,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=n}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(t,e){e?this.uh.Tu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const t=this.uh.nu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.o_.convertHorzItemToInternal(t.from),to:this.o_.convertHorzItemToInternal(t.to)},n=this.uh.au(e);this.ts.Lc(n)}getVisibleLogicalRange(){const t=this.uh.su();return t===null?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){wn(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Lc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(t){const e=this.ts.Et();return e.Ki()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.cu(t)}timeToIndex(t,e){const n=this.o_.convertHorzItemToInternal(t);return this.uh.Q_(n,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.uh.qt(e)}coordinateToTime(t){const e=this.ts.Et(),n=e.cu(t),a=e.ss(n);return a===null?null:a.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(t){this.Vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.Vg._(t)}subscribeVisibleLogicalRangeChange(t){this.z_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.z_._(t)}subscribeSizeChange(t){this.gm.i(t)}unsubscribeSizeChange(t){this.gm._(t)}applyOptions(t){this.uh.hr(t)}options(){return{...Ms(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(t){this.gm.p(t.width,t.height)}}function j1(s){return(function(t){if(mh(t.handleScale)){const n=t.handleScale;t.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:a}=t.handleScale;mh(n)&&(t.handleScale.axisPressedMouseMove={time:n,price:n}),mh(a)&&(t.handleScale.axisDoubleClickReset={time:a,price:a})}const e=t.handleScroll;mh(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(s),s}class LV{constructor(t,e,n){this.Ag=new Map,this.zg=new Map,this.Lg=new Ye,this.Og=new Ye,this.Ng=new Ye,this.qu=new WeakMap,this.Fg=new yV(e);const a=n===void 0?Ms(z1()):ni(Ms(z1()),j1(n));this.Wg=e,this.Hf=new uV(t,a,e),this.Hf.Xv().i((c=>{this.Lg.v()&&this.Lg.p(this.Hg(c()))}),this),this.Hf.Zv().i((c=>{this.Og.v()&&this.Og.p(this.Hg(c()))}),this),this.Hf.cc().i((c=>{this.Ng.v()&&this.Ng.p(this.Hg(c()))}),this);const l=this.Hf.Qt();this.Ug=new zV(l,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(t,e,n){this.autoSizeActive()||this.Hf.Jm(t,e,n)}addCustomSeries(t,e={},n=0){const a=(l=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...SV,...l.defaultOptions()},$g:TV,qg:l}))(gr(t));return this.Yg(a,e,n)}addSeries(t,e={},n=0){return this.Yg(t,e,n)}removeSeries(t){const e=Hn(this.Ag.get(t)),n=this.Fg.Ac(e);this.Hf.Qt().Ac(e),this.jg(n),this.Ag.delete(t),this.zg.delete(e)}kg(t,e){this.jg(this.Fg.Ww(t,e))}Rg(t,e,n){this.jg(this.Fg.jw(t,e,n))}Dg(t,e){const[n,a]=this.Fg.Zw(t,e);return n.length!==0&&this.jg(a),n}subscribeClick(t){this.Lg.i(t)}unsubscribeClick(t){this.Lg._(t)}subscribeCrosshairMove(t){this.Ng.i(t)}unsubscribeCrosshairMove(t){this.Ng._(t)}subscribeDblClick(t){this.Og.i(t)}unsubscribeDblClick(t){this.Og._(t)}priceScale(t,e=0){return new eT(this.Hf,t,e)}timeScale(){return this.Ug}applyOptions(t){this.Hf.hr(j1(t))}options(){return this.Hf.N()}takeScreenshot(t=!1,e=!1){let n,a;try{e||(n=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),a=this.Hf.aw(t)}finally{e||n===void 0||this.Hf.Qt().hr({crosshair:{mode:n}})}return a}addPane(t=!1){const e=this.Hf.Qt().$c();return e.zo(t),this.Kg(e)}removePane(t){this.Hf.Qt().fc(t)}swapPanes(t,e){this.Hf.Qt().mc(t,e)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map((t=>this.Kg(t)))}paneSize(t=0){const e=this.Hf.pw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,n){const a=this.Ag.get(n);if(a===void 0)return;const l=this.Hf.Qt().Hn(a);l!==null&&this.Hf.Qt().Rc(t,e,l)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(t,e={},n=0){wn(t.$g!==void 0),(function(m){if(m===void 0||m.type==="custom")return;const g=m;g.minMove!==void 0&&g.precision===void 0&&(g.precision=XS(g.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(m){m.borderColor!==void 0&&(m.borderUpColor=m.borderColor,m.borderDownColor=m.borderColor),m.wickColor!==void 0&&(m.wickUpColor=m.wickColor,m.wickDownColor=m.wickColor)})(e);const a=ni(Ms(PS),Ms(t.defaultOptions),e),l=t.$g,c=new Af(this.Hf.Qt(),t.type,a,l,t.qg);this.Hf.Qt().Ic(c,n);const f=new kV(c,this,this,this,this.Wg,(m=>this.Kg(m)));return this.Ag.set(f,c),this.zg.set(c,f),f}jg(t){const e=this.Hf.Qt();e.Vc(t.Et._u,t.Et.tg,t.Et.ig),t.Oo.forEach(((n,a)=>a.ht(n.se,n.Qw))),e.Et().K_(),e.vu()}Xg(t){return Hn(this.zg.get(t))}Hg(t){const e=new Map;t.Dw.forEach(((a,l)=>{const c=l.Rr(),f=Oh(c)(a);if(c!=="Custom")wn(hV(f));else{const m=l.fa();wn(!m||m(f)===!1)}e.set(this.Xg(l),f)}));const n=t.Rw!==void 0&&this.zg.has(t.Rw)?this.Xg(t.Rw):void 0;return{time:t.yw,logical:t.Re,point:t.kw,paneIndex:t.Tw,hoveredSeries:n,hoveredObjectId:t.Vw,seriesData:e,sourceEvent:t.Bw}}Kg(t){let e=this.qu.get(t);return e||(e=new VV(this.Hf,(n=>this.Xg(n)),t,this),this.qu.set(t,e)),e}}function jV(s){if(Vu(s)){const t=document.getElementById(s);return wn(t!==null,`Cannot find element in DOM with id=${s}`),t}return s}function UV(s,t,e){const n=jV(s),a=new LV(n,t,e);return t.setOptions(a.options()),a}function BV(s,t){return UV(s,new E1,E1.ld(t))}class nT extends Vp{constructor(t,e){super(t,e,!0)}fg(t,e,n){e.uu(this.rg,wu(this.hg)),t.Ul(this.rg,n,wu(this.hg))}Zg(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((e=>{const n=e.Wt[3];return this.Gg(e.Re,n,t)}))}}function FV(s,t,e,n,a,l,c){if(t.length===0||n.from>=t.length||n.to<=0)return;const{context:f,horizontalPixelRatio:m,verticalPixelRatio:g}=s,y=t[n.from];let b=l(s,y),E=y;if(n.to-n.from<2){const A=a/2;f.beginPath();const x={_t:y._t-A,ut:y.ut},R={_t:y._t+A,ut:y.ut};f.moveTo(x._t*m,x.ut*g),f.lineTo(R._t*m,R.ut*g),c(s,b,x,R)}else{const A=(R,D)=>{c(s,b,E,D),f.beginPath(),b=R,E=D};let x=E;f.beginPath(),f.moveTo(y._t*m,y.ut*g);for(let R=n.from+1;R<n.to;++R){x=t[R];const D=l(s,x);switch(e){case 0:f.lineTo(x._t*m,x.ut*g);break;case 1:f.lineTo(x._t*m,t[R-1].ut*g),D!==b&&(A(D,x),f.lineTo(x._t*m,t[R-1].ut*g)),f.lineTo(x._t*m,x.ut*g);break;case 2:{const[B,Z]=qV(t,R-1,R);f.bezierCurveTo(B._t*m,B.ut*g,Z._t*m,Z.ut*g,x._t*m,x.ut*g);break}}e!==1&&D!==b&&(A(D,x),f.moveTo(x._t*m,x.ut*g))}(E!==x||E===x&&e===1)&&c(s,b,E,x)}}const U1=6;function rg(s,t){return{_t:s._t-t._t,ut:s.ut-t.ut}}function B1(s,t){return{_t:s._t/t,ut:s.ut/t}}function qV(s,t,e){const n=Math.max(0,t-1),a=Math.min(s.length-1,e+1);var l,c;return[(l=s[t],c=B1(rg(s[e],s[n]),U1),{_t:l._t+c._t,ut:l.ut+c.ut}),rg(s[e],B1(rg(s[a],s[t]),U1))]}function YV(s,t){const e=s.context;e.strokeStyle=t,e.stroke()}class HV extends Cr{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:n,Jg:a,Qg:l,ct:c,Xt:f,tM:m}=this.rt;if(n===null)return;const g=t.context;g.lineCap="butt",g.lineWidth=c*t.verticalPixelRatio,ma(g,f),g.lineJoin="round";const y=this.iM.bind(this);l!==void 0&&FV(t,e,l,n,a,y,YV),m&&(function(b,E,A,x,R){if(x.to-x.from<=0)return;const{horizontalPixelRatio:D,verticalPixelRatio:B,context:Z}=b;let rt=null;const gt=Math.max(1,Math.floor(D))%2/2,yt=A*B+gt;for(let xt=x.to-1;xt>=x.from;--xt){const N=E[xt];if(N){const M=R(b,N);M!==rt&&(Z.beginPath(),rt!==null&&Z.fill(),Z.fillStyle=M,rt=M);const O=Math.round(N._t*D)+gt,L=N.ut*B;Z.moveTo(O,L),Z.arc(O,L,yt,0,2*Math.PI)}}Z.fill()})(t,e,m,n,y)}}class QV extends HV{iM(t,e){return e.vt}}class GV extends nT{constructor(){super(...arguments),this.og=new QV}Gg(t,e,n){return{...this.Zg(t,e),...n.Dr(t)}}pg(){const t=this.Jn.N(),e={ot:this.rg,Xt:t.lineStyle,Qg:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,tM:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.hg,Jg:this.Qn.Et().mu()};this.og.ht(e)}}const KV={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},$g:(s,t)=>new GV(s,t)};class $V extends Vp{constructor(t,e){super(t,e,!1)}fg(t,e,n){e.uu(this.rg,wu(this.hg)),t.ql(this.rg,n,wu(this.hg))}VM(t,e,n){return{wt:t,qh:e.Wt[0],Yh:e.Wt[1],jh:e.Wt[2],Kh:e.Wt[3],_t:NaN,Yl:NaN,jl:NaN,Kl:NaN,Xl:NaN}}cg(){const t=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((e=>this.Gg(e.Re,e,t)))}}class XV extends Cr{constructor(){super(...arguments),this.Yt=null,this.yM=0}ht(t){this.Yt=t}et(t){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:e}=t;this.yM=(function(l,c){if(l>=2.5&&l<=4)return Math.floor(3*c);const f=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),m=Math.floor(l*f*c),g=Math.floor(l*c),y=Math.min(m,g);return Math.max(Math.floor(c),y)})(this.Yt.mu,e),this.yM>=2&&Math.floor(e)%2!=this.yM%2&&this.yM--;const n=this.Yt.Xs;this.Yt.BM&&this.IM(t,n,this.Yt.lt),this.Yt.Mi&&this.uv(t,n,this.Yt.lt);const a=this.EM(e);(!this.Yt.Mi||this.yM>2*a)&&this.AM(t,n,this.Yt.lt)}IM(t,e,n){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t;let f="",m=Math.min(Math.floor(l),Math.floor(this.Yt.mu*l));m=Math.max(Math.floor(l),Math.min(m,this.yM));const g=Math.floor(.5*m);let y=null;for(let b=n.from;b<n.to;b++){const E=e[b];E.pr!==f&&(a.fillStyle=E.pr,f=E.pr);const A=Math.round(Math.min(E.Yl,E.Xl)*c),x=Math.round(Math.max(E.Yl,E.Xl)*c),R=Math.round(E.jl*c),D=Math.round(E.Kl*c);let B=Math.round(l*E._t)-g;const Z=B+m-1;y!==null&&(B=Math.max(y+1,B),B=Math.min(B,Z));const rt=Z-B+1;a.fillRect(B,R,rt,A-R),a.fillRect(B,x+1,rt,D-x),y=Z}}EM(t){let e=Math.floor(1*t);this.yM<=2*e&&(e=Math.floor(.5*(this.yM-1)));const n=Math.max(Math.floor(t),e);return this.yM<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n}uv(t,e,n){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t;let f="";const m=this.EM(l);let g=null;for(let y=n.from;y<n.to;y++){const b=e[y];b.dr!==f&&(a.fillStyle=b.dr,f=b.dr);let E=Math.round(b._t*l)-Math.floor(.5*this.yM);const A=E+this.yM-1,x=Math.round(Math.min(b.Yl,b.Xl)*c),R=Math.round(Math.max(b.Yl,b.Xl)*c);if(g!==null&&(E=Math.max(g+1,E),E=Math.min(E,A)),this.Yt.mu*l>2*m)t4(a,E,x,A-E+1,R-x+1,m);else{const D=A-E+1;a.fillRect(E,x,D,R-x+1)}g=A}}AM(t,e,n){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t;let f="";const m=this.EM(l);for(let g=n.from;g<n.to;g++){const y=e[g];let b=Math.round(Math.min(y.Yl,y.Xl)*c),E=Math.round(Math.max(y.Yl,y.Xl)*c),A=Math.round(y._t*l)-Math.floor(.5*this.yM),x=A+this.yM-1;if(y.cr!==f){const R=y.cr;a.fillStyle=R,f=R}this.Yt.Mi&&(A+=m,b+=m,x-=m,E-=m),b>E||a.fillRect(A,b,x-A+1,E-b+1)}}}class WV extends $V{constructor(){super(...arguments),this.og=new XV}Gg(t,e,n){return{...this.VM(t,e,n),...n.Dr(t)}}pg(){const t=this.Jn.N();this.og.ht({Xs:this.rg,mu:this.Qn.Et().mu(),BM:t.wickVisible,Mi:t.borderVisible,lt:this.hg})}}const JV={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},$g:(s,t)=>new WV(s,t)};class ZV extends Cr{constructor(){super(...arguments),this.Yt=null,this.zM=[]}ht(t){this.Yt=t,this.zM=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.zM.length||this.LM(e);const a=Math.max(1,Math.floor(n)),l=Math.round(this.Yt.OM*n)-Math.floor(a/2),c=l+a;for(let f=this.Yt.lt.from;f<this.Yt.lt.to;f++){const m=this.Yt.ot[f],g=this.zM[f-this.Yt.lt.from],y=Math.round(m.ut*n);let b,E;t.fillStyle=m.cr,y<=l?(b=y,E=c):(b=l,E=y-Math.floor(a/2)+a),t.fillRect(g.Uh,b,g.bi-g.Uh+1,E-b)}}LM(t){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.zM=[]);const e=Math.ceil(this.Yt.mu*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.Yt.mu*t)-e;this.zM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.Yt.ot[l],f=Math.round(c._t*t);let m,g;if(n%2){const y=(n-1)/2;m=f-y,g=f+y}else{const y=n/2;m=f-y,g=f+y-1}this.zM[l-this.Yt.lt.from]={Uh:m,bi:g,NM:f,ne:c._t*t,wt:c.wt}}for(let l=this.Yt.lt.from+1;l<this.Yt.lt.to;l++){const c=this.zM[l-this.Yt.lt.from],f=this.zM[l-this.Yt.lt.from-1];c.wt===f.wt+1&&c.Uh-f.bi!==e+1&&(f.NM>f.ne?f.bi=c.Uh-e-1:c.Uh=f.bi+e+1)}let a=Math.ceil(this.Yt.mu*t);for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.zM[l-this.Yt.lt.from];c.bi<c.Uh&&(c.bi=c.Uh);const f=c.bi-c.Uh+1;a=Math.min(f,a)}if(e>0&&a<4)for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.zM[l-this.Yt.lt.from];c.bi-c.Uh+1>a&&(c.NM>c.ne?c.bi-=1:c.Uh+=1)}}}class t3 extends nT{constructor(){super(...arguments),this.og=new ZV}Gg(t,e,n){return{...this.Zg(t,e),...n.Dr(t)}}pg(){const t={ot:this.rg,mu:this.Qn.Et().mu(),lt:this.hg,OM:this.Jn.Ft().Nt(this.Jn.N().base,ht(this.Jn.zt()).Wt)};this.og.ht(t)}}const e3={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},$g:(s,t)=>new t3(s,t)};class n3{constructor(t,e){this.Jn=t,this.ah=e,this.WM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(t){this.ah&&this.ah.hr&&this.ah.hr(t)}WM(){this.Jn.attachPrimitive(this.ah)}}const i3={autoScale:!0,zOrder:"normal"};function ou(s,t){return Np(Math.min(Math.max(s,12),30)*t)}function Io(s,t){switch(s){case"arrowDown":case"arrowUp":return ou(t,1);case"circle":return ou(t,.8);case"square":return ou(t,.7)}}function iT(s){return(function(t){const e=Math.ceil(t);return e%2!=0?e-1:e})(ou(s,1))}function sT(s){return Math.max(ou(s,.1),3)}function F1(s,t,e){return t?s:e?Math.ceil(s/2):0}function q1(s,t,e,n){const a=(Io("arrowUp",n)-1)/2*e._b,l=(Np(n/2)-1)/2*e._b;t.beginPath(),s?(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut-a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut+a),t.lineTo(e._t-l,e.ut+a),t.lineTo(e._t-l,e.ut)):(t.moveTo(e._t-a,e.ut),t.lineTo(e._t,e.ut+a),t.lineTo(e._t+a,e.ut),t.lineTo(e._t+l,e.ut),t.lineTo(e._t+l,e.ut-a),t.lineTo(e._t-l,e.ut-a),t.lineTo(e._t-l,e.ut)),t.fill()}function Y1(s,t,e,n,a,l){const c=(Io("arrowUp",n)-1)/2,f=(Np(n/2)-1)/2;return a>=t-f-2&&a<=t+f+2&&l>=(s?e:e-c)-2&&l<=(s?e+c:e)+2?!0:(()=>{if(a<t-c-3||a>t+c+3||l<(s?e-c-3:e)||l>(s?e:e+c+3))return!1;const m=Math.abs(a-t);return Math.abs(l-e)+3>=m/2})()}class s3{constructor(){this.Yt=null,this.On=new Su,this.F=-1,this.W="",this.Wp="",this.ub="normal"}ht(t){this.Yt=t}Nn(t,e,n){this.F===t&&this.W===e||(this.F=t,this.W=e,this.Wp=Eu(t,e),this.On.Bn()),this.ub=n}jn(t,e){if(this.Yt===null||this.Yt.lt===null)return null;for(let n=this.Yt.lt.from;n<this.Yt.lt.to;n++){const a=this.Yt.ot[n];if(a&&a3(a,t,e))return{zOrder:"normal",externalId:a.Kn??""}}return null}draw(t){this.ub!=="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}drawBackground(t){this.ub==="aboveSeries"&&t.useBitmapCoordinateSpace((e=>{this.et(e)}))}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:n}){if(this.Yt!==null&&this.Yt.lt!==null){t.textBaseline="middle",t.font=this.Wp;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const l=this.Yt.ot[a];l.ri!==void 0&&(l.ri.Qi=this.On.Vi(t,l.ri.cb),l.ri.$t=this.F,l.ri._t=l._t-l.ri.Qi/2),r3(l,t,e,n)}}}}function r3(s,t,e,n){t.fillStyle=s.R,s.ri!==void 0&&(function(a,l,c,f,m,g){a.save(),a.scale(m,g),a.fillText(l,c,f),a.restore()})(t,s.ri.cb,s.ri._t,s.ri.ut,e,n),(function(a,l,c){if(a.zr!==0){switch(a.fb){case"arrowDown":return void q1(!1,l,c,a.zr);case"arrowUp":return void q1(!0,l,c,a.zr);case"circle":return void(function(f,m,g){const y=(Io("circle",g)-1)/2;f.beginPath(),f.arc(m._t,m.ut,y*m._b,0,2*Math.PI,!1),f.fill()})(l,c,a.zr);case"square":return void(function(f,m,g){const y=Io("square",g),b=(y-1)*m._b/2,E=m._t-b,A=m.ut-b;f.fillRect(E,A,y*m._b,y*m._b)})(l,c,a.zr)}a.fb}})(s,t,(function(a,l,c){const f=Math.max(1,Math.floor(l))%2/2;return{_t:Math.round(a._t*l)+f,ut:a.ut*c,_b:l}})(s,e,n))}function a3(s,t,e){return!(s.ri===void 0||!(function(n,a,l,c,f,m){const g=c/2;return f>=n&&f<=n+l&&m>=a-g&&m<=a+g})(s.ri._t,s.ri.ut,s.ri.Qi,s.ri.$t,t,e))||(function(n,a,l){if(n.zr===0)return!1;switch(n.fb){case"arrowDown":return Y1(!0,n._t,n.ut,n.zr,a,l);case"arrowUp":return Y1(!1,n._t,n.ut,n.zr,a,l);case"circle":return(function(c,f,m,g,y){const b=2+Io("circle",m)/2,E=c-g,A=f-y;return Math.sqrt(E*E+A*A)<=b})(n._t,n.ut,n.zr,a,l);case"square":return(function(c,f,m,g,y){const b=Io("square",m),E=(b-1)/2,A=c-E,x=f-E;return g>=A&&g<=A+b&&y>=x&&y<=x+b})(n._t,n.ut,n.zr,a,l)}})(s,t,e)}function H1(s){return s==="atPriceTop"||s==="atPriceBottom"||s==="atPriceMiddle"}function o3(s,t,e,n,a,l,c,f){const m=(function(x,R,D){if(H1(R.position)&&R.price!==void 0)return R.price;if("value"in(B=x)&&typeof B.value=="number")return x.value;var B;if((function(Z){return"open"in Z&&"high"in Z&&"low"in Z&&"close"in Z})(x)){if(R.position==="inBar")return x.close;if(R.position==="aboveBar")return D?x.low:x.high;if(R.position==="belowBar")return D?x.high:x.low}})(e,t,c.priceScale().options().invertScale);if(m===void 0)return;const g=H1(t.position),y=f.timeScale(),b=ga(t.size)?Math.max(t.size,0):1,E=iT(y.options().barSpacing)*b,A=E/2;switch(s.zr=E,t.position){case"inBar":case"atPriceMiddle":return s.ut=ht(c.priceToCoordinate(m)),void(s.ri!==void 0&&(s.ri.ut=s.ut+A+l+.6*a));case"aboveBar":case"atPriceTop":{const x=g?0:n.pb;return s.ut=ht(c.priceToCoordinate(m))-A-x,s.ri!==void 0&&(s.ri.ut=s.ut-A-.6*a,n.pb+=1.2*a),void(g||(n.pb+=E+l))}case"belowBar":case"atPriceBottom":{const x=g?0:n.mb;return s.ut=ht(c.priceToCoordinate(m))+A+x,s.ri!==void 0&&(s.ri.ut=s.ut+A+l+.6*a,n.mb+=1.2*a),void(g||(n.mb+=E+l))}}}class l3{constructor(t,e,n){this.wb=[],this.xt=!0,this.gb=!0,this.Gt=new s3,this.ge=t,this.Vp=e,this.Yt={ot:[],lt:null},this.Ps=n}renderer(){if(!this.ge.options().visible)return null;this.xt&&this.Mb();const t=this.Vp.options().layout;return this.Gt.Nn(t.fontSize,t.fontFamily,this.Ps.zOrder),this.Gt.ht(this.Yt),this.Gt}bb(t){this.wb=t,this.yt("data")}yt(t){this.xt=!0,t==="data"&&(this.gb=!0)}Sb(t){this.xt=!0,this.Ps=t}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}Mb(){const t=this.Vp.timeScale(),e=this.wb;this.gb&&(this.Yt.ot=e.map((g=>({wt:g.time,_t:0,ut:0,zr:0,fb:g.shape,R:g.color,Kn:g.id,xb:g.xb,ri:void 0}))),this.gb=!1);const n=this.Vp.options().layout;this.Yt.lt=null;const a=t.getVisibleLogicalRange();if(a===null)return;const l=new wo(Math.floor(a.from),Math.ceil(a.to));if(this.ge.data()[0]===null||this.Yt.ot.length===0)return;let c=NaN;const f=sT(t.options().barSpacing),m={pb:f,mb:f};this.Yt.lt=ZS(this.Yt.ot,l,!0);for(let g=this.Yt.lt.from;g<this.Yt.lt.to;g++){const y=e[g];y.time!==c&&(m.pb=f,m.mb=f,c=y.time);const b=this.Yt.ot[g];b._t=ht(t.logicalToCoordinate(y.time)),y.text!==void 0&&y.text.length>0&&(b.ri={cb:y.text,_t:0,ut:0,Qi:0,$t:0});const E=this.ge.dataByIndex(y.time,0);E!==null&&o3(b,y,E,m,n.fontSize,f,this.ge,this.Vp)}this.xt=!1}}function Q1(s){return{...i3,...s}}class u3{constructor(t){this.sh=null,this.wb=[],this.Cb=[],this.Pb=null,this.ge=null,this.Vp=null,this.yb=!0,this.kb=null,this.Tb=null,this.Rb=null,this.Db=!0,this.Ps=Q1(t)}attached(t){this.Vb(),this.Vp=t.chart,this.ge=t.series,this.sh=new l3(this.ge,ht(this.Vp),this.Ps),this.lb=t.requestUpdate,this.ge.subscribeDataChanged((e=>this.Tg(e))),this.Db=!0,this.jM()}jM(){this.lb&&this.lb()}detached(){this.ge&&this.Pb&&this.ge.unsubscribeDataChanged(this.Pb),this.Vp=null,this.ge=null,this.sh=null,this.Pb=null}bb(t){this.Db=!0,this.wb=t,this.Vb(),this.yb=!0,this.Tb=null,this.jM()}Bb(){return this.wb}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.Ib()}hitTest(t,e){return this.sh?this.sh.renderer()?.jn(t,e)??null:null}autoscaleInfo(t,e){if(this.Ps.autoScale&&this.sh){const n=this.Eb();if(n)return{priceRange:null,margins:n}}return null}hr(t){this.Ps=Q1({...this.Ps,...t}),this.jM&&this.jM()}Eb(){const t=ht(this.Vp).timeScale().options().barSpacing;if(this.yb||t!==this.Rb){if(this.Rb=t,this.wb.length>0){const e=sT(t),n=1.5*iT(t)+2*e,a=this.Ab();this.kb={above:F1(n,a.aboveBar,a.inBar),below:F1(n,a.belowBar,a.inBar)}}else this.kb=null;this.yb=!1}return this.kb}Ab(){return this.Tb===null&&(this.Tb=this.wb.reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.Tb}Vb(){if(!this.Db||!this.Vp||!this.ge)return;const t=this.Vp.timeScale(),e=this.ge?.data();if(t.getVisibleLogicalRange()==null||!this.ge||e.length===0)return void(this.Cb=[]);const n=t.timeToIndex(ht(e[0].time),!0);this.Cb=this.wb.map(((a,l)=>{const c=t.timeToIndex(a.time,!0),f=c<n?1:-1,m=ht(this.ge).dataByIndex(c,f),g={time:t.timeToIndex(ht(m).time,!1),position:a.position,shape:a.shape,color:a.color,id:a.id,xb:l,text:a.text,size:a.size,price:a.price,yw:a.time};if(a.position==="atPriceTop"||a.position==="atPriceBottom"||a.position==="atPriceMiddle"){if(a.price===void 0)throw new Error(`Price is required for position ${a.position}`);return{...g,position:a.position,price:a.price}}return{...g,position:a.position,price:a.price}})),this.Db=!1}Ib(t){this.sh&&(this.Vb(),this.sh.bb(this.Cb),this.sh.Sb(this.Ps),this.sh.yt(t))}Tg(t){this.Db=!0,this.jM()}}class c3 extends n3{constructor(t,e,n){super(t,e),n&&this.setMarkers(n)}setMarkers(t){this.ah.bb(t)}markers(){return this.ah.Bb()}}function h3(s,t,e){const n=new c3(s,new u3({}));return t&&n.setMarkers(t),n}({...PS});function f3({activeTool:s,onToolChange:t,activeIndicators:e,onIndicatorToggle:n,onClearDrawings:a,onDeleteSelected:l,onTakeScreenshot:c,isUploadingScreenshot:f,hasSelection:m}){const[g,y]=nt.useState(!1),b=[{id:"select",icon:hA,label:"Select",shortcut:"V or 1"},{id:"freehand",icon:gA,label:"Free Draw",shortcut:"2"},{id:"trendline",icon:CA,label:"Trend Line",shortcut:"3"},{id:"horizontal",icon:uA,label:"Horizontal Line",shortcut:"4"},{id:"rectangle",icon:SA,label:"Rectangle",shortcut:"5"},{id:"fibonacci",icon:G2,label:"Fibonacci",shortcut:"6"},{id:"riskReward",icon:xA,label:"Risk/Reward",shortcut:"7"},{id:"text",icon:DA,label:"Text",shortcut:"8"},{id:"callout",icon:oA,label:"Callout",shortcut:"9"}],E=[{id:"sma21",label:"SMA 21",color:"#2962FF"},{id:"sma60",label:"SMA 60",color:"#FF6D00"},{id:"ema21",label:"EMA 21",color:"#00897B"},{id:"ema60",label:"EMA 60",color:"#D81B60"},{id:"pivotPoints",label:"Pivot Points",color:"#6A1B9A"}];return S.jsxs("div",{className:"bg-white border-b p-3 flex items-center gap-2 flex-wrap",children:[S.jsxs("div",{className:"flex items-center gap-1 border-r pr-3",children:[S.jsx("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"Drawing Tools:"}),b.map(A=>{const x=A.icon,R=s===A.id;return S.jsx("button",{onClick:()=>t(R?"none":A.id),className:`p-2 rounded hover:bg-gray-100 transition-colors ${R?"bg-blue-100 text-blue-600":"text-gray-700"}`,title:`${A.label} (${A.shortcut})`,children:S.jsx(x,{size:18})},A.id)}),S.jsx("button",{onClick:l,disabled:!m,className:`ml-2 px-3 py-1 text-xs rounded ${m?"bg-orange-50 text-orange-600 hover:bg-orange-100":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,title:m?"Delete selected drawing (Delete/Backspace)":"No drawing selected",children:"Delete Selected"}),S.jsx("button",{onClick:a,className:"px-3 py-1 text-xs bg-red-50 text-red-600 rounded hover:bg-red-100",children:"Clear All"})]}),S.jsx("div",{className:"flex items-center gap-1 border-r pr-3",children:S.jsx("button",{onClick:c,disabled:f,"data-screenshot-btn":!0,className:`p-2 rounded hover:bg-gray-100 transition-colors text-gray-700 ${f?"animate-pulse opacity-50 cursor-wait":""}`,title:f?"Uploading...":"Take Chart Screenshot",children:S.jsx(fw,{size:18})})}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Indicators:"}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-100 rounded hover:bg-gray-200 text-sm",children:[S.jsx(I2,{size:16}),e.filter(A=>A!=="none").length>0&&S.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["(",e.filter(A=>A!=="none").length,")"]}),S.jsx(dw,{size:14})]}),g&&S.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border rounded-lg shadow-lg p-2 z-10 min-w-[150px]",children:E.map(A=>{const x=e.includes(A.id);return S.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-50 rounded cursor-pointer",children:[S.jsx("input",{type:"checkbox",checked:x,onChange:()=>n(A.id),className:"rounded"}),S.jsx("span",{className:"w-3 h-3 rounded",style:{backgroundColor:A.color}}),S.jsx("span",{className:"text-sm",children:A.label})]},A.id)})})]})]}),S.jsxs("div",{className:"ml-auto text-xs text-gray-500",children:[s==="select"&&S.jsx("span",{className:"text-blue-600 font-medium",children:"Click on a drawing to select it"}),s!=="none"&&s!=="select"&&S.jsxs("span",{className:"text-blue-600 font-medium",children:["Click on chart to draw ",b.find(A=>A.id===s)?.label]})]})]})}function G1(s,t){const e=[];if(!s||s.length<t)return console.warn(`Not enough candles for SMA calculation. Need ${t}, have ${s?.length||0}`),e;for(let n=t-1;n<s.length;n++){let a=0;for(let l=0;l<t;l++){if(!s[n-l]||typeof s[n-l].close!="number")return console.warn(`Invalid candle data at index ${n-l}`),e;a+=s[n-l].close}e.push({time:s[n].timestamp,value:a/t})}return e}function K1(s,t){const e=[];if(!s||s.length<t)return console.warn(`Not enough candles for EMA calculation. Need ${t}, have ${s?.length||0}`),e;const n=2/(t+1);let a=0;for(let c=0;c<t;c++){if(!s[c]||typeof s[c].close!="number")return console.warn(`Invalid candle data at index ${c}`),e;a+=s[c].close}let l=a/t;e.push({time:s[t-1].timestamp,value:l});for(let c=t;c<s.length;c++){if(!s[c]||typeof s[c].close!="number"){console.warn(`Invalid candle data at index ${c}`);break}l=(s[c].close-l)*n+l,e.push({time:s[c].timestamp,value:l})}return e}function rT(s){const t=[];let e=0,n=0;if(!s||s.length<5)return console.warn(`Not enough candles for pivot point calculation. Need 5, have ${s?.length||0}`),t;for(let a=4;a<s.length;a++){if(!s[a]||!s[a-1]||!s[a-2]||!s[a-3]){console.warn(`Invalid candle data at index ${a}`);continue}const l=s[a],c=s[a-1],f=s[a-2],m=s[a-3],g=c.close>f.high&&c.close>c.open&&m.close<m.open,y=l.close>c.high&&l.close>l.open,b=l.close>l.open&&c.close>c.open&&c.close<l.close&&f.close<f.open&&(c.low<f.low||f.close<m.low)&&!g,E=f.close<f.open&&(c.low<f.low||f.close<m.low);if((b||y)&&E){const rt=Math.min(l.low,c.low),gt=Math.ceil(Math.abs(l.close-rt)+2);let yt;e>0&&(yt=l.low>e?"HL":"LL"),e=l.low,t.push({time:l.timestamp,type:"bullish",price:l.low,slDistance:gt,trendLabel:yt})}const x=c.close<f.low&&c.close<c.open&&m.close>m.open,R=l.close<c.low&&l.close<l.open,D=l.close<l.open&&c.close<c.open&&c.close>l.close&&f.close>f.open&&(c.high>f.high||f.close>m.high)&&!x,B=f.close>f.open&&(c.high>f.high||f.close>m.high);if(D||R&&B){const rt=Math.max(l.high,c.high),gt=Math.ceil(Math.abs(l.close-rt)+2);let yt;n>0&&(yt=l.high>n?"HH":"LH"),n=l.high,t.push({time:l.timestamp,type:"bearish",price:l.high,slDistance:gt,trendLabel:yt})}}return t}function d3({canvasRef:s,activeTool:t,onToolComplete:e,chartApi:n,seriesApi:a,onTextToolTrigger:l,onCalloutTrigger:c}){const[f,m]=nt.useState([]),[g,y]=nt.useState([]),[b,E]=nt.useState(!1),[A,x]=nt.useState(null),[R,D]=nt.useState(!1),[B,Z]=nt.useState({x:0,y:0}),[rt,gt]=nt.useState(!1),yt=nt.useRef(t),xt=nt.useRef(b),N=nt.useRef(g),M=nt.useRef(R),O=nt.useRef(B),L=nt.useRef(A);nt.useEffect(()=>{yt.current=t},[t]),nt.useEffect(()=>{xt.current=b},[b]),nt.useEffect(()=>{N.current=g},[g]),nt.useEffect(()=>{M.current=R},[R]),nt.useEffect(()=>{O.current=B},[B]),nt.useEffect(()=>{L.current=A},[A]);const z=nt.useCallback((k,W)=>{const it=W.getBoundingClientRect(),ft=k.clientX-it.left,ct=k.clientY-it.top,Rt={x:ft,y:ct};if(n&&a){const Gt=n.timeScale().coordinateToLogical(ft),ne=a.coordinateToPrice(ct);Gt!==null&&(Rt.time=Gt),ne!==null&&(Rt.price=ne)}return Rt},[n,a]),U=nt.useCallback(k=>{if(!n||!a)return k;const W=n.timeScale();let it=k.x;if(k.time!==void 0){const ct=W.logicalToCoordinate(k.time);if(ct!==null)it=ct;else{const Rt=W.getVisibleLogicalRange();Rt&&(k.time<Rt.from?it=-1e4:k.time>Rt.to&&(it=1e4))}}let ft=k.y;if(k.price!==void 0){const ct=a.priceToCoordinate(k.price);ct!==null&&(ft=ct)}return{...k,x:it,y:ft}},[n,a]),I=(k,W,it,ft=8)=>{const ct=it.x-W.x,Rt=it.y-W.y,Bt=ct*ct+Rt*Rt;if(Bt===0)return Math.hypot(k.x-W.x,k.y-W.y)<=ft;let Gt=((k.x-W.x)*ct+(k.y-W.y)*Rt)/Bt;Gt=Math.max(0,Math.min(1,Gt));const ne=W.x+Gt*ct,Ne=W.y+Gt*Rt;return Math.hypot(k.x-ne,k.y-Ne)<=ft},kt=(k,W,it=8)=>Math.abs(k.y-W.y)<=it,Xt=(k,W,it,ft=8)=>{const ct=Math.min(W.x,it.x),Rt=Math.max(W.x,it.x),Bt=Math.min(W.y,it.y),Gt=Math.max(W.y,it.y);if(k.x>=ct&&k.x<=Rt&&k.y>=Bt&&k.y<=Gt)return!0;const ne=Math.abs(k.x-ct)<=ft&&k.y>=Bt&&k.y<=Gt,Ne=Math.abs(k.x-Rt)<=ft&&k.y>=Bt&&k.y<=Gt,dn=Math.abs(k.y-Bt)<=ft&&k.x>=ct&&k.x<=Rt,Vn=Math.abs(k.y-Gt)<=ft&&k.x>=ct&&k.x<=Rt;return ne||Ne||dn||Vn},G=(k,W,it,ft=8)=>{const ct=[0,.236,.382,.5,.618,.786,1],Rt=Math.min(W.x,it.x),Bt=Math.max(W.x,it.x);if(k.x<Rt||k.x>Bt)return!1;for(const Gt of ct){const ne=W.y+(it.y-W.y)*Gt;if(Math.abs(k.y-ne)<=ft)return!0}return!1},dt=(k,W,it,ft=8)=>{const ct=W.y,Rt=it.y,Bt=Rt-ct,Gt=Math.min(W.x,it.x),ne=Math.max(W.x,it.x);if(k.x<Gt-ft||k.x>ne+ft)return!1;if(Math.abs(k.y-ct)<=ft||Math.abs(k.y-Rt)<=ft)return!0;const Ne=[1,2,3];for(const dn of Ne){const Vn=ct-Bt*dn;if(Math.abs(k.y-Vn)<=ft)return!0}return!1},bt=(k,W,it=8)=>{for(let ft=0;ft<W.length-1;ft++)if(I(k,W[ft],W[ft+1],it))return!0;return!1},ut=(k,W,it)=>{const ft=s.current;if(!ft)return!1;const ct=ft.getContext("2d");if(!ct)return!1;ct.font="bold 14px Inter, system-ui, sans-serif";const Bt=ct.measureText(it).width+10;return k.x>=W.x-5&&k.x<=W.x+Bt&&k.y>=W.y-24+5&&k.y<=W.y+5},St=(k,W,it,ft,ct=8)=>{if(I(k,W,it,ct))return!0;const Rt=s.current;if(!Rt)return!1;const Bt=Rt.getContext("2d");if(!Bt)return!1;Bt.font="bold 12px Inter, system-ui, sans-serif";const ne=Bt.measureText(ft||"Note").width+16,Ne=24;return k.x>=it.x-ne/2&&k.x<=it.x+ne/2&&k.y>=it.y-Ne/2&&k.y<=it.y+Ne/2},V=(k,W)=>{if(W.points.length===0||W.type!=="text"&&W.points.length<2)return!1;const it=W.points.map(Rt=>U(Rt)),ft=it[0],ct=it[1]||ft;switch(W.type){case"trendline":return I(k,ft,ct);case"horizontal":return kt(k,ft);case"rectangle":return Xt(k,ft,ct);case"fibonacci":return G(k,ft,ct);case"riskReward":return dt(k,ft,ct);case"freehand":return bt(k,it);case"text":return ut(k,ft,W.text||"");case"callout":return St(k,ft,ct,W.text||"");default:return!1}},J=(k,W)=>{for(let it=W.length-1;it>=0;it--)if(V(k,W[it]))return W[it];return null},mt=nt.useCallback(()=>{A&&(m(k=>k.filter(W=>W.id!==A)),x(null))},[A]),pt=nt.useCallback(k=>{switch(k){case"freehand":return"#E91E63";case"trendline":return"#2962FF";case"horizontal":return"#FF6D00";case"rectangle":return"#00897B40";case"fibonacci":return"#9C27B0";case"riskReward":return"#F44336";case"text":return"#212121";case"callout":return"#673AB7";default:return"#000000"}},[]),ot=nt.useCallback((k,W)=>{const it=`drawing-${Date.now()}-${Math.random()}`,ft={id:it,type:"text",points:[k],text:W,color:pt("text")};m(ct=>[...ct,ft]),x(it)},[pt,e]),_t=nt.useCallback((k,W,it)=>{const ft=`drawing-${Date.now()}-${Math.random()}`,ct={id:ft,type:"callout",points:[k,W],text:it,color:pt("callout")};m(Rt=>[...Rt,ct]),x(ft)},[pt,e]),Tt=nt.useCallback(k=>{if(!s.current||k.button!==0)return!1;const W=z(k,s.current);if(yt.current==="none")return!1;const it=J(W,f);if(it){if(it.id===L.current){if(yt.current==="select"){const ct=it.points.map(Rt=>U(Rt))[0];Z({x:W.x-ct.x,y:W.y-ct.y}),D(!0)}}else x(it.id),D(!1);return!0}if(yt.current==="select")return x(null),D(!1),!1;if(yt.current==="text"){if(l)l(W);else{const ft=prompt("Enter text:");ft&&ot(W,ft)}return!0}return x(null),D(!1),y([W]),E(!0),!0},[f,z,U,l,ot]),Ht=nt.useCallback(k=>{if(!s.current||!n||!a)return;const W=z(k,s.current);if(M.current&&yt.current==="select"&&L.current){m(it=>it.map(ft=>{if(ft.id===L.current){const ct=ft.points.map(Ne=>U(Ne)),Rt={x:W.x-O.current.x,y:W.y-O.current.y},Bt=Rt.x-ct[0].x,Gt=Rt.y-ct[0].y,ne=ct.map(Ne=>{const dn={x:Ne.x+Bt,y:Ne.y+Gt},Tn=n.timeScale().coordinateToLogical(dn.x),De=a.coordinateToPrice(dn.y);return{...dn,time:Tn!==null?Tn:Ne.time,price:De!==null?De:Ne.price}});return{...ft,points:ne}}return ft}));return}if(yt.current==="select"&&L.current&&!M.current){const it=f.find(ft=>ft.id===L.current);it&&V(W,it)?gt(!0):gt(!1)}!xt.current||yt.current==="none"||y(it=>it.length===0?[W]:yt.current==="freehand"?[...it,W]:["trendline","horizontal","rectangle","fibonacci","riskReward","callout"].includes(yt.current)?[it[0],W]:[...it,W])},[f,z,U,n,a]),zt=nt.useCallback(()=>{if(M.current){D(!1);return}if(!(!xt.current||yt.current==="none")){if(N.current.length>=2){if(yt.current==="callout"){const it=N.current[0],ft=N.current[1];if(c)c(it,ft);else{const ct=prompt("Enter text:");ct&&_t(it,ft,ct)}y([]),E(!1);return}const k=`drawing-${Date.now()}-${Math.random()}`,W={id:k,type:yt.current,points:N.current,color:pt(yt.current)};m(it=>[...it,W]),x(k)}y([]),E(!1),yt.current}},[e,pt]),fe=(k,W,it,ft,ct=2)=>{k.strokeStyle=ft,k.lineWidth=ct,k.beginPath(),k.moveTo(W.x,W.y),k.lineTo(it.x,it.y),k.stroke()},Re=(k,W,it,ft)=>{k.fillStyle=ft,k.strokeStyle=ft.replace("40",""),k.lineWidth=2;const ct=it.x-W.x,Rt=it.y-W.y;k.fillRect(W.x,W.y,ct,Rt),k.strokeRect(W.x,W.y,ct,Rt)},Qe=(k,W,it,ft)=>{const ct=[0,.236,.382,.5,.618,.786,1],Rt=["0%","23.6%","38.2%","50%","61.8%","78.6%","100%"];k.font="12px sans-serif",k.fillStyle=ft,ct.forEach((Bt,Gt)=>{const ne=W.y+(it.y-W.y)*Bt;k.strokeStyle=ft,k.lineWidth=1,k.setLineDash([5,5]),k.beginPath(),k.moveTo(W.x,ne),k.lineTo(it.x,ne),k.stroke(),k.setLineDash([]),k.fillText(Rt[Gt],it.x+5,ne+4)})},Me=(k,W,it,ft)=>{const ct=W.y,Rt=it.y,Bt=Rt-ct,Gt=Math.min(W.x,it.x),ne=Math.max(W.x,it.x);k.strokeStyle="#FFC107",k.lineWidth=2,k.setLineDash([]),k.beginPath(),k.moveTo(Gt,ct),k.lineTo(ne,ct),k.stroke(),k.font="bold 12px Inter, sans-serif",k.fillStyle="#FFC107",k.textAlign="left",k.fillText("ENTRY",ne+5,ct+4),k.strokeStyle="#F44336",k.lineWidth=2,k.beginPath(),k.moveTo(Gt,Rt),k.lineTo(ne,Rt),k.stroke(),k.fillStyle="#F44336",k.fillText("STOP",ne+5,Rt+4),[{ratio:1,color:"#4CAF50",label:"1:1"},{ratio:2,color:"#4CAF50",label:"1:2"},{ratio:3,color:"#2E7D32",label:"1:3"}].forEach(({ratio:dn,color:Vn,label:Tn})=>{const De=ct-Bt*dn;k.strokeStyle=Vn,k.lineWidth=1.5,k.setLineDash([5,5]),k.beginPath(),k.moveTo(Gt,De),k.lineTo(ne,De),k.stroke(),k.setLineDash([]),k.fillStyle=Vn,k.fillText(`TP ${Tn}`,ne+5,De+4)}),k.textAlign="start"},wt=(k,W,it,ft=2)=>{if(!(W.length<2)){k.strokeStyle=it,k.lineWidth=ft,k.lineCap="round",k.lineJoin="round",k.beginPath(),k.moveTo(W[0].x,W[0].y);for(let ct=1;ct<W.length;ct++)k.lineTo(W[ct].x,W[ct].y);k.stroke()}},Et=(k,W,it,ft,ct)=>{k.font="bold 14px Inter, system-ui, sans-serif";const Bt=k.measureText(it).width;ct&&(k.fillStyle="#2196F320",k.fillRect(W.x-5,W.y-20,Bt+10,25),k.strokeStyle="#2196F3",k.lineWidth=1,k.strokeRect(W.x-5,W.y-20,Bt+10,25)),k.fillStyle=ft,k.fillText(it,W.x,W.y)},Ct=(k,W,it,ft,ct,Rt)=>{k.strokeStyle=Rt?"#2196F3":ct,k.lineWidth=1.5,k.beginPath(),k.moveTo(W.x,W.y),k.lineTo(it.x,it.y),k.stroke(),k.fillStyle=k.strokeStyle,k.beginPath(),k.arc(W.x,W.y,4,0,Math.PI*2),k.fill(),k.font="bold 12px Inter, system-ui, sans-serif";const ne=k.measureText(ft||"Note").width+8*2,Ne=24;k.fillStyle=Rt?"#2196F3":ct;const dn=it.x-ne/2,Vn=it.y-Ne/2;k.beginPath(),k.roundRect(dn,Vn,ne,Ne,4),k.fill(),k.fillStyle="#FFFFFF",k.textAlign="center",k.textBaseline="middle",k.fillText(ft||"Note",it.x,it.y),k.textAlign="start",k.textBaseline="alphabetic"},se=(k,W)=>{k.fillStyle="#2196F3",W.forEach(it=>{it.x<0||it.x>k.canvas.width||it.y<0||it.y>k.canvas.height||(k.beginPath(),k.arc(it.x,it.y,5,0,2*Math.PI),k.fill())})},Ve=nt.useCallback((k,W,it=!1)=>{if(W.points.length===0)return;const ft=W.points.map(ne=>U(ne)),ct=ft[0],Rt=ft[1]||ct,Bt=W.color||"#000000",Gt=it?4:2;switch(W.type){case"freehand":wt(k,ft,Bt,Gt);break;case"trendline":fe(k,ct,Rt,Bt,Gt);break;case"horizontal":fe(k,{...ct,x:0},{...ct,x:k.canvas.width},Bt,Gt);break;case"rectangle":Re(k,ct,Rt,Bt);break;case"fibonacci":Qe(k,ct,Rt,Bt);break;case"riskReward":Me(k,ct,Rt);break;case"text":Et(k,ct,W.text||"",Bt,it);break;case"callout":Ct(k,ct,Rt,W.text||"",Bt,it);break}it&&W.type!=="text"&&se(k,ft)},[U]),ee=nt.useCallback(()=>{if(!s.current||!n||!a)return;const k=s.current,W=k.getContext("2d");W&&(W.clearRect(0,0,k.width,k.height),f.forEach(it=>{Ve(W,it,it.id===A)}),g.length>=2&&Ve(W,{id:"temp",type:t,points:g,color:pt(t)},!1))},[n,a,f,g,A,t,pt,Ve,s]);return nt.useEffect(()=>{ee()},[ee]),nt.useEffect(()=>{if(!n||!a)return;const k=n.timeScale(),W=()=>requestAnimationFrame(()=>ee());return k.subscribeVisibleLogicalRangeChange(W),()=>k.unsubscribeVisibleLogicalRangeChange(W)},[n,a,ee]),{drawings:f,clearDrawings:()=>{m([]),y([]),x(null)},addTextDrawing:ot,addCalloutDrawing:_t,deleteSelectedDrawing:mt,selectedDrawingId:A,isHoveringSelected:rt,handleMouseDown:Tt,handleMouseMove:Ht,handleMouseUp:zt}}const aT=6048e5,m3=864e5,$1=Symbol.for("constructDateFrom");function Ar(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&$1 in s?s[$1](t):s instanceof Date?new s.constructor(t):new Date(t)}function Vi(s,t){return Ar(t||s,s)}let g3={};function Rf(){return g3}function Tu(s,t){const e=Rf(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,a=Vi(s,t?.in),l=a.getDay(),c=(l<n?7:0)+l-n;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function ef(s,t){return Tu(s,{...t,weekStartsOn:1})}function oT(s,t){const e=Vi(s,t?.in),n=e.getFullYear(),a=Ar(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const l=ef(a),c=Ar(e,0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);const f=ef(c);return e.getTime()>=l.getTime()?n+1:e.getTime()>=f.getTime()?n:n-1}function X1(s){const t=Vi(s),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+s-+e}function p3(s,...t){const e=Ar.bind(null,t.find(n=>typeof n=="object"));return t.map(e)}function W1(s,t){const e=Vi(s,t?.in);return e.setHours(0,0,0,0),e}function y3(s,t,e){const[n,a]=p3(e?.in,s,t),l=W1(n),c=W1(a),f=+l-X1(l),m=+c-X1(c);return Math.round((f-m)/m3)}function v3(s,t){const e=oT(s,t),n=Ar(s,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ef(n)}function b3(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function _3(s){return!(!b3(s)&&typeof s!="number"||isNaN(+Vi(s)))}function w3(s,t){const e=Vi(s,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const E3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S3=(s,t,e)=>{let n;const a=E3[s];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function ag(s){return(t={})=>{const e=t.width?String(t.width):s.defaultWidth;return s.formats[e]||s.formats[s.defaultWidth]}}const T3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},C3={date:ag({formats:T3,defaultWidth:"full"}),time:ag({formats:x3,defaultWidth:"full"}),dateTime:ag({formats:A3,defaultWidth:"full"})},R3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},M3=(s,t,e,n)=>R3[s];function Ql(s){return(t,e)=>{const n=e?.context?String(e.context):"standalone";let a;if(n==="formatting"&&s.formattingValues){const c=s.defaultFormattingWidth||s.defaultWidth,f=e?.width?String(e.width):c;a=s.formattingValues[f]||s.formattingValues[c]}else{const c=s.defaultWidth,f=e?.width?String(e.width):s.defaultWidth;a=s.values[f]||s.values[c]}const l=s.argumentCallback?s.argumentCallback(t):t;return a[l]}}const N3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},D3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},O3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},k3=(s,t)=>{const e=Number(s),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},z3={ordinalNumber:k3,era:Ql({values:N3,defaultWidth:"wide"}),quarter:Ql({values:D3,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ql({values:O3,defaultWidth:"wide"}),day:Ql({values:I3,defaultWidth:"wide"}),dayPeriod:Ql({values:V3,defaultWidth:"wide",formattingValues:P3,defaultFormattingWidth:"wide"})};function Gl(s){return(t,e={})=>{const n=e.width,a=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],l=t.match(a);if(!l)return null;const c=l[0],f=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],m=Array.isArray(f)?j3(f,b=>b.test(c)):L3(f,b=>b.test(c));let g;g=s.valueCallback?s.valueCallback(m):m,g=e.valueCallback?e.valueCallback(g):g;const y=t.slice(c.length);return{value:g,rest:y}}}function L3(s,t){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&t(s[e]))return e}function j3(s,t){for(let e=0;e<s.length;e++)if(t(s[e]))return e}function U3(s){return(t,e={})=>{const n=t.match(s.matchPattern);if(!n)return null;const a=n[0],l=t.match(s.parsePattern);if(!l)return null;let c=s.valueCallback?s.valueCallback(l[0]):l[0];c=e.valueCallback?e.valueCallback(c):c;const f=t.slice(a.length);return{value:c,rest:f}}}const B3=/^(\d+)(th|st|nd|rd)?/i,F3=/\d+/i,q3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y3={any:[/^b/i,/^(a|c)/i]},H3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Q3={any:[/1/i,/2/i,/3/i,/4/i]},G3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},K3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},X3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},J3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Z3={ordinalNumber:U3({matchPattern:B3,parsePattern:F3,valueCallback:s=>parseInt(s,10)}),era:Gl({matchPatterns:q3,defaultMatchWidth:"wide",parsePatterns:Y3,defaultParseWidth:"any"}),quarter:Gl({matchPatterns:H3,defaultMatchWidth:"wide",parsePatterns:Q3,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Gl({matchPatterns:G3,defaultMatchWidth:"wide",parsePatterns:K3,defaultParseWidth:"any"}),day:Gl({matchPatterns:$3,defaultMatchWidth:"wide",parsePatterns:X3,defaultParseWidth:"any"}),dayPeriod:Gl({matchPatterns:W3,defaultMatchWidth:"any",parsePatterns:J3,defaultParseWidth:"any"})},tP={code:"en-US",formatDistance:S3,formatLong:C3,formatRelative:M3,localize:z3,match:Z3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eP(s,t){const e=Vi(s,t?.in);return y3(e,w3(e))+1}function nP(s,t){const e=Vi(s,t?.in),n=+ef(e)-+v3(e);return Math.round(n/aT)+1}function lT(s,t){const e=Vi(s,t?.in),n=e.getFullYear(),a=Rf(),l=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=Ar(t?.in||s,0);c.setFullYear(n+1,0,l),c.setHours(0,0,0,0);const f=Tu(c,t),m=Ar(t?.in||s,0);m.setFullYear(n,0,l),m.setHours(0,0,0,0);const g=Tu(m,t);return+e>=+f?n+1:+e>=+g?n:n-1}function iP(s,t){const e=Rf(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,a=lT(s,t),l=Ar(t?.in||s,0);return l.setFullYear(a,0,n),l.setHours(0,0,0,0),Tu(l,t)}function sP(s,t){const e=Vi(s,t?.in),n=+Tu(e,t)-+iP(e,t);return Math.round(n/aT)+1}function ve(s,t){const e=s<0?"-":"",n=Math.abs(s).toString().padStart(t,"0");return e+n}const dr={y(s,t){const e=s.getFullYear(),n=e>0?e:1-e;return ve(t==="yy"?n%100:n,t.length)},M(s,t){const e=s.getMonth();return t==="M"?String(e+1):ve(e+1,2)},d(s,t){return ve(s.getDate(),t.length)},a(s,t){const e=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(s,t){return ve(s.getHours()%12||12,t.length)},H(s,t){return ve(s.getHours(),t.length)},m(s,t){return ve(s.getMinutes(),t.length)},s(s,t){return ve(s.getSeconds(),t.length)},S(s,t){const e=t.length,n=s.getMilliseconds(),a=Math.trunc(n*Math.pow(10,e-3));return ve(a,t.length)}},co={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J1={G:function(s,t,e){const n=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(s,t,e){if(t==="yo"){const n=s.getFullYear(),a=n>0?n:1-n;return e.ordinalNumber(a,{unit:"year"})}return dr.y(s,t)},Y:function(s,t,e,n){const a=lT(s,n),l=a>0?a:1-a;if(t==="YY"){const c=l%100;return ve(c,2)}return t==="Yo"?e.ordinalNumber(l,{unit:"year"}):ve(l,t.length)},R:function(s,t){const e=oT(s);return ve(e,t.length)},u:function(s,t){const e=s.getFullYear();return ve(e,t.length)},Q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ve(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ve(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,t,e){const n=s.getMonth();switch(t){case"M":case"MM":return dr.M(s,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(s,t,e){const n=s.getMonth();switch(t){case"L":return String(n+1);case"LL":return ve(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(s,t,e,n){const a=sP(s,n);return t==="wo"?e.ordinalNumber(a,{unit:"week"}):ve(a,t.length)},I:function(s,t,e){const n=nP(s);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):ve(n,t.length)},d:function(s,t,e){return t==="do"?e.ordinalNumber(s.getDate(),{unit:"date"}):dr.d(s,t)},D:function(s,t,e){const n=eP(s);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):ve(n,t.length)},E:function(s,t,e){const n=s.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(s,t,e,n){const a=s.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return ve(l,2);case"eo":return e.ordinalNumber(l,{unit:"day"});case"eee":return e.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(a,{width:"short",context:"formatting"});case"eeee":default:return e.day(a,{width:"wide",context:"formatting"})}},c:function(s,t,e,n){const a=s.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return ve(l,t.length);case"co":return e.ordinalNumber(l,{unit:"day"});case"ccc":return e.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(a,{width:"narrow",context:"standalone"});case"cccccc":return e.day(a,{width:"short",context:"standalone"});case"cccc":default:return e.day(a,{width:"wide",context:"standalone"})}},i:function(s,t,e){const n=s.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return ve(a,t.length);case"io":return e.ordinalNumber(a,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(s,t,e){const a=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(s,t,e){const n=s.getHours();let a;switch(n===12?a=co.noon:n===0?a=co.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(s,t,e){const n=s.getHours();let a;switch(n>=17?a=co.evening:n>=12?a=co.afternoon:n>=4?a=co.morning:a=co.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(s,t,e){if(t==="ho"){let n=s.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return dr.h(s,t)},H:function(s,t,e){return t==="Ho"?e.ordinalNumber(s.getHours(),{unit:"hour"}):dr.H(s,t)},K:function(s,t,e){const n=s.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):ve(n,t.length)},k:function(s,t,e){let n=s.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):ve(n,t.length)},m:function(s,t,e){return t==="mo"?e.ordinalNumber(s.getMinutes(),{unit:"minute"}):dr.m(s,t)},s:function(s,t,e){return t==="so"?e.ordinalNumber(s.getSeconds(),{unit:"second"}):dr.s(s,t)},S:function(s,t){return dr.S(s,t)},X:function(s,t,e){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return tw(n);case"XXXX":case"XX":return sa(n);case"XXXXX":case"XXX":default:return sa(n,":")}},x:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"x":return tw(n);case"xxxx":case"xx":return sa(n);case"xxxxx":case"xxx":default:return sa(n,":")}},O:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Z1(n,":");case"OOOO":default:return"GMT"+sa(n,":")}},z:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Z1(n,":");case"zzzz":default:return"GMT"+sa(n,":")}},t:function(s,t,e){const n=Math.trunc(+s/1e3);return ve(n,t.length)},T:function(s,t,e){return ve(+s,t.length)}};function Z1(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),a=Math.trunc(n/60),l=n%60;return l===0?e+String(a):e+String(a)+t+ve(l,2)}function tw(s,t){return s%60===0?(s>0?"-":"+")+ve(Math.abs(s)/60,2):sa(s,t)}function sa(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),a=ve(Math.trunc(n/60),2),l=ve(n%60,2);return e+a+t+l}const ew=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},uT=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},rP=(s,t)=>{const e=s.match(/(P+)(p+)?/)||[],n=e[1],a=e[2];if(!a)return ew(s,t);let l;switch(n){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",ew(n,t)).replace("{{time}}",uT(a,t))},aP={p:uT,P:rP},oP=/^D+$/,lP=/^Y+$/,uP=["D","DD","YY","YYYY"];function cP(s){return oP.test(s)}function hP(s){return lP.test(s)}function fP(s,t,e){const n=dP(s,t,e);if(console.warn(n),uP.includes(s))throw new RangeError(n)}function dP(s,t,e){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pP=/^'([^]*?)'?$/,yP=/''/g,vP=/[a-zA-Z]/;function nw(s,t,e){const n=Rf(),a=n.locale??tP,l=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,c=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,f=Vi(s,e?.in);if(!_3(f))throw new RangeError("Invalid time value");let m=t.match(gP).map(y=>{const b=y[0];if(b==="p"||b==="P"){const E=aP[b];return E(y,a.formatLong)}return y}).join("").match(mP).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:bP(y)};if(J1[b])return{isToken:!0,value:y};if(b.match(vP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(m=a.localize.preprocessor(f,m));const g={firstWeekContainsDate:l,weekStartsOn:c,locale:a};return m.map(y=>{if(!y.isToken)return y.value;const b=y.value;(hP(b)||cP(b))&&fP(b,t,String(s));const E=J1[b[0]];return E(f,b,a.localize,g)}).join("")}function bP(s){const t=s.match(pP);return t?t[1].replace(yP,"'"):s}function _P({isOpen:s,onClose:t,onSubmit:e,position:n}){const[a,l]=nt.useState(""),c=nt.useRef(null);if(nt.useEffect(()=>{s&&(l(""),setTimeout(()=>c.current?.focus(),10))},[s]),!s||!n)return null;const f=g=>{g.preventDefault(),a.trim()&&(e(a),t())},m=g=>{if(g.key==="Escape"){t();return}g.key===" "&&g.stopPropagation()};return S.jsx("div",{className:"absolute z-[200] animate-in fade-in zoom-in duration-100",style:{left:n.x,top:n.y,transform:"translate(0, -50%)"},children:S.jsx("form",{onSubmit:f,children:S.jsx("input",{ref:c,type:"text",value:a,onChange:g=>l(g.target.value),onKeyDown:m,onBlur:()=>{a.trim()||t()},placeholder:"Type note & hit Enter...",className:"w-64 px-3 py-1.5 bg-white/90 backdrop-blur-sm border-2 border-blue-500 rounded-md shadow-xl outline-none text-sm font-semibold text-gray-800 placeholder:text-gray-400"})})})}function wP({isOpen:s,onClose:t,onSubmit:e,defaultName:n,isUploading:a}){const[l,c]=nt.useState(n),f=nt.useRef(null);if(nt.useEffect(()=>{s&&(c(n),setTimeout(()=>{f.current?.focus(),f.current?.select()},100))},[s,n]),!s)return null;const m=g=>{g.preventDefault(),l.trim()&&e(l.trim())};return S.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 self-center",children:[S.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[S.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[S.jsx(fw,{size:20,className:"text-blue-500"}),S.jsx("h3",{className:"font-bold text-lg",children:"Save Screenshot"})]}),S.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-200 rounded-full transition-colors text-gray-400",children:S.jsx(So,{size:20})})]}),S.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-1.5",children:"File Name"}),S.jsxs("div",{className:"relative group",children:[S.jsx("input",{ref:f,type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"e.g. 25-01-2024_Trade-1",className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl outline-none focus:border-blue-500 transition-all font-medium text-gray-700"}),S.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:".png"})]})]}),S.jsxs("div",{className:"flex gap-3 pt-2",children:[S.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border-2 border-gray-200 text-gray-600 font-bold rounded-xl hover:bg-gray-50 transition-all active:scale-95",children:"Cancel"}),S.jsx("button",{type:"submit",disabled:a||!l.trim(),className:"flex-[2] px-4 py-3 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-200 flex items-center justify-center gap-2 hover:bg-blue-700 transition-all active:scale-95 disabled:opacity-50 disabled:pointer-events-none",children:a?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin"}),S.jsx("span",{children:"Uploading..."})]}):S.jsxs(S.Fragment,{children:[S.jsx(gw,{size:18}),S.jsx("span",{children:"Upload & Copy Link"})]})})]})]})]})})}function EP(){const s=nt.useRef(null),[t,e]=nt.useState(null),[n,a]=nt.useState(null),[l,c]=nt.useState(null),f=nt.useRef(null),m=nt.useRef(new Map),[g,y]=nt.useState("none"),[b,E]=nt.useState(["ema21","pivotPoints"]),[A,x]=nt.useState(!1),[R,D]=nt.useState(null),[B,Z]=nt.useState(null),[rt,gt]=nt.useState(!1),yt=nn(wt=>wt.candles),xt=nn(wt=>wt.currentIndex),N=nn(wt=>wt.trades),M=nt.useMemo(()=>yt.slice(0,xt+1),[yt,xt]),O=nt.useRef(!0),L=nt.useRef(null),z=nt.useCallback(wt=>{D(wt),Z(null),x(!0)},[]),U=nt.useCallback((wt,Et)=>{D(Et),Z({p1:wt,p2:Et}),x(!0)},[]),{clearDrawings:I,addTextDrawing:kt,addCalloutDrawing:Xt,deleteSelectedDrawing:G,selectedDrawingId:dt,isHoveringSelected:bt,handleMouseDown:ut,handleMouseMove:St,handleMouseUp:V}=d3({canvasRef:L,activeTool:g,onToolComplete:()=>{},chartApi:t,seriesApi:n,onTextToolTrigger:z,onCalloutTrigger:U}),J=wt=>{B?Xt(B.p1,B.p2,wt):R&&kt(R,wt),D(null),Z(null)};nt.useEffect(()=>{if(!s.current)return;const wt=BV(s.current,{width:s.current.clientWidth,height:s.current.clientHeight,layout:{background:{type:zg.Solid,color:"#ffffff"},textColor:"#333"},grid:{vertLines:{color:"#f0f0f0"},horzLines:{color:"#f0f0f0"}},rightPriceScale:{borderColor:"#d1d4dc"},timeScale:{borderColor:"#d1d4dc",timeVisible:!0,secondsVisible:!1,fixLeftEdge:!0,lockVisibleTimeRangeOnResize:!0},crosshair:{mode:1}}),Et=wt.addSeries(JV,{upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}),Ct=wt.addSeries(e3,{color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:""});Ct.priceScale().applyOptions({scaleMargins:{top:.8,bottom:0}});const se=h3(Et,[]);Et.attachPrimitive(se),e(wt),a(Et),c(Ct),f.current=se;const Ve=()=>{s.current&&wt&&wt.applyOptions({width:s.current.clientWidth,height:s.current.clientHeight})};return window.addEventListener("resize",Ve),()=>{window.removeEventListener("resize",Ve),wt.remove()}},[]),nt.useEffect(()=>{if(!n)return;const wt=M.map(Ct=>({time:Ct.timestamp,open:Ct.open,high:Ct.high,low:Ct.low,close:Ct.close})),Et=M.map(Ct=>({time:Ct.timestamp,value:Ct.volume,color:Ct.close>=Ct.open?"#26a69a40":"#ef535040"}));if(n.setData(wt),l&&l.setData(Et),t&&M.length>0){const Ct=t.timeScale();O.current&&(Ct.fitContent(),O.current=!1)}},[M,n,l,t]),nt.useEffect(()=>{O.current=!0},[yt.length]),nt.useEffect(()=>{!t||M.length===0||(m.current.forEach(wt=>{t.removeSeries(wt)}),m.current.clear(),b.forEach(wt=>{let Et=[],Ct="";switch(wt){case"sma21":Et=G1(M,21),Ct="#2962FF";break;case"sma60":Et=G1(M,60),Ct="#FF6D00";break;case"ema21":Et=K1(M,21),Ct="#00897B";break;case"ema60":Et=K1(M,60),Ct="#D81B60";break}if(Et.length>0){const se=t.addSeries(KV,{color:Ct,lineWidth:2});se.setData(Et),m.current.set(wt,se)}}))},[b,M,t]),nt.useEffect(()=>{if(!f.current||M.length===0)return;const wt=[];if(N.forEach(Et=>{if(Et.timestamp<=M[M.length-1].timestamp){const Ct=Et.timestamp>1e11,se=new Date(Ct?Et.timestamp:Et.timestamp*1e3),Ve=se.getUTCHours(),ee=se.getUTCMinutes(),me=se.getUTCSeconds(),k=Ve===0&&ee===0&&me===0?`${se.getUTCDate()} ${se.toLocaleString("default",{month:"short",timeZone:"UTC"})}`:`${Ve.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`;wt.push({time:Et.timestamp,position:Et.type==="BUY"?"belowBar":"aboveBar",color:Et.type==="BUY"?"#26a69a":"#ef5350",shape:Et.type==="BUY"?"arrowUp":"arrowDown",text:`${Et.type==="BUY"?"B":"S"}@${Et.price.toFixed(2)} [${k}]`,size:2})}}),b.includes("pivotPoints")){const Et=rT(M);Et.forEach((Ct,se)=>{const Ve=se===Et.length-1,ee=Ct.trendLabel?`${Ct.trendLabel} `:"",me=Ve?Ct.slDistance.toString():"";wt.push({time:Ct.time,position:Ct.type==="bullish"?"belowBar":"aboveBar",color:Ct.type==="bullish"?"#26a69a":"#ef5350",shape:Ct.type==="bullish"?"arrowUp":"arrowDown",text:(ee+me).trim(),size:1})})}wt.sort((Et,Ct)=>Et.time-Ct.time),f.current.setMarkers(wt)},[b,M,N]);const mt=wt=>{E(Et=>Et.includes(wt)?Et.filter(Ct=>Ct!==wt):[...Et,wt])},pt=()=>{I(),y("none")},[ot,_t]=nt.useState(!1),[Tt,Ht]=nt.useState(""),[zt,fe]=nt.useState(null),Re=ei(wt=>wt.notify),Qe=()=>{if(!t||!L.current)return;const wt=t.takeScreenshot();if(!wt)return;const Et=document.createElement("canvas");Et.width=wt.width,Et.height=wt.height;const Ct=Et.getContext("2d");if(!Ct)return;Ct.drawImage(wt,0,0),Ct.drawImage(L.current,0,0,Et.width,Et.height);const se=Et.toDataURL("image/png"),Ve=nn.getState().getCurrentCandle();let ee="chart-screenshot",me="";if(Ve){const ct=Ve.timestamp,Rt=new Date(ct>1e11?ct:ct*1e3);me=nw(Rt,"dd-MM-yyyy")}const W=N.filter(ct=>{const Rt=new Date(ct.timestamp>1e11?ct.timestamp:ct.timestamp*1e3);return nw(Rt,"dd-MM-yyyy")===me}).length,it=W>0?W:1,ft=me?`${me}_Trade-${it}`:ee;Ht(ft),fe(se),_t(!0)},Me=wt=>{zt&&(gt(!0),uR(zt,`${wt}.png`).then(Et=>{Et.link&&(navigator.clipboard.writeText(Et.link),Re("Screenshot uploaded and link copied!","success"),_t(!1),fe(null))}).catch(Et=>{console.error("Failed to upload screenshot:",Et),Re("Upload failed. Downloading locally.","error");const Ct=document.createElement("a");Ct.download=`${wt}.png`,Ct.href=zt,Ct.click(),_t(!1),fe(null)}).finally(()=>{gt(!1)}))};return nt.useEffect(()=>{if(!s.current||!L.current)return;const wt=L.current,Et=s.current,Ct=()=>{const se=Et.getBoundingClientRect();wt.width=se.width,wt.height=se.height};return setTimeout(Ct,100),window.addEventListener("resize",Ct),()=>window.removeEventListener("resize",Ct)},[]),nt.useEffect(()=>{const wt=Et=>{const Ct=Et.target;if(Ct.tagName==="INPUT"||Ct.tagName==="TEXTAREA")return;if((Et.key==="Delete"||Et.key==="Backspace")&&dt){Et.preventDefault(),G();return}if(Et.key==="Escape"){Et.preventDefault(),y("select");return}const se={v:"select",1:"select",2:"freehand",3:"trendline",4:"horizontal",5:"rectangle",6:"fibonacci",7:"riskReward",8:"text",9:"callout"},Ve=Et.key.toLowerCase();if(se[Ve]){Et.preventDefault();const ee=se[Ve];y(g===ee?"none":ee)}};return window.addEventListener("keydown",wt),()=>window.removeEventListener("keydown",wt)},[dt,g,G]),S.jsxs("div",{className:"w-full h-full flex flex-col relative",onContextMenu:wt=>{wt.preventDefault(),y("select")},children:[S.jsx(f3,{activeTool:g,onToolChange:y,activeIndicators:b,onIndicatorToggle:mt,onClearDrawings:pt,onDeleteSelected:G,onTakeScreenshot:Qe,isUploadingScreenshot:rt,hasSelection:!!dt}),S.jsx(_P,{isOpen:A,onClose:()=>x(!1),onSubmit:J,position:R?{x:R.x,y:R.y}:null}),S.jsx(wP,{isOpen:ot,onClose:()=>_t(!1),onSubmit:Me,defaultName:Tt,isUploading:rt}),S.jsxs("div",{className:"relative flex-1",style:{width:"100%",minHeight:"0"},onMouseDownCapture:wt=>{if(g==="none")return;const Et=wt.currentTarget.getBoundingClientRect();if(wt.clientX-Et.left>Et.width-40)return;ut(wt.nativeEvent)&&wt.stopPropagation()},onMouseMove:wt=>{g!=="none"&&St(wt.nativeEvent)},onMouseUp:()=>{g!=="none"&&V()},children:[S.jsx("div",{ref:s,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"auto",zIndex:1}}),S.jsx("canvas",{ref:L,className:"absolute top-0 left-0 w-full h-full",style:{cursor:g==="select"&&bt?"move":g==="select"?"pointer":g!=="none"?"crosshair":"default",pointerEvents:"none",zIndex:100,touchAction:"none"}}),g!=="select"&&g!=="none"&&S.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 bg-blue-600 text-white rounded-full px-6 py-1.5 shadow-xl text-sm font-medium animate-in slide-in-from-top-4 flex items-center gap-4",style:{zIndex:200},children:[S.jsxs("span",{children:["Drawing: ",S.jsx("span",{className:"capitalize",children:g})]}),S.jsx("span",{className:"text-[10px] bg-blue-500 px-2 py-0.5 rounded uppercase",children:"Right-Click to Exit"})]})]})]})}function og(s){return new Date(s*1e3).toISOString().replace("T"," ").substring(0,19)}function iw(s){return new Date(s*1e3).toISOString().substring(11,19)}function pi(s){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}const SP=()=>cw(()=>import("./nifty50-klJ-CIEX.js"),[]);function TP({onOpenHistory:s}){const{isPlaying:t,speed:e,currentIndex:n,candles:a,play:l,pause:c,step:f,setSpeed:m,setCurrentIndex:g,jump:y,executeTrade:b,loadCandles:E}=nn(),[A,x]=nt.useState("10"),[R,D]=nt.useState(65),[B,Z]=nt.useState(!1),[rt,gt]=nt.useState(!1),[yt,xt]=nt.useState("2021-02-01"),[N,M]=nt.useState(""),[O,L]=nt.useState("5"),[z,U]=nt.useState(""),[I,kt]=nt.useState(""),[Xt,G]=nt.useState(!1),dt=nn(ot=>ot.resetSession),bt=nn(ot=>ot.sessionConfig);nt.useEffect(()=>{B&&bt&&(bt.interval&&L(bt.interval),bt.fromDate&&U(bt.fromDate),bt.toDate&&kt(bt.toDate),M(""))},[B,bt]);const ut=async(ot,_t,Tt,Ht)=>{const zt=nn.getState().sessionConfig;if(!zt){ei.getState().notify("No active session config found.","error");return}G(!0);try{if(zt.dataSource==="api"){const fe=await Bw({securityId:zt.securityId,exchangeSegment:zt.exchangeSegment,instrument:zt.instrumentType,interval:Tt,fromDate:ot,toDate:_t});if(fe.success&&fe.data.length>0){const Re={...zt,interval:Tt,fromDate:ot,toDate:_t};E(fe.data,`${zt.securityId}-${zt.exchangeSegment}`,Re),ei.getState().notify("Data reloaded successfully (API)!","success")}else throw new Error(fe.message||"No data received from API")}else{const fe=await SP(),Re=fe.default||fe;if(!Re||!Re.t||!Re.o||!Re.h||!Re.l||!Re.c||!Re.v)throw new Error("Invalid JSON data format");let Qe=IS(Re);if(ot){const Ct=new Date(ot).getTime()/1e3;Qe=Qe.filter(se=>se.timestamp>=Ct)}if(_t){const Ct=new Date(_t).getTime()/1e3+86400;Qe=Qe.filter(se=>se.timestamp<Ct)}let Me=5;Tt==="1"&&(Me=1),Tt==="5"&&(Me=5),Tt==="15"&&(Me=15),Tt==="30"&&(Me=30),Tt==="60"&&(Me=60),Tt==="240"&&(Me=240),(Tt==="1440"||Tt==="1D")&&(Me=1440);const wt=VS(Qe,Me);if(wt.length===0)throw new Error("No candles found for the selected range/timeframe");const Et={...zt,interval:Tt,fromDate:ot,toDate:_t};E(wt,`NIFTY50 (Local ${Tt}m)`,Et),ei.getState().notify("Data reloaded successfully (Local)!","success")}if(U(ot),kt(_t),L(Tt),Z(!1),Ht){const fe=nn.getState().candles,Re=new Date(Ht).getTime()/1e3;let Qe=-1;for(let Me=0;Me<fe.length;Me++)if(fe[Me].timestamp>=Re){Qe=Me;break}Qe!==-1&&(g(Qe),ei.getState().notify(`Jumped to ${Ht}`,"info"))}}catch(fe){console.error("Failed to reload data:",fe),ei.getState().notify(`Failed to reload data: ${fe.message}`,"error")}finally{G(!1)}},St=()=>ut(z,I,O,N),V=ot=>{if(a.length===0)return;const _t=a[n];if(!_t)return;const Tt=_t.timestamp+ot*24*60*60;let Ht=a.findIndex((zt,fe)=>fe>n&&zt.timestamp>=Tt);if(Ht===-1)if(a[a.length-1].timestamp<Tt)Ht=a.length-1;else return;g(Ht)},J=()=>{if(!yt||a.length===0)return;const _t=new Date(yt).getTime()/1e3;let Tt=-1;for(let Ht=0;Ht<a.length;Ht++)if(a[Ht].timestamp>=_t){Tt=Ht;break}Tt!==-1?(g(Tt),ei.getState().notify(`Jumped to ${yt}`,"info")):_t>a[a.length-1].timestamp?(g(a.length-1),ei.getState().notify("Date is beyond available data. Jumped to end.","warning")):(g(0),ei.getState().notify("Date is before available data. Jumped to start.","warning")),gt(!1)},mt=nn(ot=>ot.candles[ot.currentIndex]||null);nt.useEffect(()=>{if(!t)return;const ot=setInterval(()=>{n<a.length-1?f("forward"):c()},1e3/e);return()=>clearInterval(ot)},[t,e,n,a.length,f,c]),nt.useEffect(()=>{const ot=_t=>{const Tt=_t.target;Tt.tagName==="INPUT"||Tt.tagName==="TEXTAREA"||(_t.code==="Space"?(_t.preventDefault(),t?c():l()):_t.code==="ArrowRight"?(_t.preventDefault(),f("forward")):_t.code==="ArrowLeft"&&(_t.preventDefault(),f("backward")))};return window.addEventListener("keydown",ot),()=>window.removeEventListener("keydown",ot)},[t,l,c,f]);const pt=a.length>0?n/(a.length-1)*100:0;return S.jsxs("div",{className:"relative",children:[S.jsxs("div",{className:"flex flex-nowrap items-center justify-between w-full h-full px-1 gap-x-2 py-1 overflow-x-auto scrollbar-hide",children:[S.jsxs("div",{className:"flex items-center gap-0.5 flex-none",children:[S.jsx("button",{onClick:()=>f("backward"),disabled:n===0,className:"p-1.5 rounded hover:bg-gray-100 disabled:opacity-30",title:"Step backward",children:S.jsx(U2,{size:20})}),S.jsx("button",{onClick:t?c:l,disabled:n>=a.length-1,className:"p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 mx-1",title:"Play/Pause (Space)",children:t?S.jsx(dA,{size:20}):S.jsx(yA,{size:20})}),S.jsx("button",{onClick:()=>f("forward"),disabled:n>=a.length-1,className:"p-1.5 rounded hover:bg-gray-100 disabled:opacity-30",title:"Step forward",children:S.jsx(mw,{size:20})}),S.jsxs("select",{value:e,onChange:ot=>m(Number(ot.target.value)),className:"ml-2 px-1 py-1 text-xs border rounded bg-gray-50 focus:outline-none",title:"Playback Speed",children:[S.jsx("option",{value:.5,children:"0.5x"}),S.jsx("option",{value:1,children:"1x"}),S.jsx("option",{value:2,children:"2x"}),S.jsx("option",{value:5,children:"5x"}),S.jsx("option",{value:10,children:"10x"})]}),S.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l pl-1",children:[S.jsx("button",{onClick:()=>y(100),className:"px-1 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded flex items-center justify-center w-6",title:"+100 Bars",children:S.jsx(Z2,{size:12})}),S.jsx("button",{onClick:()=>V(1),className:"px-1 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded flex items-center justify-center w-6",title:"+1 Day",children:S.jsx(P2,{size:12})}),S.jsx("button",{onClick:()=>gt(!0),className:"px-1 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex items-center justify-center w-6",title:"Jump to Date",children:S.jsx(Dm,{size:12})}),S.jsxs("div",{className:"flex items-center gap-0.5 ml-0.5 border-l pl-0.5",children:[S.jsx("input",{type:"number",value:A,onChange:ot=>x(ot.target.value),className:"w-8 px-0.5 py-0.5 border rounded text-center text-[10px]",placeholder:"N"}),S.jsx("button",{onClick:()=>y(Number(A)),className:"px-1 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded hover:bg-blue-100 text-[10px] font-bold",children:"Go"})]})]})]}),S.jsxs("div",{className:"flex flex-col items-center justify-center text-xs text-gray-600 flex-1 px-2 min-w-[120px]",children:[S.jsx("div",{className:"font-medium text-gray-900 text-sm whitespace-nowrap",children:mt?og(mt.timestamp):"--"}),S.jsx("div",{className:"w-full max-w-[12rem] bg-gray-200 rounded-full h-1.5 mt-1 mb-0.5 overflow-hidden",children:S.jsx("div",{className:"bg-blue-500 h-full transition-all duration-200",style:{width:`${pt}%`}})})]}),S.jsxs("div",{className:"flex items-center gap-1 flex-none",children:[S.jsxs("div",{className:"flex items-center gap-1",children:[(()=>{const ot=rT(a.slice(0,n+1)),_t=ot.length>0?ot[ot.length-1]:null;if(!_t)return null;const Tt=_t.slDistance,zt=Math.floor(1e4/Tt);return S.jsxs("button",{onClick:()=>D(zt),className:"flex items-center gap-1 px-1.5 py-0.5 bg-yellow-50 border border-yellow-200 hover:bg-yellow-100 hover:border-yellow-300 rounded text-[10px] text-yellow-800 whitespace-nowrap transition-colors cursor-pointer group",title:`Click to set Quantity: ${zt} (Risk: 10k)`,children:[S.jsx("span",{className:"font-bold",children:_t.type==="bullish"?"L":"S"}),S.jsx("span",{className:"border-l border-yellow-300 pl-1 group-hover:border-yellow-400",children:Tt}),S.jsxs("span",{className:"ml-0.5 font-bold text-yellow-700 bg-yellow-200 px-1 rounded-sm group-hover:bg-yellow-300",children:["Q:",zt]})]})})(),S.jsx("input",{type:"number",min:"1",value:R,onChange:ot=>D(Math.max(1,parseInt(ot.target.value)||1)),className:"w-10 px-0.5 py-1 border rounded text-center text-xs font-medium",title:"Trade Quantity"}),S.jsxs("div",{className:"flex items-center gap-0.5",children:[S.jsx("button",{onClick:()=>b("BUY",R),disabled:!mt,className:"px-2 py-1 bg-green-600 text-white rounded text-xs font-bold hover:bg-green-700 disabled:opacity-50",title:`Buy ${R}`,children:"B"}),S.jsx("button",{onClick:()=>b("SELL",R),disabled:!mt,className:"px-2 py-1 bg-red-600 text-white rounded text-xs font-bold hover:bg-red-700 disabled:opacity-50",title:`Sell ${R}`,children:"S"})]})]}),S.jsx("div",{className:"w-px bg-gray-300 mx-1 h-6"}),S.jsx("button",{onClick:s,className:"p-1.5 text-blue-700 bg-blue-50 hover:bg-blue-100 rounded border border-blue-200",title:"Analysis / Trade History",children:S.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),S.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),S.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})}),S.jsx("button",{onClick:()=>Z(!B),className:"p-1.5 text-gray-700 bg-gray-50 hover:bg-gray-100 rounded border border-gray-200",title:"Data Settings",children:S.jsx(wA,{size:16})}),S.jsx("button",{onClick:dt,className:"p-1.5 text-red-600 bg-red-50 hover:bg-red-100 rounded border border-red-200",title:"Reset Session",children:S.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),S.jsx("path",{d:"M3 3v5h5"})]})})]})]}),B&&S.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-white border-2 border-gray-300 rounded-lg shadow-2xl p-4 z-50 min-w-[320px]",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b",children:[S.jsx("h3",{className:"font-bold text-sm text-gray-800",children:"Data Settings"}),S.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600",children:S.jsx(So,{size:16})})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Timeframe"}),S.jsxs("select",{value:O,onChange:ot=>L(ot.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"1",children:"1 Minute"}),S.jsx("option",{value:"5",children:"5 Minutes"}),S.jsx("option",{value:"15",children:"15 Minutes"}),S.jsx("option",{value:"30",children:"30 Minutes"}),S.jsx("option",{value:"60",children:"1 Hour"}),S.jsx("option",{value:"240",children:"4 Hours"}),S.jsx("option",{value:"1440",children:"1 Day"})]})]}),S.jsxs("div",{className:"pt-2 border-t mt-2",children:[S.jsxs("label",{className:"block text-xs font-medium text-blue-700 mb-1 flex items-center gap-1",children:[S.jsx(Dm,{size:12}),"Jump To Date (Initial View)"]}),S.jsx("input",{type:"date",value:N,onChange:ot=>M(ot.target.value),className:"w-full px-2 py-1.5 text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 bg-blue-50",placeholder:"Select date to jump to..."}),S.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Loads full data range, but starts playback at this date."})]}),S.jsx("div",{className:"border-t my-2"}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"From Date"}),S.jsx("input",{type:"date",value:z,onChange:ot=>U(ot.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"To Date"}),S.jsx("input",{type:"date",value:I,onChange:ot=>kt(ot.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.jsx("button",{onClick:St,disabled:Xt,className:"w-full px-3 py-2 bg-blue-600 text-white rounded font-medium text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Xt?"Loading...":"Apply Changes"})]})]}),rt&&S.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-white border-2 border-blue-300 rounded-lg shadow-2xl p-4 z-50 min-w-[320px]",children:[S.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b",children:[S.jsxs("h3",{className:"font-bold text-sm text-gray-800 flex items-center gap-2",children:[S.jsx(Dm,{size:16,className:"text-blue-600"}),"Jump to Date"]}),S.jsx("button",{onClick:()=>gt(!1),className:"text-gray-400 hover:text-gray-600",children:S.jsx(So,{size:16})})]}),S.jsxs("div",{className:"space-y-3",children:[a.length>0&&S.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded",children:[S.jsx("div",{className:"flex justify-between",children:S.jsx("span",{className:"font-medium",children:"Available Range:"})}),S.jsxs("div",{className:"mt-1",children:[S.jsxs("div",{children:["From: ",og(a[0].timestamp)]}),S.jsxs("div",{children:["To: ",og(a[a.length-1].timestamp)]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Select Date"}),S.jsx("input",{type:"date",value:yt,onChange:ot=>xt(ot.target.value),min:a.length>0?new Date(a[0].timestamp*1e3).toISOString().split("T")[0]:void 0,max:a.length>0?new Date(a[a.length-1].timestamp*1e3).toISOString().split("T")[0]:void 0,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>gt(!1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded font-medium text-sm hover:bg-gray-200",children:"Cancel"}),S.jsx("button",{onClick:J,disabled:!yt,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded font-medium text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Jump to Date"})]})]})]})]})}function xP({isOpen:s,onClose:t}){const e=nn(R=>R.trades),n=nt.useRef(null),[a,l]=nt.useState(null),[c,f]=nt.useState(null),m=nt.useRef(!1),g=nt.useRef({x:0,y:0}),y=nt.useRef({x:0,y:0}),b=nt.useMemo(()=>Yw(e),[e]),E=nt.useMemo(()=>Hw(b),[b]),A=R=>{if(R.target.closest(".dialog-header")){m.current=!0,g.current={x:R.clientX,y:R.clientY};const D=n.current?.getBoundingClientRect();D&&(c?y.current={x:c.x,y:c.y}:(y.current={x:D.left,y:D.top},f({x:D.left,y:D.top})))}};if(nt.useEffect(()=>{const R=B=>{if(!m.current)return;const Z=B.clientX-g.current.x,rt=B.clientY-g.current.y;f({x:y.current.x+Z,y:y.current.y+rt})},D=()=>{m.current=!1};return window.addEventListener("mousemove",R),window.addEventListener("mouseup",D),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",D)}},[]),nt.useEffect(()=>{function R(D){n.current&&!n.current.contains(D.target)&&t()}return s&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[s,t]),!s)return null;const x=c?{left:`${c.x}px`,top:`${c.y}px`,position:"fixed",margin:0,width:"1200px",maxWidth:"90vw",height:"85vh",maxHeight:"85vh"}:{width:"1200px",maxWidth:"90vw",height:"85vh",maxHeight:"85vh"};return S.jsx("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-60",children:S.jsxs("div",{ref:n,onMouseDown:A,className:"bg-white rounded-lg shadow-2xl flex flex-col overflow-hidden border-2 border-gray-300",style:x,children:[S.jsxs("div",{className:"dialog-header flex items-center justify-between px-4 py-3 border-b-2 border-gray-200 cursor-move select-none bg-gradient-to-r from-blue-50 to-indigo-50",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),S.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Trade Analysis"})]}),S.jsx("button",{onClick:t,className:"p-1.5 hover:bg-red-100 rounded-md text-gray-600 hover:text-red-600 transition-colors",onMouseDown:R=>R.stopPropagation(),children:S.jsx(So,{size:20})})]}),S.jsxs("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:[S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[S.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Net P&L"}),S.jsx("div",{className:`text-2xl font-bold ${E.totalPnL>=0?"text-green-600":"text-red-600"}`,children:pi(E.totalPnL)}),S.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[E.totalTrades," Trades (",E.winningTrades,"W - ",E.losingTrades,"L)"]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[S.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Win Rate"}),S.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[E.winRate.toFixed(1),"%"]}),S.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["PF: ",E.profitFactor.toFixed(2)]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[S.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Avg Win / Loss"}),S.jsxs("div",{className:"flex justify-between items-baseline",children:[S.jsx("span",{className:"text-green-600 font-semibold",children:pi(E.avgWin)}),S.jsx("span",{className:"text-gray-300",children:"/"}),S.jsx("span",{className:"text-red-600 font-semibold",children:pi(E.avgLoss)})]})]}),S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[S.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Longs vs Shorts"}),S.jsxs("div",{className:"space-y-1 text-sm",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{children:"Longs"}),S.jsxs("span",{className:E.longs.pnl>=0?"text-green-600":"text-red-600",children:[pi(E.longs.pnl)," (",E.longs.count,")"]})]}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{children:"Shorts"}),S.jsxs("span",{className:E.shorts.pnl>=0?"text-green-600":"text-red-600",children:[pi(E.shorts.pnl)," (",E.shorts.count,")"]})]})]})]})]}),S.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:S.jsxs("table",{className:"w-full text-sm text-left",children:[S.jsx("thead",{className:"bg-gray-50 text-gray-600 font-semibold border-b",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-3 w-10"}),S.jsx("th",{className:"px-4 py-3",children:"Status"}),S.jsx("th",{className:"px-4 py-3",children:"Entry Time"}),S.jsx("th",{className:"px-4 py-3",children:"Direction"}),S.jsx("th",{className:"px-4 py-3 text-right",children:"Qty"}),S.jsx("th",{className:"px-4 py-3 text-right",children:"Avg Entry"}),S.jsx("th",{className:"px-4 py-3 text-right",children:"Avg Exit"}),S.jsx("th",{className:"px-4 py-3 text-right",children:"P&L"}),S.jsx("th",{className:"px-4 py-3 text-right",children:"Duration"})]})}),S.jsx("tbody",{className:"divide-y divide-gray-100",children:b.length===0?S.jsx("tr",{children:S.jsx("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No positions recorded yet."})}):b.map(R=>{const D=a===R.id;return S.jsxs(S.Fragment,{children:[S.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>l(D?null:R.id),children:[S.jsx("td",{className:"px-4 py-3 text-gray-400",children:D?S.jsx(dw,{size:16}):S.jsx(mw,{size:16})}),S.jsx("td",{className:"px-4 py-3",children:S.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${R.status==="OPEN"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:R.status})}),S.jsx("td",{className:"px-4 py-3 text-gray-600",children:iw(R.entryTime)}),S.jsx("td",{className:"px-4 py-3",children:S.jsx("span",{className:`font-semibold ${R.direction==="LONG"?"text-green-600":"text-red-600"}`,children:R.direction})}),S.jsx("td",{className:"px-4 py-3 text-right font-mono",children:R.totalQuantity}),S.jsx("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:pi(R.avgEntryPrice)}),S.jsx("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:R.avgExitPrice?pi(R.avgExitPrice):"-"}),S.jsx("td",{className:`px-4 py-3 text-right font-bold font-mono ${R.realizedPnL>0?"text-green-600":R.realizedPnL<0?"text-red-600":"text-gray-400"}`,children:pi(R.realizedPnL)}),S.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:R.durationMinutes?`${R.durationMinutes.toFixed(1)}m`:"-"})]},R.id),D&&S.jsx("tr",{className:"bg-gray-50",children:S.jsx("td",{colSpan:9,className:"px-4 py-3 pl-12",children:S.jsx("div",{className:"border rounded bg-white overflow-hidden text-xs",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{className:"bg-gray-100 text-gray-500",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-3 py-2 text-left",children:"Exec Time"}),S.jsx("th",{className:"px-3 py-2 text-left",children:"Type"}),S.jsx("th",{className:"px-3 py-2 text-right",children:"Price"}),S.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),S.jsx("th",{className:"px-3 py-2 text-right",children:"Realized P&L"})]})}),S.jsx("tbody",{className:"divide-y divide-gray-100",children:R.executions.map((B,Z)=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-3 py-2 text-gray-600",children:iw(B.timestamp)}),S.jsx("td",{className:`px-3 py-2 font-semibold ${B.type==="BUY"?"text-green-600":"text-red-600"}`,children:B.type}),S.jsx("td",{className:"px-3 py-2 text-right font-mono",children:pi(B.price)}),S.jsx("td",{className:"px-3 py-2 text-right font-mono",children:B.quantity}),S.jsx("td",{className:"px-3 py-2 text-right font-mono text-gray-500",children:B.pnl?pi(B.pnl):"-"})]},B.id||Z))})]})})})})]})})})]})})]})]})})}function AP({onOpenDetail:s}){const t=nn(D=>D.position),e=nn(D=>D.candles),n=nn(D=>D.currentIndex),[a,l]=nt.useState(null),c=nt.useRef(!1),f=nt.useRef({x:0,y:0}),m=nt.useRef({x:0,y:0}),g=D=>{c.current=!0,f.current={x:D.clientX,y:D.clientY};const B=D.currentTarget.getBoundingClientRect();a?m.current={x:a.x,y:a.y}:(m.current={x:B.left,y:B.top},l({x:B.left,y:B.top}))};if(nt.useEffect(()=>{const D=Z=>{if(!c.current)return;const rt=Z.clientX-f.current.x,gt=Z.clientY-f.current.y;l({x:m.current.x+rt,y:m.current.y+gt})},B=()=>{c.current=!1};return window.addEventListener("mousemove",D),window.addEventListener("mouseup",B),()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",B)}},[]),!t||t.quantity===0)return null;const y=e[n];if(!y)return null;const b=(y.close-t.averagePrice)*t.quantity,E=t.quantity>0?"LONG":"SHORT",A=Math.abs(t.quantity),x=b>=0,R=a?{left:`${a.x}px`,top:`${a.y}px`,position:"fixed"}:{right:"80px",top:"60px",position:"absolute"};return S.jsxs("div",{className:"bg-white border-2 border-gray-400 shadow-2xl rounded-lg p-3 z-[150] min-w-[220px] cursor-move select-none",onMouseDown:g,style:R,children:[S.jsxs("div",{className:"flex justify-between items-center mb-2 border-b-2 border-gray-200 pb-2",children:[S.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${E==="LONG"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:E}),S.jsxs("span",{className:"text-xs text-gray-700 font-bold font-mono",children:[A," Qty"]})]}),S.jsxs("div",{className:"flex flex-col gap-1.5",children:[S.jsxs("div",{className:"flex justify-between text-xs",children:[S.jsx("span",{className:"text-gray-600 font-medium",children:"Avg Price:"}),S.jsx("span",{className:"font-bold text-gray-900",children:pi(t.averagePrice)})]}),S.jsxs("div",{className:"flex justify-between text-sm mt-1 items-end",children:[S.jsxs("div",{children:[S.jsx("span",{className:"font-semibold text-gray-600 block text-[10px] leading-tight mb-0.5",children:"Unrealized P&L"}),S.jsx("span",{className:`font-bold text-base ${x?"text-green-600":"text-red-600"}`,children:pi(b)})]}),s&&S.jsx("button",{onClick:D=>{D.stopPropagation(),s()},className:"text-[10px] px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 font-semibold",children:"Analysis"})]})]})]})}function CP(){const{notifications:s,remove:t}=ei();return s.length===0?null:S.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3 max-w-md w-full pointer-events-none",children:s.map(e=>S.jsxs("div",{className:`pointer-events-auto p-4 rounded-xl shadow-2xl flex items-start gap-3 animate-in slide-in-from-right-full duration-300 border-l-4 ${e.type==="success"?"bg-green-50 border-green-500 text-green-800":e.type==="error"?"bg-red-50 border-red-500 text-red-800":e.type==="warning"?"bg-amber-50 border-amber-500 text-amber-800":"bg-blue-50 border-blue-500 text-blue-800"}`,children:[S.jsxs("div",{className:"mt-0.5",children:[e.type==="success"&&S.jsx(H2,{size:18}),e.type==="error"&&S.jsx(q2,{size:18}),e.type==="warning"&&S.jsx(MA,{size:18}),e.type==="info"&&S.jsx(rA,{size:18})]}),S.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),S.jsx("button",{onClick:()=>t(e.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:S.jsx(So,{size:16})})]},e.id))})}const RP=new E2;function MP(){const s=nn(a=>a.candles),[t,e]=nt.useState(!1),n=s.length>0;return S.jsx(T2,{client:RP,children:S.jsxs("div",{className:"h-screen w-screen bg-gray-100 flex overflow-hidden font-sans",children:[S.jsx(CP,{}),S.jsx("main",{className:"flex-1 flex flex-col relative min-w-0",children:n?S.jsxs("div",{className:"flex-1 flex flex-col relative h-full",children:[S.jsxs("div",{className:"flex-1 relative min-h-0",children:[S.jsx(EP,{}),S.jsx(AP,{onOpenDetail:()=>e(!0)})]}),t&&S.jsx(xP,{isOpen:t,onClose:()=>e(!1)}),S.jsxs("div",{className:"flex-none p-1 bg-white border-b z-10 flex flex-nowrap gap-2 items-center",children:[S.jsx("div",{className:"flex-1 min-w-0",children:S.jsx(TP,{onOpenHistory:()=>e(!0)})}),S.jsx("button",{onClick:()=>nn.getState().saveRemoteSession(),className:"p-1.5 text-blue-700 bg-blue-50 border border-blue-200 hover:bg-blue-100 rounded",title:"Save current session to Firebase",children:S.jsx(gw,{size:16})}),S.jsx("button",{onClick:()=>nn.getState().loadCandles([],""),className:"p-1.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300",title:"Load New Data / Reset",children:S.jsx(eA,{size:16})})]})]}):S.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-white flex flex-col items-center",children:S.jsxs("div",{className:"max-w-2xl w-full my-auto",children:[S.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[S.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"Welcome to Manual Backtesting"}),S.jsx("p",{className:"text-blue-800 text-sm",children:"Load historical candle data to start backtesting. Enter the security ID, select the timeframe, and date range below."})]}),S.jsx(kI,{})]})})})]})})}Xx.createRoot(document.getElementById("root")).render(S.jsx(nt.StrictMode,{children:S.jsx(MP,{})}));
